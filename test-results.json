{"numFailedTestSuites":1,"numFailedTests":1,"numPassedTestSuites":11,"numPassedTests":46,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":12,"numTotalTests":47,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1746066743825,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["tryAttack"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"tryAttack decreases defender health by 10 for normal attack in range and not on cooldown","invocations":1,"location":{"column":3,"line":18},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"decreases defender health by 10 for normal attack in range and not on cooldown"},{"ancestorTitles":["tryAttack"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"tryAttack special attack decreases health by 30 and does not go below 0","invocations":1,"location":{"column":3,"line":24},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"special attack decreases health by 30 and does not go below 0"},{"ancestorTitles":["tryAttack"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"tryAttack health is reset after scene restart and can be damaged again","invocations":1,"location":{"column":3,"line":31},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"health is reset after scene restart and can be damaged again"},{"ancestorTitles":["tryAttack"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"tryAttack decreases scene.playerHealth for player 2 attacking player 1","invocations":1,"location":{"column":3,"line":37},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"decreases scene.playerHealth for player 2 attacking player 1"},{"ancestorTitles":["tryAttack"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"tryAttack special attack decreases health by 30 and does not go below 0","invocations":1,"location":{"column":3,"line":43},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"special attack decreases health by 30 and does not go below 0"},{"ancestorTitles":["tryAttack"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"tryAttack health is reset after scene restart and can be damaged again","invocations":1,"location":{"column":3,"line":50},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"health is reset after scene restart and can be damaged again"},{"ancestorTitles":["tryAttack"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"tryAttack decreases scene.playerHealth for player 2 attacking player 1","invocations":1,"location":{"column":3,"line":61},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"decreases scene.playerHealth for player 2 attacking player 1"},{"ancestorTitles":["tryAttack"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"tryAttack special attack decreases health by 30 and does not go below 0","invocations":1,"location":{"column":3,"line":67},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"special attack decreases health by 30 and does not go below 0"},{"ancestorTitles":["tryAttack"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"tryAttack health is reset after scene restart and can be damaged again","invocations":1,"location":{"column":3,"line":74},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"health is reset after scene restart and can be damaged again"},{"ancestorTitles":["tryAttack"],"duration":0,"failureDetails":[{}],"failureMessages":["ReferenceError: makeScene is not defined\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/gameUtils.test.mjs:86:19)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"tryAttack initializes defender.health if undefined","invocations":1,"location":{"column":3,"line":85},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"initializes defender.health if undefined"},{"ancestorTitles":["tryAttack"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"tryAttack decreases scene.playerHealth for player 1 attacking player 2","invocations":1,"location":{"column":3,"line":94},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"decreases scene.playerHealth for player 1 attacking player 2"},{"ancestorTitles":["tryAttack"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"tryAttack decreases scene.playerHealth for player 2 attacking player 1","invocations":1,"location":{"column":3,"line":100},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"decreases scene.playerHealth for player 2 attacking player 1"},{"ancestorTitles":["tryAttack"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"tryAttack special attack decreases health by 30 and does not go below 0","invocations":1,"location":{"column":3,"line":106},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"special attack decreases health by 30 and does not go below 0"},{"ancestorTitles":["tryAttack"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"tryAttack health is reset after scene restart and can be damaged again","invocations":1,"location":{"column":3,"line":113},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"health is reset after scene restart and can be damaged again"},{"ancestorTitles":["tryAttack"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"tryAttack decreases scene.playerHealth for player 1 attacking player 2","invocations":1,"location":{"column":3,"line":124},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"decreases scene.playerHealth for player 1 attacking player 2"},{"ancestorTitles":["tryAttack"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"tryAttack decreases scene.playerHealth for player 2 attacking player 1","invocations":1,"location":{"column":3,"line":130},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"decreases scene.playerHealth for player 2 attacking player 1"},{"ancestorTitles":["tryAttack"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"tryAttack special attack decreases health by 30 and does not go below 0","invocations":1,"location":{"column":3,"line":136},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"special attack decreases health by 30 and does not go below 0"},{"ancestorTitles":["tryAttack"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"tryAttack health is reset after scene restart and can be damaged again","invocations":1,"location":{"column":3,"line":143},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"health is reset after scene restart and can be damaged again"}],"endTime":1746066744295,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mtryAttack › initializes defender.health if undefined\u001b[39m\u001b[22m\n\n    ReferenceError: makeScene is not defined\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 84 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 85 |\u001b[39m   it(\u001b[32m'initializes defender.health if undefined'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 86 |\u001b[39m     \u001b[36mconst\u001b[39m scene \u001b[33m=\u001b[39m makeScene()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 87 |\u001b[39m     \u001b[36mconst\u001b[39m attacker \u001b[33m=\u001b[39m makePlayer(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 88 |\u001b[39m     \u001b[36mconst\u001b[39m defender \u001b[33m=\u001b[39m makePlayer(\u001b[35m50\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 89 |\u001b[39m     defender\u001b[33m.\u001b[39mhealth \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mgameUtils.test.mjs\u001b[39m\u001b[0m\u001b[2m:86:19)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/gameUtils.test.mjs","startTime":1746066744149,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Orientation Overlay Behavior"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Orientation Overlay Behavior shows overlay in portrait mode","invocations":1,"location":{"column":3,"line":12},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"shows overlay in portrait mode"},{"ancestorTitles":["Orientation Overlay Behavior"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Orientation Overlay Behavior does not show overlay in landscape mode","invocations":1,"location":{"column":3,"line":18},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"does not show overlay in landscape mode"}],"endTime":1746066744377,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/orientationOverlay.test.mjs","startTime":1746066744307,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Game Constants"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Game Constants GAME_WIDTH and GAME_HEIGHT","invocations":1,"location":{"column":3,"line":21},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"GAME_WIDTH and GAME_HEIGHT"},{"ancestorTitles":["Game Constants"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Game Constants PLAYER constants","invocations":1,"location":{"column":3,"line":25},"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"PLAYER constants"},{"ancestorTitles":["Game Constants"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Game Constants ROUND_TIME","invocations":1,"location":{"column":3,"line":34},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"ROUND_TIME"},{"ancestorTitles":["KidsFightScene"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene update does not throw if player1 or debugText are missing or destroyed","invocations":1,"location":{"column":3,"line":42},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"update does not throw if player1 or debugText are missing or destroyed"},{"ancestorTitles":["KidsFightScene"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene showSpecialEffect calls specialEffect methods","invocations":1,"location":{"column":3,"line":151},"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"showSpecialEffect calls specialEffect methods"},{"ancestorTitles":["KidsFightScene"],"duration":24,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene applyGameCss updates canvas and parent styles","invocations":1,"location":{"column":3,"line":162},"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"applyGameCss updates canvas and parent styles"},{"ancestorTitles":["KidsFightScene"],"duration":21,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene updateSceneLayout positions bg, platform, timer","invocations":1,"location":{"column":3,"line":174},"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"updateSceneLayout positions bg, platform, timer"},{"ancestorTitles":["KidsFightScene"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene tryAttack deals damage and increments attackCount","invocations":1,"location":{"column":3,"line":200},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"tryAttack deals damage and increments attackCount"}],"endTime":1746066744679,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/main.test.mjs","startTime":1746066744392,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene.endGame draw scenario"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene.endGame draw scenario Both players use frame 5 and are not rotated on draw","invocations":1,"location":{"column":3,"line":52},"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"Both players use frame 5 and are not rotated on draw"}],"endTime":1746066744750,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/endGameDraw.test.mjs","startTime":1746066744701,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Touch attack flags for both players"],"duration":18,"failureDetails":[],"failureMessages":[],"fullName":"Touch attack flags for both players Player 1 attack via touch resets flag and damages Player 2","invocations":1,"location":{"column":3,"line":42},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Player 1 attack via touch resets flag and damages Player 2"},{"ancestorTitles":["Touch attack flags for both players"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"Touch attack flags for both players Player 2 attack via touch resets flag and damages Player 1","invocations":1,"location":{"column":3,"line":60},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Player 2 attack via touch resets flag and damages Player 1"}],"endTime":1746066744837,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/playerAttackTouch.test.mjs","startTime":1746066744756,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Player 2 attack keys"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Player 2 attack keys attacks when ; key is pressed","invocations":1,"location":{"column":3,"line":61},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"attacks when ; key is pressed"},{"ancestorTitles":["Player 2 attack keys"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Player 2 attack keys attacks when K key is pressed","invocations":1,"location":{"column":3,"line":67},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"attacks when K key is pressed"},{"ancestorTitles":["Player 2 attack keys"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Player 2 attack keys does not attack if both keys are up","invocations":1,"location":{"column":3,"line":73},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"does not attack if both keys are up"}],"endTime":1746066744896,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/player2AttackKeys.test.mjs","startTime":1746066744843,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["updateSceneLayout"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"updateSceneLayout aligns player and platform Y positions correctly","invocations":1,"location":{"column":3,"line":5},"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"aligns player and platform Y positions correctly"}],"endTime":1746066744970,"message":"","name":"/Users/ivan/projects/kidsfight/updateSceneLayout.test.js","startTime":1746066744901,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Special pips UI logic"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Special pips UI logic shows correct pips for 0, 1, 2 attacks and hides all after 3","invocations":1,"location":{"column":3,"line":50},"numPassingAsserts":42,"retryReasons":[],"status":"passed","title":"shows correct pips for 0, 1, 2 attacks and hides all after 3"}],"endTime":1746066745021,"message":"","name":"/Users/ivan/projects/kidsfight/specialPips.test.js","startTime":1746066744976,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Special attack restriction"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Special attack restriction does NOT allow special if attackCount < 3","invocations":1,"location":{"column":3,"line":68},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"does NOT allow special if attackCount < 3"},{"ancestorTitles":["Special attack restriction"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Special attack restriction allows special if attackCount >= 3","invocations":1,"location":{"column":3,"line":77},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"allows special if attackCount >= 3"},{"ancestorTitles":["Special attack restriction"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Special attack restriction allows special via touch only if attackCount >= 3","invocations":1,"location":{"column":3,"line":87},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"allows special via touch only if attackCount >= 3"},{"ancestorTitles":["Special attack restriction"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Special attack restriction does NOT allow special via touch if attackCount < 3","invocations":1,"location":{"column":3,"line":95},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"does NOT allow special via touch if attackCount < 3"}],"endTime":1746066745075,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/specialAttackRestriction.test.mjs","startTime":1746066745033,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene state reset on restart"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene state reset on restart All state is reset to defaults on restart","invocations":1,"location":{"column":3,"line":40},"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"All state is reset to defaults on restart"},{"ancestorTitles":["KidsFightScene keyboard input after restart"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene keyboard input after restart Keyboard keys and cursors are reinitialized on restart","invocations":1,"location":{"column":3,"line":59},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"Keyboard keys and cursors are reinitialized on restart"}],"endTime":1746066745194,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/sceneRestart.test.mjs","startTime":1746066745093,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Play Again button sizing"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Play Again button sizing Button style does not use fixedWidth","invocations":1,"location":{"column":3,"line":33},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"Button style does not use fixedWidth"}],"endTime":1746066745266,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/playAgainButton.test.mjs","startTime":1746066745208,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Attack Cooldown Logic"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Attack Cooldown Logic should allow attack if cooldown has passed and in range","invocations":1,"location":{"column":3,"line":24},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should allow attack if cooldown has passed and in range"},{"ancestorTitles":["Attack Cooldown Logic"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Attack Cooldown Logic should NOT allow attack if cooldown has NOT passed","invocations":1,"location":{"column":3,"line":33},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should NOT allow attack if cooldown has NOT passed"},{"ancestorTitles":["Attack Cooldown Logic"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Attack Cooldown Logic should NOT allow attack if out of range","invocations":1,"location":{"column":3,"line":42},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should NOT allow attack if out of range"},{"ancestorTitles":["Attack Cooldown Logic"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Attack Cooldown Logic should allow both players to attack independently","invocations":1,"location":{"column":3,"line":52},"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should allow both players to attack independently"}],"endTime":1746066745346,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/attackCooldown.test.mjs","startTime":1746066745271,"status":"passed","summary":""}],"wasInterrupted":false}
