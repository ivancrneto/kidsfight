var t=globalThis,e={},s={},i=t.parcelRequire7a4b;null==i&&((i=function(t){if(t in e)return e[t].exports;if(t in s){var i=s[t];delete s[t];var a={id:t,exports:{}};return e[t]=a,i.call(a.exports,a,a.exports),a.exports}var h=Error("Cannot find module '"+t+"'");throw h.code="MODULE_NOT_FOUND",h}).register=function(t,e){s[t]=e},t.parcelRequire7a4b=i),(0,i.register)("bHOzE",function(t,e){t.exports={updateSceneLayout:function(t){let e=t.scale.width,s=t.scale.height;if(t.children&&t.children.list){let i=t.children.list.find(t=>t.texture&&"scenario1"===t.texture.key);i&&(i.setPosition(e/2,s/2),i.displayWidth=e,i.displayHeight=s)}if(t.children&&t.children.list){let s=t.children.list.find(t=>"Rectangle"===t.type&&9132587===t.fillColor);s&&(s.setPosition(e/2,240),s.displayWidth=e)}t.cameras&&t.cameras.main&&t.physics&&t.physics.world&&(t.cameras.main.setBounds(0,0,e,s),t.physics.world.setBounds(0,0,e,s)),"function"==typeof t.updateControlPositions&&t.updateControlPositions(),t.timerText&&t.timerText.setPosition(e/2,50)},applyGameCss:function(){let t=document.querySelector("canvas"),e=document.getElementById("game-container");t&&(t.style.position="fixed",t.style.left="env(safe-area-inset-left, 0px)",t.style.top="env(safe-area-inset-top, 0px)",t.style.width="calc(100vw - env(safe-area-inset-left, 0px) - env(safe-area-inset-right, 0px))",t.style.height="calc(100vh - env(safe-area-inset-top, 0px) - env(safe-area-inset-bottom, 0px))",t.style.maxWidth="100vw",t.style.maxHeight="100vh",t.style.objectFit="contain",t.style.background="#222"),e&&(e.style.position="fixed",e.style.left="env(safe-area-inset-left, 0px)",e.style.top="env(safe-area-inset-top, 0px)",e.style.width="100vw",e.style.height="100vh",e.style.background="#222",e.style.overflow="hidden")},tryAttack:function(t,e,s,i,a,h){if(s&&i)t.lastAttackTime||(t.lastAttackTime=[0,0]),t.attackCount||(t.attackCount=[0,0]),!(a-t.lastAttackTime[e]<500)&&!(Math.abs(s.x-i.x)>100)&&(t.lastAttackTime[e]=a,t.attackCount[e]++,i.health-=h?30:10,t.cameras&&t.cameras.main&&"function"==typeof t.cameras.main.shake&&t.cameras.main.shake(h?250:100,h?.03:.01))}}});const a=window.innerWidth,h=window.innerHeight;class l extends Phaser.Scene{showSpecialEffect(t,e,s=30){this.specialEffect&&(this.specialEffect.clear(),this.specialEffect.setVisible(!0),this.specialEffect.setAlpha(1),this.specialEffect.setScale(1),this.specialEffect.lineStyle(8,60159,.7),this.specialEffect.strokeCircle(t,e,20),this.tweens.add({targets:this.specialEffect,alpha:0,scaleX:2,scaleY:2,duration:350,onComplete:()=>{this.specialEffect.clear(),this.specialEffect.setVisible(!1),this.specialEffect.setAlpha(1),this.specialEffect.setScale(1)}}))}constructor(){super("KidsFightScene"),this.lastAttackTime=[0,0],this.attackCount=[0,0],this.lungeTimer=[0,0],this.timeLeft=60,this.player1State="idle",this.player2State="idle"}init(t){this.selected=t||{p1:0,p2:1}}preload(){this.load.image("player1_raw","sprites-bento3.png"),this.load.image("player2_raw","sprites-davir3.png"),this.load.image("scenario1","scenario1.png")}create(){let t;if(!this.textures.exists("player1")){let t=[300,300,400,460,500,440,440,440],e=this.textures.get("player1_raw").getSourceImage();this.textures.addSpriteSheet("player1",e,{frameWidth:430,frameHeight:512,startFrame:0,endFrame:6});let s=this.textures.get("player1");s.frames={__BASE:s.frames.__BASE};let i=0;for(let e=0;e<t.length;e++)s.add(e,0,i,0,t[e],512),i+=t[e]}if(!this.textures.exists("player2")){let t=[300,300,400,460,500,400,400,400],e=this.textures.get("player2_raw").getSourceImage();this.textures.addSpriteSheet("player2",e,{frameWidth:400,frameHeight:512,startFrame:0,endFrame:t.length-1});let s=this.textures.get("player2");s.frames={__BASE:s.frames.__BASE};let i=0;for(let e=0;e<t.length;e++)s.add(e,0,i,0,t[e],512),i+=t[e]}let e=this.add.image(a/2,h/2,"scenario1").setOrigin(.5,.5);e.displayWidth=a,e.displayHeight=h;let s=this.cameras.main;if(this.isTouch){let t=.1*s.width,e=.05*s.height;this.physics.world.setBounds(t,e,s.width-2*t,s.height-2*e),this.cameras.main.setBounds(t,e,s.width-2*t,s.height-2*e)}else this.physics.world.setBounds(0,0,s.width,s.height),this.cameras.main.setBounds(0,0,s.width,s.height);if(this.touchControls={p1:{},p2:{}},this.isTouch="undefined"!=typeof window&&(navigator.maxTouchPoints&&navigator.maxTouchPoints>0||"ontouchstart"in window),this.isTouch){let t=this.cameras.main;t.width,t.height,this.touchControls.p1.left=this.add.rectangle(0,0,48,48,4473924,.7).setInteractive().setDepth(9999),this.touchControls.p1.right=this.add.rectangle(0,0,48,48,4473924,.7).setInteractive().setDepth(9999),this.touchControls.p1.jump=this.add.rectangle(0,0,48,48,8947848,.7).setInteractive().setDepth(9999),this.touchControls.p1.down=this.add.rectangle(0,0,48,48,8947848,.7).setInteractive().setDepth(9999),this.touchControls.p1.attack=this.add.circle(0,0,30,0xff4444,.8).setInteractive().setDepth(9999),this.touchControls.p1.special=this.add.circle(0,0,30,0xffd700,.8).setInteractive().setDepth(9999),this.touchControls.p2.left=this.add.rectangle(0,0,48,48,4473924,.7).setInteractive().setDepth(9999),this.touchControls.p2.right=this.add.rectangle(0,0,48,48,4473924,.7).setInteractive().setDepth(9999),this.touchControls.p2.jump=this.add.rectangle(0,0,48,48,8947848,.7).setInteractive().setDepth(9999),this.touchControls.p2.down=this.add.rectangle(0,0,48,48,8947848,.7).setInteractive().setDepth(9999),this.touchControls.p2.attack=this.add.circle(0,0,30,4500223,.8).setInteractive().setDepth(9999),this.touchControls.p2.special=this.add.circle(0,0,30,0xffd700,.8).setInteractive().setDepth(9999),this.touchFlags={p1:{left:!1,right:!1,jump:!1,down:!1,attack:!1,special:!1},p2:{left:!1,right:!1,jump:!1,down:!1,attack:!1,special:!1}};let e=(t,e,s)=>{t.on("pointerdown",()=>{e[s]=!0}),t.on("pointerup",()=>{e[s]=!1}),t.on("pointerout",()=>{e[s]=!1}),t.on("pointerupoutside",()=>{e[s]=!1})};Object.entries(this.touchControls.p1).forEach(([t,s])=>e(s,this.touchFlags.p1,t)),Object.entries(this.touchControls.p2).forEach(([t,s])=>e(s,this.touchFlags.p2,t)),this.touchLabels=[],this.touchLabels.push(this.add.text(0,0,"<",{fontSize:"24px",color:"#fff"}).setDepth(1e4)),this.touchLabels.push(this.add.text(0,0,">",{fontSize:"24px",color:"#fff"}).setDepth(1e4)),this.touchLabels.push(this.add.text(0,0,"^",{fontSize:"24px",color:"#fff"}).setDepth(1e4)),this.touchLabels.push(this.add.text(0,0,"v",{fontSize:"24px",color:"#fff"}).setDepth(1e4)),this.touchLabels.push(this.add.text(0,0,"A",{fontSize:"24px",color:"#fff"}).setDepth(1e4)),this.touchLabels.push(this.add.text(0,0,"S",{fontSize:"24px",color:"#222"}).setDepth(1e4)),this.touchLabels.push(this.add.text(0,0,"<",{fontSize:"24px",color:"#fff"}).setDepth(1e4)),this.touchLabels.push(this.add.text(0,0,">",{fontSize:"24px",color:"#fff"}).setDepth(1e4)),this.touchLabels.push(this.add.text(0,0,"^",{fontSize:"24px",color:"#fff"}).setDepth(1e4)),this.touchLabels.push(this.add.text(0,0,"v",{fontSize:"24px",color:"#fff"}).setDepth(1e4)),this.touchLabels.push(this.add.text(0,0,"A",{fontSize:"24px",color:"#fff"}).setDepth(1e4)),this.touchLabels.push(this.add.text(0,0,"S",{fontSize:"24px",color:"#222"}).setDepth(1e4)),this.updateControlPositions()}this.hitFlash=this.add.graphics({x:0,y:0}).setDepth(999),this.hitFlash.setVisible(!1),this.specialEffect=this.add.graphics({x:0,y:0}).setDepth(998),this.specialEffect.setVisible(!1),e.displayWidth=a,e.displayHeight=h,this.add.rectangle(a/2,240,a,20,9132587).setDepth(2).setVisible(!1);let i=this.physics.add.staticGroup();i.create(a/2,240,null).setDisplaySize(a,20).setVisible(!1).refreshBody();let l=["player1","player2"],r=this.selected&&"number"==typeof this.selected.p1&&"number"==typeof this.selected.p2?this.selected:{p1:0,p2:1},p=l[r.p1]||"player1",n=l[r.p2]||"player2";for(let e of(this.player1=this.physics.add.sprite(200,250,p,0),this.player1.setScale(.4),this.player1.setOrigin(.5,1),this.player1.body.setSize(this.player1.displayWidth,this.player1.displayHeight),this.player1.body.setOffset(0,0),this.physics.add.collider(this.player1,i),this.player1.setCollideWorldBounds(!0),this.player1.setBounce(.1),this.player1.health=100,this.player1.facing=1,this.player2=this.physics.add.sprite(600,250,n,0),this.player2.setScale(.4),this.player2.setOrigin(.5,1),this.player2.body.setSize(this.player2.displayWidth,this.player2.displayHeight),this.player2.body.setOffset(0,0),this.physics.add.collider(this.player2,i),this.player2.setCollideWorldBounds(!0),this.player2.setBounce(.1),this.player2.health=100,this.player2.facing=-1,this.player2.setFlipX(!0),this.anims.exists("p1_idle")||this.anims.create({key:"p1_idle",frames:[{key:"player1",frame:0}],frameRate:1,repeat:-1}),this.anims.exists("p1_walk")||this.anims.create({key:"p1_walk",frames:[{key:"player1",frame:1},{key:"player1",frame:2}],frameRate:6,repeat:-1}),this.anims.exists("p1_attack")||this.anims.create({key:"p1_attack",frames:[{key:"player1",frame:4}],frameRate:1,repeat:0,duration:200}),this.anims.exists("p1_special")||this.anims.create({key:"p1_special",frames:[{key:"player1",frame:6}],frameRate:1,repeat:0,duration:900}),this.anims.exists("p1_down")||this.anims.create({key:"p1_down",frames:[{key:"player1",frame:5}],frameRate:1,repeat:-1}),this.anims.exists("p2_idle")||this.anims.create({key:"p2_idle",frames:[{key:"player2",frame:0}],frameRate:1,repeat:-1}),this.anims.exists("p2_walk")||this.anims.create({key:"p2_walk",frames:[{key:"player2",frame:0},{key:"player2",frame:1}],frameRate:6,repeat:-1}),this.anims.exists("p2_attack")||this.anims.create({key:"p2_attack",frames:[{key:"player2",frame:4}],frameRate:1,repeat:0,duration:200}),this.anims.exists("p2_down")||this.anims.create({key:"p2_down",frames:[{key:"player2",frame:5}],frameRate:1,repeat:-1}),this.anims.exists("p2_special")||this.anims.create({key:"p2_special",frames:[{key:"player2",frame:6}],frameRate:1,repeat:0,duration:900}),this.player1.play("p1_idle"),this.player1.angle=0,this.player2.angle=0,this.playerY=t,this.gameOver||this.player2.play("p2_idle"),this.player1._originalY=this.player1.y,this.player2._originalY=this.player2.y,this.physics.add.collider(this.player1,this.floatPlatform),this.physics.add.collider(this.player2,this.floatPlatform),this.cursors=this.input.keyboard.createCursorKeys(),this.keys=this.input.keyboard.addKeys({a:"A",d:"D",w:"W",v:"V",b:"B",n:"N",s:"S",k:"K",l:"L",semicolon:"SEMICOLON"}),["a","d","w","v","b","n","s","k","l","semicolon"]))this.keys[e]||(this.keys[e]={isDown:!1});this.isTouch||window.addEventListener("keydown",function(t){t.key,t.code}),this.healthBar1Border=this.add.rectangle(200,30,204,24,0xffffff).setOrigin(.5),this.healthBar2Border=this.add.rectangle(600,30,204,24,0xffffff).setOrigin(.5),this.healthBar1Border.setStrokeStyle(2,0),this.healthBar2Border.setStrokeStyle(2,0),this.healthBar1=this.add.rectangle(200,30,200,20,0xff4444),this.healthBar2=this.add.rectangle(600,30,200,20,4500223),this.healthBar1.setOrigin(.5),this.healthBar2.setOrigin(.5),this.children.bringToTop(this.healthBar1),this.children.bringToTop(this.healthBar2),this.specialPips1=[];for(let t=0;t<3;t++){let e=this.add.circle(140+30*t,16,10,8947848,.8).setStrokeStyle(2,0).setDepth(10);e.setVisible(!0),this.specialPips1.push(e)}this.specialPips2=[];for(let t=0;t<3;t++){let e=this.add.circle(540+30*t,16,10,8947848,.8).setStrokeStyle(2,0).setDepth(10);e.setVisible(!0),this.specialPips2.push(e)}this.specialPips1.forEach(t=>t.setFillStyle(8947848).setVisible(!0)),this.specialPips2.forEach(t=>t.setFillStyle(8947848).setVisible(!0)),this.specialReady1&&this.specialReady1.setVisible(!1),this.specialReadyText1&&this.specialReadyText1.setVisible(!1),this.specialReady2&&this.specialReady2.setVisible(!1),this.specialReadyText2&&this.specialReadyText2.setVisible(!1),this.specialReady1=this.add.circle(200,60,22,0xffd700,.93).setStrokeStyle(3,0).setDepth(15).setVisible(!1),this.specialReadyText1=this.add.text(200,60,"S",{fontSize:"26px",color:"#000",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(16).setVisible(!1),this.specialReady2=this.add.circle(600,60,22,0xffd700,.93).setStrokeStyle(3,0).setDepth(15).setVisible(!1),this.specialReadyText2=this.add.text(600,60,"S",{fontSize:"26px",color:"#000",fontFamily:"monospace",fontStyle:"bold"}).setOrigin(.5).setDepth(16).setVisible(!1),this.timerText=this.add.text(a/2,50,Math.ceil(this.timeLeft),{fontSize:"32px",color:"#fff",fontFamily:"monospace",align:"center",stroke:"#000",strokeThickness:4}).setOrigin(.5),"function"==typeof o&&o(this.game),this.updateSceneLayout(),this.scale.on("resize",()=>{"function"==typeof applyGameCss&&applyGameCss(),"function"==typeof this.updateSceneLayout&&this.updateSceneLayout()})}update(t,e){if(this.isTouch&&this.touchFlags&&(!this._touchWasDownP1A&&this.touchFlags.p1.attack&&(this._touchJustPressedP1A=!0),this._touchWasDownP1A=this.touchFlags.p1.attack,!this._touchWasDownP1S&&this.touchFlags.p1.special&&(this._touchJustPressedP1S=!0),this._touchWasDownP1S=this.touchFlags.p1.special,!this._touchWasDownP2A&&this.touchFlags.p2.attack&&(this._touchJustPressedP2A=!0),this._touchWasDownP2A=this.touchFlags.p2.attack,!this._touchWasDownP2S&&this.touchFlags.p2.special&&(this._touchJustPressedP2S=!0),this._touchWasDownP2S=this.touchFlags.p2.special,this.keys.a.isDown=this.touchFlags.p1.left,this.keys.d.isDown=this.touchFlags.p1.right,this.keys.w.isDown=this.touchFlags.p1.jump,this.keys.s.isDown=this.touchFlags.p1.down,this.cursors.left.isDown=this.touchFlags.p2.left,this.cursors.right.isDown=this.touchFlags.p2.right,this.cursors.up.isDown=this.touchFlags.p2.jump,this.cursors.down.isDown=this.touchFlags.p2.down),!this.gameOver){("number"!=typeof this.lastTimerUpdate||isNaN(this.lastTimerUpdate))&&(this.lastTimerUpdate=t),("number"!=typeof this.timeLeft||isNaN(this.timeLeft))&&(this.timeLeft=60);let e=Math.floor((t-this.lastTimerUpdate)/1e3);e>0&&(this.timeLeft=Math.max(0,this.timeLeft-e),this.lastTimerUpdate+=1e3*e)}if(this.timerText&&this.timerText.setText(Math.ceil(this.timeLeft)),!this.gameOver&&this.player1&&this.player2){if(this.player1.health<=0)return void this.endGame("Davi R Venceu!");else if(this.player2.health<=0)return void this.endGame("Bento Venceu!")}if(0===this.timeLeft)return void(this.player1.health>this.player2.health?this.endGame("Bento Venceu!"):this.player2.health>this.player1.health?this.endGame("Davi R Venceu!"):this.endGame("Empate!"));if(this.timeLeft<=0&&!this.gameOver)return void this.endGame("Tempo Esgotado! Empate!");let s=!1;if(this.player1&&this.player1.body){let t=this.player1.body;this.lungeTimer[0]>0?this.lungeTimer[0]-=e:(t.setVelocityX(0),this.keys.a.isDown&&(t.setVelocityX(-200),s=!0),this.keys.d.isDown&&(t.setVelocityX(200),s=!0),this.keys.w.isDown&&t.onFloor()&&t.setVelocityY(-400)),"idle"===this.player1State&&s&&t.onFloor()&&!this.gameOver?this.player1.anims.currentAnim?.key!=="p1_walk"&&this.player1.play("p1_walk",!0):"idle"!==this.player1State||this.player1.anims.currentAnim?.key!=="p1_walk"||this.gameOver||this.player1.play("p1_idle",!0)}let a=!1;if(this.player2&&this.player2.body){let t=this.player2.body;this.lungeTimer[1]>0?this.lungeTimer[1]-=e:(t.setVelocityX(0),this.cursors.left.isDown&&(t.setVelocityX(-200),a=!0),this.cursors.right.isDown&&(t.setVelocityX(200),a=!0),this.cursors.up.isDown&&t.onFloor()&&t.setVelocityY(-400)),"idle"===this.player2State&&a&&t.onFloor()&&!this.gameOver?this.player2.anims.currentAnim?.key!=="p2_walk"&&this.player2.play("p2_walk",!0):"idle"!==this.player2State||this.player2.anims.currentAnim?.key!=="p2_walk"||this.gameOver||this.player2.play("p2_idle",!0)}this.gameOver||"attack"===this.player1State||"special"===this.player1State||(this.keys&&(this.keys.n&&this.keys.n.isDown||this.keys.s&&this.keys.s.isDown)?"down"!==this.player1State&&(this.player1.play("p1_down",!0),this.player1State="down"):"idle"!==this.player1State&&(this.player1.play("p1_idle",!0),this.player1State="idle")),this.gameOver||"attack"===this.player2State||"special"===this.player2State||(this.cursors&&this.cursors.down&&this.cursors.down.isDown||this.keys&&this.keys.semicolon&&this.keys.semicolon.isDown?"down"!==this.player2State&&(this.player2.play("p2_down",!0),this.player2.setFlipX(!0),this.player2State="down"):"idle"!==this.player2State&&(this.player2.play("p2_idle",!0),this.player2.setFlipX(!0),this.player2State="idle")),(this.keys&&this.keys.v&&Phaser.Input.Keyboard.JustDown(this.keys.v)||this._touchJustPressedP1A)&&(this._touchJustPressedP1A=!1,"attack"!==this.player1State&&"special"!==this.player1State&&(this.player1.play("p1_attack",!0),this.player1State="attack",this.time.delayedCall(200,()=>{})));let{updateSceneLayout:h,applyGameCss:o,tryAttack:r}=i("bHOzE");l.prototype.updateSceneLayout=function(){return h(this)},l.prototype.endGame=function(t){if(this.gameOver)return;this.gameOver=!0;let e=this.add.text(this.cameras.main.width/2,this.cameras.main.height/2,t,{fontSize:"48px",color:"#fff",fontFamily:"monospace",stroke:"#000",strokeThickness:8,align:"center",backgroundColor:"rgba(0,0,0,0.35)",padding:{left:24,right:24,top:16,bottom:16}}).setOrigin(.5).setDepth(10001);e.setAlpha(0),this.tweens.add({targets:e,alpha:1,duration:400}),this.player1&&this.player1.anims&&this.player1.anims.stop(),this.player2&&this.player2.anims&&this.player2.anims.stop()},parent.style.width="calc(100vw - env(safe-area-inset-left, 0px) - env(safe-area-inset-right, 0px))",parent.style.height="calc(100vh - env(safe-area-inset-top, 0px) - env(safe-area-inset-bottom, 0px))",parent.style.maxWidth="100vw",parent.style.maxHeight="100vh",parent.style.background="#222"}}function o(t){let e=window.innerWidth,s=window.innerHeight;t.scale.resize(e,s),applyGameCss()}l.prototype.updateControlPositions=function(){if(!this.isTouch||!this.touchControls||!this.cameras||!this.cameras.main)return;let t=this.cameras.main,e=t.width,s=t.height;this.touchControls.p1.left.setPosition(.08*e,.85*s),this.touchControls.p1.right.setPosition(.18*e,.85*s),this.touchControls.p1.jump.setPosition(.13*e,.7*s),this.touchControls.p1.down.setPosition(.13*e,.97*s),this.touchControls.p1.attack.setPosition(.28*e,.89*s),this.touchControls.p1.special.setPosition(.36*e,.89*s),this.touchControls.p2.left.setPosition(.82*e,.85*s),this.touchControls.p2.right.setPosition(.92*e,.85*s),this.touchControls.p2.jump.setPosition(.87*e,.7*s),this.touchControls.p2.down.setPosition(.87*e,.97*s),this.touchControls.p2.attack.setPosition(.72*e,.89*s),this.touchControls.p2.special.setPosition(.64*e,.89*s),this.touchLabels&&12===this.touchLabels.length&&(this.touchLabels[0].setPosition(.06*e,.83*s),this.touchLabels[1].setPosition(.16*e,.83*s),this.touchLabels[2].setPosition(.11*e,.68*s),this.touchLabels[3].setPosition(.11*e,.95*s),this.touchLabels[4].setPosition(.25*e,.87*s),this.touchLabels[5].setPosition(.33*e,.87*s),this.touchLabels[6].setPosition(.79*e,.83*s),this.touchLabels[7].setPosition(.89*e,.83*s),this.touchLabels[8].setPosition(.84*e,.68*s),this.touchLabels[9].setPosition(.84*e,.95*s),this.touchLabels[10].setPosition(.69*e,.87*s),this.touchLabels[11].setPosition(.61*e,.87*s))};const r={type:Phaser.AUTO,width:a,height:h,backgroundColor:"#222",parent:"game-container",scene:l,physics:{default:"arcade",arcade:{gravity:{y:900},debug:!1}},scale:{mode:Phaser.Scale.RESIZE,autoCenter:Phaser.Scale.CENTER_BOTH}};window.onload=()=>{r.width=window.innerWidth,r.height=window.innerHeight,r.scale.width=window.innerWidth,r.scale.height=window.innerHeight;let t=new Phaser.Game(r);function e(){o(t),setTimeout(()=>o(t),250)}o(t),window.addEventListener("resize",e),window.addEventListener("orientationchange",e)};
//# sourceMappingURL=kidsfight.a0129ce6.js.map
