{"numFailedTestSuites":40,"numFailedTests":80,"numPassedTestSuites":33,"numPassedTests":304,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":18,"numTodoTests":0,"numTotalTestSuites":73,"numTotalTests":384,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1750397505374,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["KidsFightScene - Special Attack","handleSpecial"],"duration":20,"failureDetails":[{"matcherResult":{"actual":3,"expected":0,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m0\u001b[39m\nReceived: \u001b[31m3\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m0\u001b[39m\nReceived: \u001b[31m3\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_special_attack.test.ts:120:47)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene - Special Attack handleSpecial should consume all special pips when performing a special attack","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should consume all special pips when performing a special attack"},{"ancestorTitles":["KidsFightScene - Special Attack","handleSpecial"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Special Attack handleSpecial should not perform special attack if not enough pips","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should not perform special attack if not enough pips"},{"ancestorTitles":["KidsFightScene - Special Attack","handleSpecial"],"duration":59,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m{\"playerIndex\": 0, \"type\": \"special\"}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m{\"playerIndex\": 0, \"type\": \"special\"}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_special_attack.test.ts:162:34)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene - Special Attack handleSpecial should send special attack message in online mode","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should send special attack message in online mode"},{"ancestorTitles":["KidsFightScene - Special Attack","tryAction with special attack"],"duration":2,"failureDetails":[{}],"failureMessages":["TypeError: scene.tryAction is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_special_attack.test.ts:206:25)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene - Special Attack tryAction with special attack should apply special damage to opponent","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should apply special damage to opponent"},{"ancestorTitles":["KidsFightScene - Special Attack","updateSpecialPips"],"duration":2,"failureDetails":[{}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must be a mock or spy function\n\nReceived has value: \u001b[31mundefined\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_special_attack.test.ts:258:50)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene - Special Attack updateSpecialPips should update special pips UI correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update special pips UI correctly"}],"endTime":1750397507923,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene - Special Attack › handleSpecial › should consume all special pips when performing a special attack\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m0\u001b[39m\n    Received: \u001b[31m3\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 118 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 119 |\u001b[39m       \u001b[90m// Assert - Check initial state\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 120 |\u001b[39m       expect((scene \u001b[36mas\u001b[39m any)\u001b[33m.\u001b[39mplayerSpecial[\u001b[35m0\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Should consume all pips\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 121 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 122 |\u001b[39m       \u001b[90m// Verify the special attack state is set to true during attack\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 123 |\u001b[39m       expect(mockPlayer\u001b[33m.\u001b[39msetData)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'isSpecialAttacking'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_special_attack.test.ts\u001b[39m\u001b[0m\u001b[2m:120:47)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene - Special Attack › handleSpecial › should send special attack message in online mode\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m{\"playerIndex\": 0, \"type\": \"special\"}\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 160 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 161 |\u001b[39m       \u001b[90m// Assert\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 162 |\u001b[39m       expect(mockWsManager\u001b[33m.\u001b[39msend)\u001b[33m.\u001b[39mtoHaveBeenCalledWith({\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 163 |\u001b[39m         type\u001b[33m:\u001b[39m \u001b[32m'special'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 164 |\u001b[39m         playerIndex\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 165 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_special_attack.test.ts\u001b[39m\u001b[0m\u001b[2m:162:34)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene - Special Attack › tryAction with special attack › should apply special damage to opponent\u001b[39m\u001b[22m\n\n    TypeError: scene.tryAction is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 204 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 205 |\u001b[39m       \u001b[90m// Act\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 206 |\u001b[39m       scene[\u001b[32m'tryAction'\u001b[39m](\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'special'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 207 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 208 |\u001b[39m       \u001b[90m// Assert - Verify damage was applied\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 209 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mplayerHealth[\u001b[35m1\u001b[39m])\u001b[33m.\u001b[39mtoBe(initialHealth \u001b[33m-\u001b[39m \u001b[35m10\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_special_attack.test.ts\u001b[39m\u001b[0m\u001b[2m:206:25)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene - Special Attack › updateSpecialPips › should update special pips UI correctly\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    \u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must be a mock or spy function\n\n    Received has value: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 256 |\u001b[39m       \u001b[90m// Should set fillStyle with full opacity for first 2 pips, and 30% for the last one\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 257 |\u001b[39m       \u001b[90m// Check that fillStyle was called appropriately on the pip graphics\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 258 |\u001b[39m       expect(scene[\u001b[32m'specialPips1'\u001b[39m][\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mfillStyle)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0xffe066\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// First pip filled\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 259 |\u001b[39m       expect(scene[\u001b[32m'specialPips1'\u001b[39m][\u001b[35m1\u001b[39m]\u001b[33m.\u001b[39mfillStyle)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0xffe066\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Second pip filled\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 260 |\u001b[39m       expect(scene[\u001b[32m'specialPips1'\u001b[39m][\u001b[35m2\u001b[39m]\u001b[33m.\u001b[39mfillStyle)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0xffffff\u001b[39m\u001b[33m,\u001b[39m \u001b[35m0.3\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Last pip empty\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 261 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_special_attack.test.ts\u001b[39m\u001b[0m\u001b[2m:258:50)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_special_attack.test.ts","startTime":1750397506950,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene - Attack and Health"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Attack and Health should apply normal attack damage of 5","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should apply normal attack damage of 5"},{"ancestorTitles":["KidsFightScene - Attack and Health"],"duration":1,"failureDetails":[{"matcherResult":{"actual":85,"expected":90,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m90\u001b[39m\nReceived: \u001b[31m85\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m90\u001b[39m\nReceived: \u001b[31m85\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_attack.test.ts:132:35)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene - Attack and Health should apply special attack damage of 10","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should apply special attack damage of 10"},{"ancestorTitles":["KidsFightScene - Attack and Health"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Attack and Health should increase attacker special meter on successful attack","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should increase attacker special meter on successful attack"},{"ancestorTitles":["KidsFightScene - Attack and Health"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Attack and Health should cap special meter at 3","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should cap special meter at 3"},{"ancestorTitles":["KidsFightScene - Attack and Health"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Attack and Health should not reset special meter after special attack","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should not reset special meter after special attack"},{"ancestorTitles":["KidsFightScene - Attack and Health"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Attack and Health should sync defender health object with playerHealth array (defender is player1)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should sync defender health object with playerHealth array (defender is player1)"},{"ancestorTitles":["KidsFightScene - Attack and Health"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Attack and Health should sync defender health object with playerHealth array (defender is player2)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should sync defender health object with playerHealth array (defender is player2)"},{"ancestorTitles":["KidsFightScene - Attack and Health"],"duration":175,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Attack and Health should trigger checkWinner after attack","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should trigger checkWinner after attack"},{"ancestorTitles":["KidsFightScene - Attack and Health"],"duration":21,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Attack and Health should not apply damage if game is over","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should not apply damage if game is over"},{"ancestorTitles":["KidsFightScene - Attack and Health"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Attack and Health should handle invalid player indices gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle invalid player indices gracefully"},{"ancestorTitles":["KidsFightScene - Attack and Health"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Attack and Health should create visual effects on attack","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should create visual effects on attack"},{"ancestorTitles":["KidsFightScene - Attack and Health"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Attack and Health should create special visual effects on special attack","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should create special visual effects on special attack"}],"endTime":1750397508282,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene - Attack and Health › should apply special attack damage of 10\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m90\u001b[39m\n    Received: \u001b[31m85\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 130 |\u001b[39m   it(\u001b[32m'should apply special attack damage of 10'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 131 |\u001b[39m     (scene \u001b[36mas\u001b[39m any)\u001b[33m.\u001b[39mtryAttack(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m now\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 132 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayerHealth[\u001b[35m1\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[35m90\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 133 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayers[\u001b[35m1\u001b[39m]\u001b[33m.\u001b[39mhealth)\u001b[33m.\u001b[39mtoBe(\u001b[35m90\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 134 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mupdateHealthBar)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 135 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_attack.test.ts\u001b[39m\u001b[0m\u001b[2m:132:35)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_attack.test.ts","startTime":1750397508029,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Health and Win Conditions","checkWinner"],"duration":20,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m1\u001b[39m, \u001b[32m\"Davi R Venceu!\"\u001b[39m\nReceived: \u001b[2m1\u001b[22m, \u001b[31m\"Player 2 Wins!\"\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m1\u001b[39m, \u001b[32m\"Davi R Venceu!\"\u001b[39m\nReceived: \u001b[2m1\u001b[22m, \u001b[31m\"Player 2 Wins!\"\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/health_win_conditions.test.ts:335:27)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"Health and Win Conditions checkWinner should call endGame when player1 health reaches 0","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should call endGame when player1 health reaches 0"},{"ancestorTitles":["Health and Win Conditions","checkWinner"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Health and Win Conditions checkWinner should call endGame when player2 health reaches 0","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should call endGame when player2 health reaches 0"},{"ancestorTitles":["Health and Win Conditions","checkWinner"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Health and Win Conditions checkWinner should declare player1 as winner when time runs out and player1 has more health","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should declare player1 as winner when time runs out and player1 has more health"},{"ancestorTitles":["Health and Win Conditions","checkWinner"],"duration":5,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m1\u001b[39m, \u001b[32m\"Davi R Venceu!\"\u001b[39m\nReceived: \u001b[2m1\u001b[22m, \u001b[31m\"Player 2 Wins!\"\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m1\u001b[39m, \u001b[32m\"Davi R Venceu!\"\u001b[39m\nReceived: \u001b[2m1\u001b[22m, \u001b[31m\"Player 2 Wins!\"\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/health_win_conditions.test.ts:415:27)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"Health and Win Conditions checkWinner should declare player2 as winner when time runs out and player2 has more health","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should declare player2 as winner when time runs out and player2 has more health"},{"ancestorTitles":["Health and Win Conditions","checkWinner"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Health and Win Conditions checkWinner should declare a draw when time runs out and health is equal","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should declare a draw when time runs out and health is equal"},{"ancestorTitles":["Health and Win Conditions","updateHealthBar"],"duration":321,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nError name:    \u001b[31m\"TypeError\"\u001b[39m\nError message: \u001b[31m\"Cannot read properties of undefined (reading '0')\"\u001b[39m\n\n    \u001b[0m \u001b[90m 749 |\u001b[39m\n     \u001b[90m 750 |\u001b[39m     \u001b[90m// Safety check for missing health value\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 751 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mplayerHealth[playerIndex] \u001b[33m===\u001b[39m undefined) {\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 752 |\u001b[39m       console\u001b[33m.\u001b[39mwarn(\u001b[32m`[KidsFightScene] updateHealthBar: Missing health value for player ${playerIndex}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 753 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mplayerHealth[playerIndex] \u001b[33m=\u001b[39m \u001b[33mMAX_HEALTH\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 754 |\u001b[39m     }\u001b[0m\n\n      \u001b[2mat KidsFightScene.updateHealthBar (\u001b[22mkidsfight_scene.ts\u001b[2m:751:26)\u001b[22m\n      \u001b[2mat KidsFightScene.createHealthBars (\u001b[22mkidsfight_scene.ts\u001b[2m:1219:10)\u001b[22m\n      \u001b[2mat KidsFightScene.updateHealthBar (\u001b[22mkidsfight_scene.ts\u001b[2m:746:12)\u001b[22m\n      \u001b[2mat \u001b[22m__tests__/health_win_conditions.test.ts\u001b[2m:465:35\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22mnode_modules/expect/build/toThrowMatchers.js\u001b[2m:74:11)\u001b[22m\n      \u001b[2mat Object.throwingMatcher [as toThrow] (\u001b[22mnode_modules/expect/build/index.js\u001b[2m:320:21)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22m__tests__/health_win_conditions.test.ts\u001b[2m:465:59)\u001b[22m","pass":true}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nError name:    \u001b[31m\"TypeError\"\u001b[39m\nError message: \u001b[31m\"Cannot read properties of undefined (reading '0')\"\u001b[39m\n\n    \u001b[0m \u001b[90m 749 |\u001b[39m\n     \u001b[90m 750 |\u001b[39m     \u001b[90m// Safety check for missing health value\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 751 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mplayerHealth[playerIndex] \u001b[33m===\u001b[39m undefined) {\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 752 |\u001b[39m       console\u001b[33m.\u001b[39mwarn(\u001b[32m`[KidsFightScene] updateHealthBar: Missing health value for player ${playerIndex}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 753 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mplayerHealth[playerIndex] \u001b[33m=\u001b[39m \u001b[33mMAX_HEALTH\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 754 |\u001b[39m     }\u001b[0m\n\n      \u001b[2mat KidsFightScene.updateHealthBar (\u001b[22mkidsfight_scene.ts\u001b[2m:751:26)\u001b[22m\n      \u001b[2mat KidsFightScene.createHealthBars (\u001b[22mkidsfight_scene.ts\u001b[2m:1219:10)\u001b[22m\n      \u001b[2mat KidsFightScene.updateHealthBar (\u001b[22mkidsfight_scene.ts\u001b[2m:746:12)\u001b[22m\n      \u001b[2mat \u001b[22m__tests__/health_win_conditions.test.ts\u001b[2m:465:35\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22mnode_modules/expect/build/toThrowMatchers.js\u001b[2m:74:11)\u001b[22m\n      \u001b[2mat Object.throwingMatcher [as toThrow] (\u001b[22mnode_modules/expect/build/index.js\u001b[2m:320:21)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22m__tests__/health_win_conditions.test.ts\u001b[2m:465:59)\u001b[22m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/health_win_conditions.test.ts:465:59)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"Health and Win Conditions updateHealthBar should not throw when canvas is not available","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not throw when canvas is not available"}],"endTime":1750397508214,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mHealth and Win Conditions › checkWinner › should call endGame when player1 health reaches 0\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m1\u001b[39m, \u001b[32m\"Davi R Venceu!\"\u001b[39m\n    Received: \u001b[2m1\u001b[22m, \u001b[31m\"Player 2 Wins!\"\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 333 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 334 |\u001b[39m       \u001b[90m// Verify\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 335 |\u001b[39m       expect(mockEndGame)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m1\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Davi R Venceu!'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 336 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 337 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 338 |\u001b[39m     it(\u001b[32m'should call endGame when player2 health reaches 0'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/health_win_conditions.test.ts\u001b[39m\u001b[0m\u001b[2m:335:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mHealth and Win Conditions › checkWinner › should declare player2 as winner when time runs out and player2 has more health\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m1\u001b[39m, \u001b[32m\"Davi R Venceu!\"\u001b[39m\n    Received: \u001b[2m1\u001b[22m, \u001b[31m\"Player 2 Wins!\"\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 413 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 414 |\u001b[39m       \u001b[90m// Verify\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 415 |\u001b[39m       expect(mockEndGame)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m1\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Davi R Venceu!'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 416 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 417 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 418 |\u001b[39m     it(\u001b[32m'should declare a draw when time runs out and health is equal'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/health_win_conditions.test.ts\u001b[39m\u001b[0m\u001b[2m:415:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mHealth and Win Conditions › updateHealthBar › should not throw when canvas is not available\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\n    Error name:    \u001b[31m\"TypeError\"\u001b[39m\n    Error message: \u001b[31m\"Cannot read properties of undefined (reading '0')\"\u001b[39m\n\n        \u001b[0m \u001b[90m 749 |\u001b[39m\n         \u001b[90m 750 |\u001b[39m     \u001b[90m// Safety check for missing health value\u001b[39m\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 751 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mplayerHealth[playerIndex] \u001b[33m===\u001b[39m undefined) {\n         \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 752 |\u001b[39m       console\u001b[33m.\u001b[39mwarn(\u001b[32m`[KidsFightScene] updateHealthBar: Missing health value for player ${playerIndex}`\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m 753 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mplayerHealth[playerIndex] \u001b[33m=\u001b[39m \u001b[33mMAX_HEALTH\u001b[39m\u001b[33m;\u001b[39m\n         \u001b[90m 754 |\u001b[39m     }\u001b[0m\n\n          \u001b[2mat KidsFightScene.updateHealthBar (\u001b[22mkidsfight_scene.ts\u001b[2m:751:26)\u001b[22m\n          \u001b[2mat KidsFightScene.createHealthBars (\u001b[22mkidsfight_scene.ts\u001b[2m:1219:10)\u001b[22m\n          \u001b[2mat KidsFightScene.updateHealthBar (\u001b[22mkidsfight_scene.ts\u001b[2m:746:12)\u001b[22m\n          \u001b[2mat \u001b[22m__tests__/health_win_conditions.test.ts\u001b[2m:465:35\u001b[22m\n          \u001b[2mat Object.<anonymous> (\u001b[22mnode_modules/expect/build/toThrowMatchers.js\u001b[2m:74:11)\u001b[22m\n          \u001b[2mat Object.throwingMatcher [as toThrow] (\u001b[22mnode_modules/expect/build/index.js\u001b[2m:320:21)\u001b[22m\n          \u001b[2mat Object.<anonymous> (\u001b[22m__tests__/health_win_conditions.test.ts\u001b[2m:465:59)\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 463 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 464 |\u001b[39m       \u001b[90m// Execute - should not throw\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 465 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m (scene \u001b[36mas\u001b[39m any)\u001b[33m.\u001b[39mupdateHealthBar(\u001b[35m0\u001b[39m))\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 466 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 467 |\u001b[39m       \u001b[90m// Cleanup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 468 |\u001b[39m       global\u001b[33m.\u001b[39mdocument\u001b[33m.\u001b[39mcreateElement \u001b[33m=\u001b[39m originalCreateElement\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/health_win_conditions.test.ts\u001b[39m\u001b[0m\u001b[2m:465:59)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/health_win_conditions.test.ts","startTime":1750397506974,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene Touch Controls Layout"],"duration":1,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeDefined\u001b[2m()\u001b[22m\n\nReceived: \u001b[31mundefined\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeDefined\u001b[2m()\u001b[22m\n\nReceived: \u001b[31mundefined\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_touch_controls_layout.test.ts:39:51)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Touch Controls Layout creates left/right/jump as D-pad in left bottom corner","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"creates left/right/jump as D-pad in left bottom corner"},{"ancestorTitles":["KidsFightScene Touch Controls Layout"],"duration":4,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeDefined\u001b[2m()\u001b[22m\n\nReceived: \u001b[31mundefined\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeDefined\u001b[2m()\u001b[22m\n\nReceived: \u001b[31mundefined\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_touch_controls_layout.test.ts:47:51)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Touch Controls Layout creates attack, special, block in arc in right bottom corner","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"creates attack, special, block in arc in right bottom corner"},{"ancestorTitles":["KidsFightScene Touch Controls Layout"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Touch Controls Layout uses responsive sizing for buttons","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"uses responsive sizing for buttons"},{"ancestorTitles":["KidsFightScene Touch Controls Layout"],"duration":2,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'color')\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_touch_controls_layout.test.ts:61:29)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Touch Controls Layout sets correct icons and colors for each button","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"sets correct icons and colors for each button"}],"endTime":1750397508360,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Touch Controls Layout › creates left/right/jump as D-pad in left bottom corner\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeDefined\u001b[2m()\u001b[22m\n\n    Received: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 37 |\u001b[39m     scene\u001b[33m.\u001b[39mcreateTouchControls()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 38 |\u001b[39m     \u001b[90m// Check labels (use correct Unicode arrows)\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 39 |\u001b[39m     expect(createdTexts\u001b[33m.\u001b[39mfind(t \u001b[33m=>\u001b[39m t\u001b[33m.\u001b[39mtxt \u001b[33m===\u001b[39m \u001b[32m'◀'\u001b[39m))\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 40 |\u001b[39m     expect(createdTexts\u001b[33m.\u001b[39mfind(t \u001b[33m=>\u001b[39m t\u001b[33m.\u001b[39mtxt \u001b[33m===\u001b[39m \u001b[32m'▶'\u001b[39m))\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m     expect(createdTexts\u001b[33m.\u001b[39mfind(t \u001b[33m=>\u001b[39m t\u001b[33m.\u001b[39mtxt \u001b[33m===\u001b[39m \u001b[32m'⭡'\u001b[39m))\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 42 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_touch_controls_layout.test.ts\u001b[39m\u001b[0m\u001b[2m:39:51)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Touch Controls Layout › creates attack, special, block in arc in right bottom corner\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeDefined\u001b[2m()\u001b[22m\n\n    Received: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 45 |\u001b[39m     scene\u001b[33m.\u001b[39mcreateTouchControls()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 46 |\u001b[39m     \u001b[90m// Check action labels\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 47 |\u001b[39m     expect(createdTexts\u001b[33m.\u001b[39mfind(t \u001b[33m=>\u001b[39m t\u001b[33m.\u001b[39mtxt \u001b[33m===\u001b[39m \u001b[32m'A'\u001b[39m))\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 48 |\u001b[39m     expect(createdTexts\u001b[33m.\u001b[39mfind(t \u001b[33m=>\u001b[39m t\u001b[33m.\u001b[39mtxt \u001b[33m===\u001b[39m \u001b[32m'S'\u001b[39m))\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 49 |\u001b[39m     expect(createdTexts\u001b[33m.\u001b[39mfind(t \u001b[33m=>\u001b[39m t\u001b[33m.\u001b[39mtxt \u001b[33m===\u001b[39m \u001b[32m'B'\u001b[39m))\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 50 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_touch_controls_layout.test.ts\u001b[39m\u001b[0m\u001b[2m:47:51)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Touch Controls Layout › sets correct icons and colors for each button\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'color')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 59 |\u001b[39m     scene\u001b[33m.\u001b[39mcreateTouchControls()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 60 |\u001b[39m     \u001b[90m// D-pad colors\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 61 |\u001b[39m     expect(createdShapes[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mcolor)\u001b[33m.\u001b[39mtoBe(\u001b[35m0x4444ff\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// left\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 62 |\u001b[39m     expect(createdShapes[\u001b[35m1\u001b[39m]\u001b[33m.\u001b[39mcolor)\u001b[33m.\u001b[39mtoBe(\u001b[35m0x4444ff\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// right\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 63 |\u001b[39m     expect(createdShapes[\u001b[35m2\u001b[39m]\u001b[33m.\u001b[39mcolor)\u001b[33m.\u001b[39mtoBe(\u001b[35m0x44ff44\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// jump\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 64 |\u001b[39m     \u001b[90m// Action colors\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_touch_controls_layout.test.ts\u001b[39m\u001b[0m\u001b[2m:61:29)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_touch_controls_layout.test.ts","startTime":1750397508318,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene - Online Mode Action Sending"],"duration":5,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mObjectContaining {\"direction\": -1, \"playerIndex\": 1, \"type\": \"move\"}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mObjectContaining {\"direction\": -1, \"playerIndex\": 1, \"type\": \"move\"}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_online_mode_send_actions.test.ts:48:32)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene - Online Mode Action Sending sends move left with correct playerIndex","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"sends move left with correct playerIndex"},{"ancestorTitles":["KidsFightScene - Online Mode Action Sending"],"duration":2,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mObjectContaining {\"direction\": 1, \"playerIndex\": 1, \"type\": \"move\"}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mObjectContaining {\"direction\": 1, \"playerIndex\": 1, \"type\": \"move\"}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_online_mode_send_actions.test.ts:55:32)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene - Online Mode Action Sending sends move right with correct playerIndex","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"sends move right with correct playerIndex"},{"ancestorTitles":["KidsFightScene - Online Mode Action Sending"],"duration":1,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mObjectContaining {\"playerIndex\": 1, \"type\": \"jump\"}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mObjectContaining {\"playerIndex\": 1, \"type\": \"jump\"}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_online_mode_send_actions.test.ts:62:32)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene - Online Mode Action Sending sends jump with correct playerIndex","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"sends jump with correct playerIndex"},{"ancestorTitles":["KidsFightScene - Online Mode Action Sending"],"duration":139,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mObjectContaining {\"playerIndex\": 1, \"type\": \"attack\"}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mObjectContaining {\"playerIndex\": 1, \"type\": \"attack\"}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_online_mode_send_actions.test.ts:71:32)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene - Online Mode Action Sending sends attack with correct playerIndex","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"sends attack with correct playerIndex"},{"ancestorTitles":["KidsFightScene - Online Mode Action Sending"],"duration":2,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mObjectContaining {\"playerIndex\": 1, \"type\": \"special\"}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mObjectContaining {\"playerIndex\": 1, \"type\": \"special\"}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_online_mode_send_actions.test.ts:80:32)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene - Online Mode Action Sending sends special with correct playerIndex","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"sends special with correct playerIndex"}],"endTime":1750397508375,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene - Online Mode Action Sending › sends move left with correct playerIndex\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mObjectContaining {\"direction\": -1, \"playerIndex\": 1, \"type\": \"move\"}\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 46 |\u001b[39m   it(\u001b[32m'sends move left with correct playerIndex'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 47 |\u001b[39m     scene\u001b[33m.\u001b[39mhandleLeftDown()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 48 |\u001b[39m     expect(wsManagerMock\u001b[33m.\u001b[39msend)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 49 |\u001b[39m       expect\u001b[33m.\u001b[39mobjectContaining({ type\u001b[33m:\u001b[39m \u001b[32m'move'\u001b[39m\u001b[33m,\u001b[39m direction\u001b[33m:\u001b[39m \u001b[33m-\u001b[39m\u001b[35m1\u001b[39m\u001b[33m,\u001b[39m playerIndex\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m })\u001b[22m\n\u001b[2m     \u001b[90m 50 |\u001b[39m     )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 51 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_online_mode_send_actions.test.ts\u001b[39m\u001b[0m\u001b[2m:48:32)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene - Online Mode Action Sending › sends move right with correct playerIndex\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mObjectContaining {\"direction\": 1, \"playerIndex\": 1, \"type\": \"move\"}\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 53 |\u001b[39m   it(\u001b[32m'sends move right with correct playerIndex'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 54 |\u001b[39m     scene\u001b[33m.\u001b[39mhandleRightDown()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 55 |\u001b[39m     expect(wsManagerMock\u001b[33m.\u001b[39msend)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 56 |\u001b[39m       expect\u001b[33m.\u001b[39mobjectContaining({ type\u001b[33m:\u001b[39m \u001b[32m'move'\u001b[39m\u001b[33m,\u001b[39m direction\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m playerIndex\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m })\u001b[22m\n\u001b[2m     \u001b[90m 57 |\u001b[39m     )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 58 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_online_mode_send_actions.test.ts\u001b[39m\u001b[0m\u001b[2m:55:32)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene - Online Mode Action Sending › sends jump with correct playerIndex\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mObjectContaining {\"playerIndex\": 1, \"type\": \"jump\"}\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 60 |\u001b[39m   it(\u001b[32m'sends jump with correct playerIndex'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 61 |\u001b[39m     scene\u001b[33m.\u001b[39mhandleJumpDown()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 62 |\u001b[39m     expect(wsManagerMock\u001b[33m.\u001b[39msend)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 63 |\u001b[39m       expect\u001b[33m.\u001b[39mobjectContaining({ type\u001b[33m:\u001b[39m \u001b[32m'jump'\u001b[39m\u001b[33m,\u001b[39m playerIndex\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m })\u001b[22m\n\u001b[2m     \u001b[90m 64 |\u001b[39m     )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 65 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_online_mode_send_actions.test.ts\u001b[39m\u001b[0m\u001b[2m:62:32)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene - Online Mode Action Sending › sends attack with correct playerIndex\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mObjectContaining {\"playerIndex\": 1, \"type\": \"attack\"}\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 69 |\u001b[39m     wsManagerMock\u001b[33m.\u001b[39msend \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 70 |\u001b[39m     scene\u001b[33m.\u001b[39mhandleAttack()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 71 |\u001b[39m     expect(wsManagerMock\u001b[33m.\u001b[39msend)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m       expect\u001b[33m.\u001b[39mobjectContaining({ type\u001b[33m:\u001b[39m \u001b[32m'attack'\u001b[39m\u001b[33m,\u001b[39m playerIndex\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m })\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m     )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 74 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_online_mode_send_actions.test.ts\u001b[39m\u001b[0m\u001b[2m:71:32)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene - Online Mode Action Sending › sends special with correct playerIndex\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mObjectContaining {\"playerIndex\": 1, \"type\": \"special\"}\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 78 |\u001b[39m     wsManagerMock\u001b[33m.\u001b[39msend \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 79 |\u001b[39m     scene\u001b[33m.\u001b[39mhandleSpecial()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 80 |\u001b[39m     expect(wsManagerMock\u001b[33m.\u001b[39msend)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 81 |\u001b[39m       expect\u001b[33m.\u001b[39mobjectContaining({ type\u001b[33m:\u001b[39m \u001b[32m'special'\u001b[39m\u001b[33m,\u001b[39m playerIndex\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m })\u001b[22m\n\u001b[2m     \u001b[90m 82 |\u001b[39m     )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 83 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_online_mode_send_actions.test.ts\u001b[39m\u001b[0m\u001b[2m:80:32)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_online_mode_send_actions.test.ts","startTime":1750397507045,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene - Damage Calculation"],"duration":124,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Damage Calculation should decrease defender health by ATTACK_DAMAGE (10) on normal attack","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should decrease defender health by ATTACK_DAMAGE (10) on normal attack"},{"ancestorTitles":["KidsFightScene - Damage Calculation"],"duration":2,"failureDetails":[{}],"failureMessages":["TypeError: this.add.circle is not a function\n    at KidsFightScene.createSpecialAttackEffect (/Users/ivan/projects/kidsfight/kidsfight_scene.ts:523:29)\n    at KidsFightScene.tryAttack (/Users/ivan/projects/kidsfight/kidsfight_scene.ts:1330:12)\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/damage_calculation.test.ts:46:11)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene - Damage Calculation should decrease defender health by SPECIAL_DAMAGE (20) on special attack","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should decrease defender health by SPECIAL_DAMAGE (20) on special attack"},{"ancestorTitles":["KidsFightScene - Damage Calculation"],"duration":21,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Damage Calculation should take exactly 20 normal attacks to defeat an opponent","invocations":1,"location":null,"numPassingAsserts":61,"retryReasons":[],"status":"passed","title":"should take exactly 20 normal attacks to defeat an opponent"},{"ancestorTitles":["KidsFightScene - Damage Calculation"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: this.add.circle is not a function\n    at KidsFightScene.createSpecialAttackEffect (/Users/ivan/projects/kidsfight/kidsfight_scene.ts:523:29)\n    at KidsFightScene.tryAttack (/Users/ivan/projects/kidsfight/kidsfight_scene.ts:1330:12)\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/damage_calculation.test.ts:87:13)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene - Damage Calculation should take exactly 10 special attacks to defeat an opponent","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should take exactly 10 special attacks to defeat an opponent"},{"ancestorTitles":["KidsFightScene - Damage Calculation"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Damage Calculation should sync player object health with playerHealth array","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should sync player object health with playerHealth array"},{"ancestorTitles":["KidsFightScene - Damage Calculation"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Damage Calculation should never allow health to go below zero","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should never allow health to go below zero"},{"ancestorTitles":["KidsFightScene - Damage Calculation"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Damage Calculation should enforce a hard cap on damage values","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should enforce a hard cap on damage values"}],"endTime":1750397508388,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene - Damage Calculation › should decrease defender health by SPECIAL_DAMAGE (20) on special attack\u001b[39m\u001b[22m\n\n    TypeError: this.add.circle is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 521 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mattacker) \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 522 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 523 |\u001b[39m     \u001b[36mconst\u001b[39m effect \u001b[33m=\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39madd\u001b[33m.\u001b[39mcircle(attacker\u001b[33m.\u001b[39mx\u001b[33m,\u001b[39m attacker\u001b[33m.\u001b[39my \u001b[33m-\u001b[39m \u001b[35m50\u001b[39m\u001b[33m,\u001b[39m \u001b[35m30\u001b[39m\u001b[33m,\u001b[39m \u001b[35m0x00ffff\u001b[39m\u001b[33m,\u001b[39m \u001b[35m0.5\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 524 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mtweens\u001b[33m.\u001b[39madd({\u001b[22m\n\u001b[2m     \u001b[90m 525 |\u001b[39m       targets\u001b[33m:\u001b[39m effect\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 526 |\u001b[39m       scaleX\u001b[33m:\u001b[39m \u001b[35m3\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat KidsFightScene.createSpecialAttackEffect (\u001b[22m\u001b[2mkidsfight_scene.ts\u001b[2m:523:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat KidsFightScene.tryAttack (\u001b[22m\u001b[2mkidsfight_scene.ts\u001b[2m:1330:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/damage_calculation.test.ts\u001b[39m\u001b[0m\u001b[2m:46:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene - Damage Calculation › should take exactly 10 special attacks to defeat an opponent\u001b[39m\u001b[22m\n\n    TypeError: this.add.circle is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 521 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mattacker) \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 522 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 523 |\u001b[39m     \u001b[36mconst\u001b[39m effect \u001b[33m=\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39madd\u001b[33m.\u001b[39mcircle(attacker\u001b[33m.\u001b[39mx\u001b[33m,\u001b[39m attacker\u001b[33m.\u001b[39my \u001b[33m-\u001b[39m \u001b[35m50\u001b[39m\u001b[33m,\u001b[39m \u001b[35m30\u001b[39m\u001b[33m,\u001b[39m \u001b[35m0x00ffff\u001b[39m\u001b[33m,\u001b[39m \u001b[35m0.5\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 524 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mtweens\u001b[33m.\u001b[39madd({\u001b[22m\n\u001b[2m     \u001b[90m 525 |\u001b[39m       targets\u001b[33m:\u001b[39m effect\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 526 |\u001b[39m       scaleX\u001b[33m:\u001b[39m \u001b[35m3\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat KidsFightScene.createSpecialAttackEffect (\u001b[22m\u001b[2mkidsfight_scene.ts\u001b[2m:523:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat KidsFightScene.tryAttack (\u001b[22m\u001b[2mkidsfight_scene.ts\u001b[2m:1330:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/damage_calculation.test.ts\u001b[39m\u001b[0m\u001b[2m:87:13)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/damage_calculation.test.ts","startTime":1750397507057,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Block Functionality"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Block Functionality blocking reduces damage by 50%","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"blocking reduces damage by 50%"},{"ancestorTitles":["Block Functionality"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: scene.updatePlayerAnimation is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/block_functionality.test.ts:177:11)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"Block Functionality blocking animation is displayed when player is blocking","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"blocking animation is displayed when player is blocking"},{"ancestorTitles":["Block Functionality"],"duration":2,"failureDetails":[{"matcherResult":{"actual":false,"expected":true,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/block_functionality.test.ts:194:37)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"Block Functionality block button correctly sets player blocking state","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"block button correctly sets player blocking state"},{"ancestorTitles":["Block Functionality","defensive frame fallback"],"duration":6,"failureDetails":[{}],"failureMessages":["TypeError: scene.updatePlayerAnimation is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/block_functionality.test.ts:226:13)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"Block Functionality defensive frame fallback should fallback to last frame if not enough frames for block","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should fallback to last frame if not enough frames for block"}],"endTime":1750397508437,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mBlock Functionality › blocking animation is displayed when player is blocking\u001b[39m\u001b[22m\n\n    TypeError: scene.updatePlayerAnimation is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 175 |\u001b[39m     scene\u001b[33m.\u001b[39mplayerBlocking[\u001b[35m0\u001b[39m] \u001b[33m=\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 176 |\u001b[39m     scene\u001b[33m.\u001b[39mplayers[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39misBlocking \u001b[33m=\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m;\u001b[39m \u001b[90m// Ensure property is set for updatePlayerAnimation\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 177 |\u001b[39m     scene\u001b[33m.\u001b[39mupdatePlayerAnimation(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 178 |\u001b[39m     \u001b[90m// Check if special scaling for blocking was applied (0.9, 1.0)\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 179 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayers[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39msetScale)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0.9\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1.0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 180 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/block_functionality.test.ts\u001b[39m\u001b[0m\u001b[2m:177:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mBlock Functionality › block button correctly sets player blocking state\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32mtrue\u001b[39m\n    Received: \u001b[31mfalse\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 192 |\u001b[39m     \u001b[22m\n\u001b[2m     \u001b[90m 193 |\u001b[39m     \u001b[90m// Check if the blocking state was set correctly\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 194 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayerBlocking[\u001b[35m0\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 195 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayers[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39msetData)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'isBlocking'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 196 |\u001b[39m     \u001b[22m\n\u001b[2m     \u001b[90m 197 |\u001b[39m     \u001b[90m// Create mock action for block button release\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/block_functionality.test.ts\u001b[39m\u001b[0m\u001b[2m:194:37)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mBlock Functionality › defensive frame fallback › should fallback to last frame if not enough frames for block\u001b[39m\u001b[22m\n\n    TypeError: scene.updatePlayerAnimation is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 224 |\u001b[39m         }\u001b[22m\n\u001b[2m     \u001b[90m 225 |\u001b[39m       ]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 226 |\u001b[39m       scene\u001b[33m.\u001b[39mupdatePlayerAnimation(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 227 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mplayers[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39msetFrame)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// fallback to last frame\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 228 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 229 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/block_functionality.test.ts\u001b[39m\u001b[0m\u001b[2m:226:13)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/block_functionality.test.ts","startTime":1750397508402,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene Online Position Sync"],"duration":2,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mObjectContaining {\"flipX\": false, \"frame\": 0, \"playerIndex\": 0, \"type\": \"position_update\", \"velocityX\": 0, \"velocityY\": 0, \"x\": 100, \"y\": 200}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mObjectContaining {\"flipX\": false, \"frame\": 0, \"playerIndex\": 0, \"type\": \"position_update\", \"velocityX\": 0, \"velocityY\": 0, \"x\": 100, \"y\": 200}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_online_sync_position_update.test.ts:42:21)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Online Position Sync sends position_update immediately on handleLeftUp","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"sends position_update immediately on handleLeftUp"},{"ancestorTitles":["KidsFightScene Online Position Sync"],"duration":0,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mObjectContaining {\"flipX\": false, \"frame\": 0, \"playerIndex\": 0, \"type\": \"position_update\", \"velocityX\": 0, \"velocityY\": 0, \"x\": 100, \"y\": 200}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mObjectContaining {\"flipX\": false, \"frame\": 0, \"playerIndex\": 0, \"type\": \"position_update\", \"velocityX\": 0, \"velocityY\": 0, \"x\": 100, \"y\": 200}\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_online_sync_position_update.test.ts:58:21)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Online Position Sync sends position_update immediately on handleRightUp","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"sends position_update immediately on handleRightUp"},{"ancestorTitles":["KidsFightScene Online Position Sync"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Online Position Sync does not send position_update if not in online mode","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"does not send position_update if not in online mode"},{"ancestorTitles":["KidsFightScene Online Position Sync"],"duration":1,"failureDetails":[{"matcherResult":{"actual":0,"expected":500,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m500\u001b[39m\nReceived: \u001b[31m0\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m500\u001b[39m\nReceived: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_online_sync_position_update.test.ts:101:28)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Online Position Sync processes position_update actions in message handler","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"processes position_update actions in message handler"},{"ancestorTitles":["KidsFightScene Online Position Sync"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Online Position Sync position_update is not ignored in message dispatch","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"position_update is not ignored in message dispatch"}],"endTime":1750397508458,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Online Position Sync › sends position_update immediately on handleLeftUp\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mObjectContaining {\"flipX\": false, \"frame\": 0, \"playerIndex\": 0, \"type\": \"position_update\", \"velocityX\": 0, \"velocityY\": 0, \"x\": 100, \"y\": 200}\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 40 |\u001b[39m     playerMock\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mvelocity\u001b[33m.\u001b[39my \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m     scene\u001b[33m.\u001b[39mhandleLeftUp()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 42 |\u001b[39m     expect(sendSpy)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39mobjectContaining({\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 43 |\u001b[39m       type\u001b[33m:\u001b[39m \u001b[32m'position_update'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 44 |\u001b[39m       playerIndex\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 45 |\u001b[39m       x\u001b[33m:\u001b[39m \u001b[35m100\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_online_sync_position_update.test.ts\u001b[39m\u001b[0m\u001b[2m:42:21)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Online Position Sync › sends position_update immediately on handleRightUp\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mObjectContaining {\"flipX\": false, \"frame\": 0, \"playerIndex\": 0, \"type\": \"position_update\", \"velocityX\": 0, \"velocityY\": 0, \"x\": 100, \"y\": 200}\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 56 |\u001b[39m     playerMock\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mvelocity\u001b[33m.\u001b[39my \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 57 |\u001b[39m     scene\u001b[33m.\u001b[39mhandleRightUp()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 58 |\u001b[39m     expect(sendSpy)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39mobjectContaining({\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 59 |\u001b[39m       type\u001b[33m:\u001b[39m \u001b[32m'position_update'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 60 |\u001b[39m       playerIndex\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 61 |\u001b[39m       x\u001b[33m:\u001b[39m \u001b[35m100\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_online_sync_position_update.test.ts\u001b[39m\u001b[0m\u001b[2m:58:21)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Online Position Sync › processes position_update actions in message handler\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m500\u001b[39m\n    Received: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m  99 |\u001b[39m     }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 100 |\u001b[39m     scene\u001b[33m.\u001b[39mhandleRemoteAction(action)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 101 |\u001b[39m     expect(remotePlayer\u001b[33m.\u001b[39mx)\u001b[33m.\u001b[39mtoBe(\u001b[35m500\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 102 |\u001b[39m     expect(remotePlayer\u001b[33m.\u001b[39my)\u001b[33m.\u001b[39mtoBe(\u001b[35m300\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 103 |\u001b[39m     expect(remotePlayer\u001b[33m.\u001b[39msetVelocityX)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 104 |\u001b[39m     expect(remotePlayer\u001b[33m.\u001b[39msetVelocityY)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_online_sync_position_update.test.ts\u001b[39m\u001b[0m\u001b[2m:101:28)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_online_sync_position_update.test.ts","startTime":1750397508398,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene Comprehensive","Special Attack Logic"],"duration":12,"failureDetails":[{}],"failureMessages":["TypeError: scene.tryAction is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_comprehensive.test.ts:42:13)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Comprehensive Special Attack Logic does not allow special attack with <3 pips","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"does not allow special attack with <3 pips"},{"ancestorTitles":["KidsFightScene Comprehensive","Special Attack Logic"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: scene.tryAction is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_comprehensive.test.ts:52:13)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Comprehensive Special Attack Logic consumes all pips and updates UI on special","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"consumes all pips and updates UI on special"},{"ancestorTitles":["KidsFightScene Comprehensive","Special Attack Logic"],"duration":17,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nError name:    \u001b[31m\"TypeError\"\u001b[39m\nError message: \u001b[31m\"scene.tryAction is not a function\"\u001b[39m\n\n    \u001b[0m \u001b[90m 57 |\u001b[39m     it(\u001b[32m'does not throw if players missing'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 58 |\u001b[39m       scene\u001b[33m.\u001b[39mplayers \u001b[33m=\u001b[39m [\u001b[36mnull\u001b[39m\u001b[33m,\u001b[39m \u001b[36mnull\u001b[39m]\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 59 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m scene\u001b[33m.\u001b[39mtryAction(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'special'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m))\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 60 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 61 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 62 |\u001b[39m\u001b[0m\n\n      \u001b[2mat \u001b[22m__tests__/kidsfight_scene_comprehensive.test.ts\u001b[2m:59:26\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22mnode_modules/expect/build/toThrowMatchers.js\u001b[2m:74:11)\u001b[22m\n      \u001b[2mat Object.throwingMatcher [as toThrow] (\u001b[22mnode_modules/expect/build/index.js\u001b[2m:320:21)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22m__tests__/kidsfight_scene_comprehensive.test.ts\u001b[2m:59:61)\u001b[22m","pass":true}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nError name:    \u001b[31m\"TypeError\"\u001b[39m\nError message: \u001b[31m\"scene.tryAction is not a function\"\u001b[39m\n\n    \u001b[0m \u001b[90m 57 |\u001b[39m     it(\u001b[32m'does not throw if players missing'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 58 |\u001b[39m       scene\u001b[33m.\u001b[39mplayers \u001b[33m=\u001b[39m [\u001b[36mnull\u001b[39m\u001b[33m,\u001b[39m \u001b[36mnull\u001b[39m]\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 59 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m scene\u001b[33m.\u001b[39mtryAction(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'special'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m))\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 60 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 61 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 62 |\u001b[39m\u001b[0m\n\n      \u001b[2mat \u001b[22m__tests__/kidsfight_scene_comprehensive.test.ts\u001b[2m:59:26\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22mnode_modules/expect/build/toThrowMatchers.js\u001b[2m:74:11)\u001b[22m\n      \u001b[2mat Object.throwingMatcher [as toThrow] (\u001b[22mnode_modules/expect/build/index.js\u001b[2m:320:21)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22m__tests__/kidsfight_scene_comprehensive.test.ts\u001b[2m:59:61)\u001b[22m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_comprehensive.test.ts:59:61)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Comprehensive Special Attack Logic does not throw if players missing","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"does not throw if players missing"},{"ancestorTitles":["KidsFightScene Comprehensive","Attack Damage and Health"],"duration":2,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m0\u001b[39m\nReceived: \u001b[31m1\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m0\u001b[39m\nReceived: \u001b[31m1\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_comprehensive.test.ts:77:37)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Comprehensive Attack Damage and Health applies correct normal attack damage and caps health","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"failed","title":"applies correct normal attack damage and caps health"},{"ancestorTitles":["KidsFightScene Comprehensive","Attack Damage and Health"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: this.add.circle is not a function\n    at KidsFightScene.createSpecialAttackEffect (/Users/ivan/projects/kidsfight/kidsfight_scene.ts:523:29)\n    at KidsFightScene.tryAttack (/Users/ivan/projects/kidsfight/kidsfight_scene.ts:1330:12)\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_comprehensive.test.ts:87:13)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Comprehensive Attack Damage and Health applies correct special attack damage and caps health","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"applies correct special attack damage and caps health"},{"ancestorTitles":["KidsFightScene Comprehensive","Attack Damage and Health"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: scene.tryAction is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_comprehensive.test.ts:110:25)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Comprehensive Attack Damage and Health does not apply negative or excessive damage","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"does not apply negative or excessive damage"},{"ancestorTitles":["KidsFightScene Comprehensive","UI and State Feedback"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Comprehensive UI and State Feedback updates player health after an attack","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"updates player health after an attack"},{"ancestorTitles":["KidsFightScene Comprehensive","Touch Controls"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: scene.updateTouchControlState is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_comprehensive.test.ts:154:13)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Comprehensive Touch Controls calls handleAttack and handleSpecial from updateTouchControlState","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"calls handleAttack and handleSpecial from updateTouchControlState"},{"ancestorTitles":["KidsFightScene Comprehensive","Error Handling"],"duration":5,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nError name:    \u001b[31m\"TypeError\"\u001b[39m\nError message: \u001b[31m\"scene.tryAction is not a function\"\u001b[39m\n\n    \u001b[0m \u001b[90m 162 |\u001b[39m     it(\u001b[32m'does not throw on invalid actions'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 163 |\u001b[39m       scene\u001b[33m.\u001b[39mplayers \u001b[33m=\u001b[39m [\u001b[36mnull\u001b[39m\u001b[33m,\u001b[39m \u001b[36mnull\u001b[39m]\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 164 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m scene\u001b[33m.\u001b[39mtryAction(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'attack'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m))\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 165 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m scene\u001b[33m.\u001b[39mtryAttack(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m now\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m))\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 166 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 167 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      \u001b[2mat \u001b[22m__tests__/kidsfight_scene_comprehensive.test.ts\u001b[2m:164:26\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22mnode_modules/expect/build/toThrowMatchers.js\u001b[2m:74:11)\u001b[22m\n      \u001b[2mat Object.throwingMatcher [as toThrow] (\u001b[22mnode_modules/expect/build/index.js\u001b[2m:320:21)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22m__tests__/kidsfight_scene_comprehensive.test.ts\u001b[2m:164:61)\u001b[22m","pass":true}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nError name:    \u001b[31m\"TypeError\"\u001b[39m\nError message: \u001b[31m\"scene.tryAction is not a function\"\u001b[39m\n\n    \u001b[0m \u001b[90m 162 |\u001b[39m     it(\u001b[32m'does not throw on invalid actions'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 163 |\u001b[39m       scene\u001b[33m.\u001b[39mplayers \u001b[33m=\u001b[39m [\u001b[36mnull\u001b[39m\u001b[33m,\u001b[39m \u001b[36mnull\u001b[39m]\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 164 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m scene\u001b[33m.\u001b[39mtryAction(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'attack'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m))\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 165 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m scene\u001b[33m.\u001b[39mtryAttack(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m now\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m))\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 166 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 167 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      \u001b[2mat \u001b[22m__tests__/kidsfight_scene_comprehensive.test.ts\u001b[2m:164:26\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22mnode_modules/expect/build/toThrowMatchers.js\u001b[2m:74:11)\u001b[22m\n      \u001b[2mat Object.throwingMatcher [as toThrow] (\u001b[22mnode_modules/expect/build/index.js\u001b[2m:320:21)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22m__tests__/kidsfight_scene_comprehensive.test.ts\u001b[2m:164:61)\u001b[22m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_comprehensive.test.ts:164:61)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Comprehensive Error Handling does not throw on invalid actions","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"does not throw on invalid actions"}],"endTime":1750397508466,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Comprehensive › Special Attack Logic › does not allow special attack with <3 pips\u001b[39m\u001b[22m\n\n    TypeError: scene.tryAction is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 40 |\u001b[39m   \u001b[36mreturn\u001b[39m \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mgetPrototypeOf(scene)\u001b[33m.\u001b[39mtryAttack\u001b[33m.\u001b[39mapply(\u001b[36mthis\u001b[39m\u001b[33m,\u001b[39m args)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 42 |\u001b[39m       scene\u001b[33m.\u001b[39mtryAction(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'special'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 43 |\u001b[39m       expect(spy)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 44 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mplayerSpecial[\u001b[35m0\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 45 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_comprehensive.test.ts\u001b[39m\u001b[0m\u001b[2m:42:13)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Comprehensive › Special Attack Logic › consumes all pips and updates UI on special\u001b[39m\u001b[22m\n\n    TypeError: scene.tryAction is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 50 |\u001b[39m   \u001b[36mreturn\u001b[39m \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mgetPrototypeOf(scene)\u001b[33m.\u001b[39mtryAttack\u001b[33m.\u001b[39mapply(\u001b[36mthis\u001b[39m\u001b[33m,\u001b[39m args)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 51 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 52 |\u001b[39m       scene\u001b[33m.\u001b[39mtryAction(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'special'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 53 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mplayerSpecial[\u001b[35m0\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 54 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mupdateSpecialPips)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 55 |\u001b[39m       expect(spy)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mNumber\u001b[39m)\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_comprehensive.test.ts\u001b[39m\u001b[0m\u001b[2m:52:13)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Comprehensive › Special Attack Logic › does not throw if players missing\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\n    Error name:    \u001b[31m\"TypeError\"\u001b[39m\n    Error message: \u001b[31m\"scene.tryAction is not a function\"\u001b[39m\n\n        \u001b[0m \u001b[90m 57 |\u001b[39m     it(\u001b[32m'does not throw if players missing'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n         \u001b[90m 58 |\u001b[39m       scene\u001b[33m.\u001b[39mplayers \u001b[33m=\u001b[39m [\u001b[36mnull\u001b[39m\u001b[33m,\u001b[39m \u001b[36mnull\u001b[39m]\u001b[33m;\u001b[39m\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 59 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m scene\u001b[33m.\u001b[39mtryAction(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'special'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m))\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 60 |\u001b[39m     })\u001b[33m;\u001b[39m\n         \u001b[90m 61 |\u001b[39m   })\u001b[33m;\u001b[39m\n         \u001b[90m 62 |\u001b[39m\u001b[0m\n\n          \u001b[2mat \u001b[22m__tests__/kidsfight_scene_comprehensive.test.ts\u001b[2m:59:26\u001b[22m\n          \u001b[2mat Object.<anonymous> (\u001b[22mnode_modules/expect/build/toThrowMatchers.js\u001b[2m:74:11)\u001b[22m\n          \u001b[2mat Object.throwingMatcher [as toThrow] (\u001b[22mnode_modules/expect/build/index.js\u001b[2m:320:21)\u001b[22m\n          \u001b[2mat Object.<anonymous> (\u001b[22m__tests__/kidsfight_scene_comprehensive.test.ts\u001b[2m:59:61)\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 57 |\u001b[39m     it(\u001b[32m'does not throw if players missing'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 58 |\u001b[39m       scene\u001b[33m.\u001b[39mplayers \u001b[33m=\u001b[39m [\u001b[36mnull\u001b[39m\u001b[33m,\u001b[39m \u001b[36mnull\u001b[39m]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 59 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m scene\u001b[33m.\u001b[39mtryAction(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'special'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m))\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 60 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 61 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 62 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_comprehensive.test.ts\u001b[39m\u001b[0m\u001b[2m:59:61)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Comprehensive › Attack Damage and Health › applies correct normal attack damage and caps health\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m0\u001b[39m\n    Received: \u001b[31m1\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 75 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 76 |\u001b[39m       \u001b[90m// Verify UI updates were called\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 77 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mupdateHealthBar)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 78 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mupdateHealthBar)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 79 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 80 |\u001b[39m     \u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_comprehensive.test.ts\u001b[39m\u001b[0m\u001b[2m:77:37)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Comprehensive › Attack Damage and Health › applies correct special attack damage and caps health\u001b[39m\u001b[22m\n\n    TypeError: this.add.circle is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 521 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mattacker) \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 522 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 523 |\u001b[39m     \u001b[36mconst\u001b[39m effect \u001b[33m=\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39madd\u001b[33m.\u001b[39mcircle(attacker\u001b[33m.\u001b[39mx\u001b[33m,\u001b[39m attacker\u001b[33m.\u001b[39my \u001b[33m-\u001b[39m \u001b[35m50\u001b[39m\u001b[33m,\u001b[39m \u001b[35m30\u001b[39m\u001b[33m,\u001b[39m \u001b[35m0x00ffff\u001b[39m\u001b[33m,\u001b[39m \u001b[35m0.5\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 524 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mtweens\u001b[33m.\u001b[39madd({\u001b[22m\n\u001b[2m     \u001b[90m 525 |\u001b[39m       targets\u001b[33m:\u001b[39m effect\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 526 |\u001b[39m       scaleX\u001b[33m:\u001b[39m \u001b[35m3\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat KidsFightScene.createSpecialAttackEffect (\u001b[22m\u001b[2mkidsfight_scene.ts\u001b[2m:523:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat KidsFightScene.tryAttack (\u001b[22m\u001b[2mkidsfight_scene.ts\u001b[2m:1330:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_comprehensive.test.ts\u001b[39m\u001b[0m\u001b[2m:87:13)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Comprehensive › Attack Damage and Health › does not apply negative or excessive damage\u001b[39m\u001b[22m\n\n    TypeError: scene.tryAction is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 108 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 109 |\u001b[39m       \u001b[90m// Test normal attack (5 damage)\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 110 |\u001b[39m       scene[\u001b[32m'tryAction'\u001b[39m](\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'attack'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 111 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mplayerHealth[\u001b[35m1\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[35m95\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 100 - 5 (ATTACK_DAMAGE)\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 112 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 113 |\u001b[39m       \u001b[90m// Update time to account for cooldown\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_comprehensive.test.ts\u001b[39m\u001b[0m\u001b[2m:110:25)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Comprehensive › Touch Controls › calls handleAttack and handleSpecial from updateTouchControlState\u001b[39m\u001b[22m\n\n    TypeError: scene.updateTouchControlState is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 152 |\u001b[39m       scene\u001b[33m.\u001b[39mhandleAttack \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 153 |\u001b[39m       scene\u001b[33m.\u001b[39mhandleSpecial \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 154 |\u001b[39m       scene\u001b[33m.\u001b[39mupdateTouchControlState(\u001b[32m'attack'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 155 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mhandleAttack)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 156 |\u001b[39m       scene\u001b[33m.\u001b[39mupdateTouchControlState(\u001b[32m'special'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 157 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mhandleSpecial)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_comprehensive.test.ts\u001b[39m\u001b[0m\u001b[2m:154:13)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Comprehensive › Error Handling › does not throw on invalid actions\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\n    Error name:    \u001b[31m\"TypeError\"\u001b[39m\n    Error message: \u001b[31m\"scene.tryAction is not a function\"\u001b[39m\n\n        \u001b[0m \u001b[90m 162 |\u001b[39m     it(\u001b[32m'does not throw on invalid actions'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n         \u001b[90m 163 |\u001b[39m       scene\u001b[33m.\u001b[39mplayers \u001b[33m=\u001b[39m [\u001b[36mnull\u001b[39m\u001b[33m,\u001b[39m \u001b[36mnull\u001b[39m]\u001b[33m;\u001b[39m\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 164 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m scene\u001b[33m.\u001b[39mtryAction(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'attack'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m))\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 165 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m scene\u001b[33m.\u001b[39mtryAttack(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m now\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m))\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n         \u001b[90m 166 |\u001b[39m     })\u001b[33m;\u001b[39m\n         \u001b[90m 167 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n          \u001b[2mat \u001b[22m__tests__/kidsfight_scene_comprehensive.test.ts\u001b[2m:164:26\u001b[22m\n          \u001b[2mat Object.<anonymous> (\u001b[22mnode_modules/expect/build/toThrowMatchers.js\u001b[2m:74:11)\u001b[22m\n          \u001b[2mat Object.throwingMatcher [as toThrow] (\u001b[22mnode_modules/expect/build/index.js\u001b[2m:320:21)\u001b[22m\n          \u001b[2mat Object.<anonymous> (\u001b[22m__tests__/kidsfight_scene_comprehensive.test.ts\u001b[2m:164:61)\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 162 |\u001b[39m     it(\u001b[32m'does not throw on invalid actions'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 163 |\u001b[39m       scene\u001b[33m.\u001b[39mplayers \u001b[33m=\u001b[39m [\u001b[36mnull\u001b[39m\u001b[33m,\u001b[39m \u001b[36mnull\u001b[39m]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 164 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m scene\u001b[33m.\u001b[39mtryAction(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'attack'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m))\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 165 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m scene\u001b[33m.\u001b[39mtryAttack(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m now\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m))\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 166 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 167 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_comprehensive.test.ts\u001b[39m\u001b[0m\u001b[2m:164:61)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_comprehensive.test.ts","startTime":1750397507071,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene player scale"],"duration":6,"failureDetails":[{}],"failureMessages":["TypeError: scene.updatePlayerAnimation is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_player_scale.test.ts:56:44)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene player scale should use BASE_PLAYER_SCALE for idle","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should use BASE_PLAYER_SCALE for idle"},{"ancestorTitles":["KidsFightScene player scale"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: scene.updatePlayerAnimation is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_player_scale.test.ts:63:44)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene player scale should use special scale values for blocking","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should use special scale values for blocking"},{"ancestorTitles":["KidsFightScene player scale"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: scene.updatePlayerAnimation is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_player_scale.test.ts:70:44)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene player scale should use BASE_PLAYER_SCALE for special attack","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should use BASE_PLAYER_SCALE for special attack"},{"ancestorTitles":["KidsFightScene player scale"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: scene.updatePlayerAnimation is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_player_scale.test.ts:76:44)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene player scale should use BASE_PLAYER_SCALE for normal attack","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should use BASE_PLAYER_SCALE for normal attack"},{"ancestorTitles":["KidsFightScene player scale"],"duration":5,"failureDetails":[{}],"failureMessages":["TypeError: scene.updatePlayerAnimation is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_player_scale.test.ts:89:44)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene player scale should set correct frame for attack","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should set correct frame for attack"},{"ancestorTitles":["KidsFightScene player scale"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: scene.updatePlayerAnimation is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_player_scale.test.ts:103:44)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene player scale should set correct frame for special attack","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should set correct frame for special attack"},{"ancestorTitles":["KidsFightScene player scale"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: scene.updatePlayerAnimation is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_player_scale.test.ts:110:44)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene player scale should use BASE_PLAYER_SCALE for walking","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should use BASE_PLAYER_SCALE for walking"},{"ancestorTitles":["KidsFightScene player scale"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: scene.updatePlayerAnimation is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_player_scale.test.ts:116:44)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene player scale should use BASE_PLAYER_SCALE for jumping","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should use BASE_PLAYER_SCALE for jumping"}],"endTime":1750397508471,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene player scale › should use BASE_PLAYER_SCALE for idle\u001b[39m\u001b[22m\n\n    TypeError: scene.updatePlayerAnimation is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 54 |\u001b[39m   it(\u001b[32m'should use BASE_PLAYER_SCALE for idle'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 55 |\u001b[39m     player1\u001b[33m.\u001b[39mgetData\u001b[33m.\u001b[39mmockReturnValueOnce(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// not hit\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 56 |\u001b[39m     (scene \u001b[36mas\u001b[39m any)[\u001b[32m'updatePlayerAnimation'\u001b[39m](\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 57 |\u001b[39m     expect(player1\u001b[33m.\u001b[39msetScale)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0.4\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 58 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 59 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_player_scale.test.ts\u001b[39m\u001b[0m\u001b[2m:56:44)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene player scale › should use special scale values for blocking\u001b[39m\u001b[22m\n\n    TypeError: scene.updatePlayerAnimation is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 61 |\u001b[39m     player1\u001b[33m.\u001b[39misBlocking \u001b[33m=\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 62 |\u001b[39m     scene\u001b[33m.\u001b[39mplayerBlocking[\u001b[35m0\u001b[39m] \u001b[33m=\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 63 |\u001b[39m     (scene \u001b[36mas\u001b[39m any)[\u001b[32m'updatePlayerAnimation'\u001b[39m](\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 64 |\u001b[39m     \u001b[90m// Blocking uses a special scale of 0.9, 1.0 per the implementation\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 65 |\u001b[39m     expect(player1\u001b[33m.\u001b[39msetScale)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0.9\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1.0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 66 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_player_scale.test.ts\u001b[39m\u001b[0m\u001b[2m:63:44)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene player scale › should use BASE_PLAYER_SCALE for special attack\u001b[39m\u001b[22m\n\n    TypeError: scene.updatePlayerAnimation is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m   it(\u001b[32m'should use BASE_PLAYER_SCALE for special attack'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     player1\u001b[33m.\u001b[39mgetData\u001b[33m.\u001b[39mmockImplementation((key\u001b[33m:\u001b[39m string) \u001b[33m=>\u001b[39m key \u001b[33m===\u001b[39m \u001b[32m'isSpecialAttacking'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     (scene \u001b[36mas\u001b[39m any)[\u001b[32m'updatePlayerAnimation'\u001b[39m](\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m     expect(player1\u001b[33m.\u001b[39msetScale)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0.4\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_player_scale.test.ts\u001b[39m\u001b[0m\u001b[2m:70:44)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene player scale › should use BASE_PLAYER_SCALE for normal attack\u001b[39m\u001b[22m\n\n    TypeError: scene.updatePlayerAnimation is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 74 |\u001b[39m   it(\u001b[32m'should use BASE_PLAYER_SCALE for normal attack'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 75 |\u001b[39m     player1\u001b[33m.\u001b[39mgetData\u001b[33m.\u001b[39mmockImplementation((key\u001b[33m:\u001b[39m string) \u001b[33m=>\u001b[39m key \u001b[33m===\u001b[39m \u001b[32m'isAttacking'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 76 |\u001b[39m     (scene \u001b[36mas\u001b[39m any)[\u001b[32m'updatePlayerAnimation'\u001b[39m](\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 77 |\u001b[39m     expect(player1\u001b[33m.\u001b[39msetScale)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0.4\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 78 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 79 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_player_scale.test.ts\u001b[39m\u001b[0m\u001b[2m:76:44)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene player scale › should set correct frame for attack\u001b[39m\u001b[22m\n\n    TypeError: scene.updatePlayerAnimation is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 87 |\u001b[39m     player1\u001b[33m.\u001b[39mdirection \u001b[33m=\u001b[39m \u001b[32m'right'\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 88 |\u001b[39m     player1\u001b[33m.\u001b[39mwalkAnimData \u001b[33m=\u001b[39m { frameTime\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m currentFrame\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m frameDelay\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 89 |\u001b[39m     (scene \u001b[36mas\u001b[39m any)[\u001b[32m'updatePlayerAnimation'\u001b[39m](\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 90 |\u001b[39m     expect(player1\u001b[33m.\u001b[39msetFrame)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m4\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 91 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 92 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_player_scale.test.ts\u001b[39m\u001b[0m\u001b[2m:89:44)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene player scale › should set correct frame for special attack\u001b[39m\u001b[22m\n\n    TypeError: scene.updatePlayerAnimation is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 101 |\u001b[39m     player1\u001b[33m.\u001b[39mdirection \u001b[33m=\u001b[39m \u001b[32m'right'\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 102 |\u001b[39m     player1\u001b[33m.\u001b[39mwalkAnimData \u001b[33m=\u001b[39m { frameTime\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m currentFrame\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m frameDelay\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 103 |\u001b[39m     (scene \u001b[36mas\u001b[39m any)[\u001b[32m'updatePlayerAnimation'\u001b[39m](\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 104 |\u001b[39m     expect(player1\u001b[33m.\u001b[39msetFrame)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m6\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 105 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 106 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_player_scale.test.ts\u001b[39m\u001b[0m\u001b[2m:103:44)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene player scale › should use BASE_PLAYER_SCALE for walking\u001b[39m\u001b[22m\n\n    TypeError: scene.updatePlayerAnimation is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 108 |\u001b[39m     player1\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mblocked\u001b[33m.\u001b[39mdown \u001b[33m=\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 109 |\u001b[39m     player1\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mvelocity\u001b[33m.\u001b[39mx \u001b[33m=\u001b[39m \u001b[35m10\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 110 |\u001b[39m     (scene \u001b[36mas\u001b[39m any)[\u001b[32m'updatePlayerAnimation'\u001b[39m](\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 111 |\u001b[39m     expect(player1\u001b[33m.\u001b[39msetScale)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0.4\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 112 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 113 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_player_scale.test.ts\u001b[39m\u001b[0m\u001b[2m:110:44)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene player scale › should use BASE_PLAYER_SCALE for jumping\u001b[39m\u001b[22m\n\n    TypeError: scene.updatePlayerAnimation is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 114 |\u001b[39m   it(\u001b[32m'should use BASE_PLAYER_SCALE for jumping'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 115 |\u001b[39m     player1\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mblocked\u001b[33m.\u001b[39mdown \u001b[33m=\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 116 |\u001b[39m     (scene \u001b[36mas\u001b[39m any)[\u001b[32m'updatePlayerAnimation'\u001b[39m](\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 117 |\u001b[39m     expect(player1\u001b[33m.\u001b[39msetScale)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0.4\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 118 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 119 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_player_scale.test.ts\u001b[39m\u001b[0m\u001b[2m:116:44)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_player_scale.test.ts","startTime":1750397507047,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene","create()"],"duration":10,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m160\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m160\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene.test.ts:611:36)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene create() should handle player movement","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle player movement"},{"ancestorTitles":["KidsFightScene","create()"],"duration":10,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'mockReturnValueOnce')\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene.test.ts:616:28)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene create() should handle player jump","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle player jump"},{"ancestorTitles":["KidsFightScene","create()"],"duration":170,"failureDetails":[{}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must be a mock or spy function\n\nReceived has type:  function\nReceived has value: \u001b[31m[Function tryAttack]\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene.test.ts:625:31)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene create() should handle player attack","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle player attack"},{"ancestorTitles":["KidsFightScene","create()"],"duration":24,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"isBlocking\"\u001b[39m, \u001b[32mtrue\u001b[39m\nReceived\n       1: \u001b[31m0.4\u001b[39m\n       2: \u001b[31m0.4\u001b[39m\n\nNumber of calls: \u001b[31m2\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"isBlocking\"\u001b[39m, \u001b[32mtrue\u001b[39m\nReceived\n       1: \u001b[31m0.4\u001b[39m\n       2: \u001b[31m0.4\u001b[39m\n\nNumber of calls: \u001b[31m2\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene.test.ts:637:31)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene create() should handle player block","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle player block"},{"ancestorTitles":["KidsFightScene","create()"],"duration":9,"failureDetails":[{}],"failureMessages":["TypeError: scene.showHitEffect is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene.test.ts:660:13)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene create() should handle hit effects","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle hit effects"},{"ancestorTitles":["KidsFightScene","create()"],"duration":9,"failureDetails":[{"matcherResult":{"actual":80,"expected":85,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m85\u001b[39m\nReceived: \u001b[31m80\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m85\u001b[39m\nReceived: \u001b[31m80\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene.test.ts:679:37)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene create() should handle tryAttack correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should handle tryAttack correctly"},{"ancestorTitles":["KidsFightScene","Health and Win Conditions"],"duration":3,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m0\u001b[39m, \u001b[32m\"Bento Venceu!\"\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m0\u001b[39m, \u001b[32m\"Bento Venceu!\"\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene.test.ts:788:27)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Health and Win Conditions should detect when player wins by reducing health to 0","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should detect when player wins by reducing health to 0"},{"ancestorTitles":["KidsFightScene","Health and Win Conditions"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Health and Win Conditions should handle time running out with player having more health","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle time running out with player having more health"},{"ancestorTitles":["KidsFightScene","Health and Win Conditions"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Health and Win Conditions should handle draw when time runs out with equal health","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle draw when time runs out with equal health"},{"ancestorTitles":["KidsFightScene","Health and Win Conditions"],"duration":181,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Health and Win Conditions should not end game if time is not up and player has health","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should not end game if time is not up and player has health"},{"ancestorTitles":["KidsFightScene","Time and health win/draw detection"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Time and health win/draw detection should handle time running out with player having more health","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle time running out with player having more health"},{"ancestorTitles":["KidsFightScene","Time and health win/draw detection"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Time and health win/draw detection should handle draw when time runs out with equal health","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle draw when time runs out with equal health"},{"ancestorTitles":["KidsFightScene","Time and health win/draw detection"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Time and health win/draw detection should not end game if time is not up and both players have health","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should not end game if time is not up and both players have health"}],"endTime":1750397508489,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene › create() › should handle player movement\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m160\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 609 |\u001b[39m       \u001b[36mconst\u001b[39m moveAction \u001b[33m=\u001b[39m {type\u001b[33m:\u001b[39m \u001b[32m'move'\u001b[39m\u001b[33m,\u001b[39m playerIndex\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m direction\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m}\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 610 |\u001b[39m       scene\u001b[33m.\u001b[39mhandleRemoteAction(moveAction)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 611 |\u001b[39m       expect(player1\u001b[33m.\u001b[39msetVelocityX)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m160\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 612 |\u001b[39m       expect(player1\u001b[33m.\u001b[39msetFlipX)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 613 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 614 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene.test.ts\u001b[39m\u001b[0m\u001b[2m:611:36)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene › create() › should handle player jump\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'mockReturnValueOnce')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 614 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 615 |\u001b[39m     it(\u001b[32m'should handle player jump'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 616 |\u001b[39m       player1\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39monFloor\u001b[33m.\u001b[39mmockReturnValueOnce(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 617 |\u001b[39m       \u001b[36mconst\u001b[39m jumpAction \u001b[33m=\u001b[39m {type\u001b[33m:\u001b[39m \u001b[32m'jump'\u001b[39m\u001b[33m,\u001b[39m playerIndex\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m}\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 618 |\u001b[39m       scene\u001b[33m.\u001b[39mhandleRemoteAction(jumpAction)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 619 |\u001b[39m       expect(player1\u001b[33m.\u001b[39msetVelocityY)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[33m-\u001b[39m\u001b[35m500\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene.test.ts\u001b[39m\u001b[0m\u001b[2m:616:28)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene › create() › should handle player attack\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    \u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: \u001b[31m[Function tryAttack]\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 623 |\u001b[39m       \u001b[36mconst\u001b[39m attackAction \u001b[33m=\u001b[39m {type\u001b[33m:\u001b[39m \u001b[32m'attack'\u001b[39m\u001b[33m,\u001b[39m playerIndex\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m}\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 624 |\u001b[39m       scene\u001b[33m.\u001b[39mhandleRemoteAction(attackAction)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 625 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mtryAttack)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 626 |\u001b[39m           \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 627 |\u001b[39m           player1\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 628 |\u001b[39m           player2\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene.test.ts\u001b[39m\u001b[0m\u001b[2m:625:31)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene › create() › should handle player block\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m\"isBlocking\"\u001b[39m, \u001b[32mtrue\u001b[39m\n    Received\n           1: \u001b[31m0.4\u001b[39m\n           2: \u001b[31m0.4\u001b[39m\n\n    Number of calls: \u001b[31m2\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 635 |\u001b[39m       \u001b[36mconst\u001b[39m blockAction \u001b[33m=\u001b[39m {type\u001b[33m:\u001b[39m \u001b[32m'block'\u001b[39m\u001b[33m,\u001b[39m playerIndex\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m active\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m}\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 636 |\u001b[39m       scene\u001b[33m.\u001b[39mhandleRemoteAction(blockAction)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 637 |\u001b[39m       expect(player1\u001b[33m.\u001b[39msetData)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'isBlocking'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 638 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 639 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 640 |\u001b[39m     it(\u001b[32m'should handle hit effects'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene.test.ts\u001b[39m\u001b[0m\u001b[2m:637:31)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene › create() › should handle hit effects\u001b[39m\u001b[22m\n\n    TypeError: scene.showHitEffect is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 658 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 659 |\u001b[39m       (scene\u001b[33m.\u001b[39madd\u001b[33m.\u001b[39msprite \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(hitEffect)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 660 |\u001b[39m       scene\u001b[33m.\u001b[39mshowHitEffect({x\u001b[33m:\u001b[39m \u001b[35m100\u001b[39m\u001b[33m,\u001b[39m y\u001b[33m:\u001b[39m \u001b[35m100\u001b[39m})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 661 |\u001b[39m       expect(scene\u001b[33m.\u001b[39madd\u001b[33m.\u001b[39msprite)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m100\u001b[39m\u001b[33m,\u001b[39m \u001b[35m100\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'hit_effect'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 662 |\u001b[39m       expect(hitEffect\u001b[33m.\u001b[39mplay)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'hit_effect_anim'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 663 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mhitEffects)\u001b[33m.\u001b[39mtoContain(hitEffect)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene.test.ts\u001b[39m\u001b[0m\u001b[2m:660:13)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene › create() › should handle tryAttack correctly\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m85\u001b[39m\n    Received: \u001b[31m80\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 677 |\u001b[39m       \u001b[90m// Test special attack\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 678 |\u001b[39m       scene\u001b[33m.\u001b[39mtryAttack(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m \u001b[35m100\u001b[39m\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 679 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mplayerHealth[\u001b[35m1\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[35m85\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 95 - 10 damage\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 680 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 681 |\u001b[39m       \u001b[90m// Test game over condition\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 682 |\u001b[39m       scene\u001b[33m.\u001b[39mplayerHealth[\u001b[35m1\u001b[39m] \u001b[33m=\u001b[39m \u001b[35m5\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene.test.ts\u001b[39m\u001b[0m\u001b[2m:679:37)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene › Health and Win Conditions › should detect when player wins by reducing health to 0\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m0\u001b[39m, \u001b[32m\"Bento Venceu!\"\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 786 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 787 |\u001b[39m       \u001b[90m// Verify endGame was called with correct winner (player)\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 788 |\u001b[39m       expect(mockEndGame)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Bento Venceu!'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 789 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 790 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 791 |\u001b[39m     it(\u001b[32m'should handle time running out with player having more health'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene.test.ts\u001b[39m\u001b[0m\u001b[2m:788:27)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene.test.ts","startTime":1750397507035,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene Health Bars","createHealthBars"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Health Bars createHealthBars should create health bar backgrounds and bars with correct properties","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should create health bar backgrounds and bars with correct properties"},{"ancestorTitles":["KidsFightScene Health Bars","createHealthBars"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Health Bars createHealthBars should call updateHealthBar when health bars change","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should call updateHealthBar when health bars change"},{"ancestorTitles":["KidsFightScene Health Bars","createHealthBars"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Health Bars createHealthBars should destroy existing health bars before creating new ones","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should destroy existing health bars before creating new ones"},{"ancestorTitles":["KidsFightScene Health Bars","createHealthBars"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Health Bars createHealthBars should call setScrollFactor and setDepth on both health bars when created","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should call setScrollFactor and setDepth on both health bars when created"},{"ancestorTitles":["KidsFightScene Health Bars","updateHealthBar"],"duration":4,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\nExpected number of calls: \u001b[32m0\u001b[39m\nReceived number of calls: \u001b[31m1\u001b[39m\n\n1: \u001b[31m20\u001b[39m, \u001b[31m20\u001b[39m, \u001b[31m200\u001b[39m, \u001b[31m20\u001b[39m","pass":true}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\nExpected number of calls: \u001b[32m0\u001b[39m\nReceived number of calls: \u001b[31m1\u001b[39m\n\n1: \u001b[31m20\u001b[39m, \u001b[31m20\u001b[39m, \u001b[31m200\u001b[39m, \u001b[31m20\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_health_bars.test.ts:162:45)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Health Bars updateHealthBar should handle missing game canvas gracefully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle missing game canvas gracefully"},{"ancestorTitles":["KidsFightScene Health Bars","updateHealthBar"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Health Bars updateHealthBar should recreate health bars if they are missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should recreate health bars if they are missing"},{"ancestorTitles":["KidsFightScene Health Bars","updateHealthBar"],"duration":1,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m65280\u001b[39m\nReceived: \u001b[31m16776960\u001b[39m, \u001b[31m1\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m65280\u001b[39m\nReceived: \u001b[31m16776960\u001b[39m, \u001b[31m1\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_health_bars.test.ts:187:42)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Health Bars updateHealthBar should use green color for player 1 health bar","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should use green color for player 1 health bar"},{"ancestorTitles":["KidsFightScene Health Bars","updateHealthBar"],"duration":1,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m16711680\u001b[39m\nReceived: \u001b[31m16776960\u001b[39m, \u001b[31m1\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m16711680\u001b[39m\nReceived: \u001b[31m16776960\u001b[39m, \u001b[31m1\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_health_bars.test.ts:198:42)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Health Bars updateHealthBar should use red color for player 2 health bar","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should use red color for player 2 health bar"},{"ancestorTitles":["KidsFightScene Health Bars","updateHealthBar"],"duration":1,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m65280\u001b[39m\nReceived\n       1: \u001b[2m65280\u001b[22m, \u001b[31m1\u001b[39m\n       2: \u001b[2m65280\u001b[22m, \u001b[31m1\u001b[39m\n\nNumber of calls: \u001b[31m2\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m65280\u001b[39m\nReceived\n       1: \u001b[2m65280\u001b[22m, \u001b[31m1\u001b[39m\n       2: \u001b[2m65280\u001b[22m, \u001b[31m1\u001b[39m\n\nNumber of calls: \u001b[31m2\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_health_bars.test.ts:212:42)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Health Bars updateHealthBar should maintain correct colors when players swap positions","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should maintain correct colors when players swap positions"},{"ancestorTitles":["KidsFightScene Health Bars","updateHealthBar"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Health Bars updateHealthBar should draw health bars proportional to health percentage","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should draw health bars proportional to health percentage"},{"ancestorTitles":["KidsFightScene Health Bars","updateHealthBar"],"duration":1,"failureDetails":[{"matcherResult":{"actual":false,"expected":true,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_health_bars.test.ts:259:38)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Health Bars updateHealthBar should mark the graphics objects as dirty to ensure redraw","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should mark the graphics objects as dirty to ensure redraw"}],"endTime":1750397508596,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Health Bars › updateHealthBar › should handle missing game canvas gracefully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\n    Expected number of calls: \u001b[32m0\u001b[39m\n    Received number of calls: \u001b[31m1\u001b[39m\n\n    1: \u001b[31m20\u001b[39m, \u001b[31m20\u001b[39m, \u001b[31m200\u001b[39m, \u001b[31m20\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 160 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 161 |\u001b[39m       \u001b[90m// Should not throw and should not try to draw anything\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 162 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mhealthBar1\u001b[33m.\u001b[39mfillRect)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 163 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 164 |\u001b[39m     \u001b[22m\n\u001b[2m     \u001b[90m 165 |\u001b[39m     it(\u001b[32m'should recreate health bars if they are missing'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_health_bars.test.ts\u001b[39m\u001b[0m\u001b[2m:162:45)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Health Bars › updateHealthBar › should use green color for player 1 health bar\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m65280\u001b[39m\n    Received: \u001b[31m16776960\u001b[39m, \u001b[31m1\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 185 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 186 |\u001b[39m       \u001b[90m// Verify the color used for player 1 is GREEN\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 187 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mhealthBar1\u001b[33m.\u001b[39mfillStyle)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0x00ff00\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// GREEN\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 188 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 189 |\u001b[39m     \u001b[22m\n\u001b[2m     \u001b[90m 190 |\u001b[39m     it(\u001b[32m'should use red color for player 2 health bar'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_health_bars.test.ts\u001b[39m\u001b[0m\u001b[2m:187:42)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Health Bars › updateHealthBar › should use red color for player 2 health bar\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m16711680\u001b[39m\n    Received: \u001b[31m16776960\u001b[39m, \u001b[31m1\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 196 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 197 |\u001b[39m       \u001b[90m// Verify the color used for player 2 is RED\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 198 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mhealthBar2\u001b[33m.\u001b[39mfillStyle)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0xff0000\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// RED\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 199 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 200 |\u001b[39m     \u001b[22m\n\u001b[2m     \u001b[90m 201 |\u001b[39m     it(\u001b[32m'should maintain correct colors when players swap positions'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_health_bars.test.ts\u001b[39m\u001b[0m\u001b[2m:198:42)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Health Bars › updateHealthBar › should maintain correct colors when players swap positions\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m65280\u001b[39m\n    Received\n           1: \u001b[2m65280\u001b[22m, \u001b[31m1\u001b[39m\n           2: \u001b[2m65280\u001b[22m, \u001b[31m1\u001b[39m\n\n    Number of calls: \u001b[31m2\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 210 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 211 |\u001b[39m       \u001b[90m// Despite position swap, player 1 health bar should still be GREEN\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 212 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mhealthBar1\u001b[33m.\u001b[39mfillStyle)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0x00ff00\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// GREEN for P1\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 213 |\u001b[39m       \u001b[90m// Player 2 health bar should still be RED\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 214 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mhealthBar2\u001b[33m.\u001b[39mfillStyle)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0xff0000\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// RED for P2\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 215 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_health_bars.test.ts\u001b[39m\u001b[0m\u001b[2m:212:42)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Health Bars › updateHealthBar › should mark the graphics objects as dirty to ensure redraw\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32mtrue\u001b[39m\n    Received: \u001b[31mfalse\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 257 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 258 |\u001b[39m       \u001b[90m// Both health bars should be marked as dirty\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 259 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mhealthBar1\u001b[33m.\u001b[39mdirty)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 260 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mhealthBar2\u001b[33m.\u001b[39mdirty)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 261 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 262 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_health_bars.test.ts\u001b[39m\u001b[0m\u001b[2m:259:38)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_health_bars.test.ts","startTime":1750397507062,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene - Platform & Player Positioning"],"duration":6,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\nExpected number of calls: >= \u001b[32m1\u001b[39m\nReceived number of calls:    \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\nExpected number of calls: >= \u001b[32m1\u001b[39m\nReceived number of calls:    \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_platform_positioning.test.ts:90:33)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene - Platform & Player Positioning should create an upper platform at the correct y and make it transparent","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create an upper platform at the correct y and make it transparent"},{"ancestorTitles":["KidsFightScene - Platform & Player Positioning"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Platform & Player Positioning should create players at the correct y with origin (0.5, 1.0) and scale 0.4","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should create players at the correct y with origin (0.5, 1.0) and scale 0.4"},{"ancestorTitles":["KidsFightScene - Platform & Player Positioning"],"duration":4,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\nExpected number of calls: >= \u001b[32m1\u001b[39m\nReceived number of calls:    \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\nExpected number of calls: >= \u001b[32m1\u001b[39m\nReceived number of calls:    \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_platform_positioning.test.ts:107:40)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene - Platform & Player Positioning should add physics collider between players and upper platform","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should add physics collider between players and upper platform"}],"endTime":1750397508476,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene - Platform & Player Positioning › should create an upper platform at the correct y and make it transparent\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\n    Expected number of calls: >= \u001b[32m1\u001b[39m\n    Received number of calls:    \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 88 |\u001b[39m     scene\u001b[33m.\u001b[39mcreate()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 89 |\u001b[39m     \u001b[90m// Expect rectangle/platform to be created (you may need to adjust for your actual implementation)\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 90 |\u001b[39m     expect(scene\u001b[33m.\u001b[39madd\u001b[33m.\u001b[39mrectangle)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 91 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 92 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 93 |\u001b[39m   it(\u001b[32m'should create players at the correct y with origin (0.5, 1.0) and scale 0.4'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_platform_positioning.test.ts\u001b[39m\u001b[0m\u001b[2m:90:33)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene - Platform & Player Positioning › should add physics collider between players and upper platform\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\n    Expected number of calls: >= \u001b[32m1\u001b[39m\n    Received number of calls:    \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 105 |\u001b[39m   it(\u001b[32m'should add physics collider between players and upper platform'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 106 |\u001b[39m     scene\u001b[33m.\u001b[39mcreate()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 107 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mphysics\u001b[33m.\u001b[39madd\u001b[33m.\u001b[39mcollider)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 108 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 109 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_platform_positioning.test.ts\u001b[39m\u001b[0m\u001b[2m:107:40)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_platform_positioning.test.ts","startTime":1750397508418,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Health Bar Functionality","Health Bar Creation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Health Bar Functionality Health Bar Creation should create health bars with correct properties","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should create health bars with correct properties"},{"ancestorTitles":["Health Bar Functionality","Health Bar Creation"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Health Bar Functionality Health Bar Creation should destroy existing health bars before creating new ones","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"should destroy existing health bars before creating new ones"},{"ancestorTitles":["Health Bar Functionality","Health Bar Update"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading '0')\n    at TestableKidsFightScene.updateHealthBar (/Users/ivan/projects/kidsfight/kidsfight_scene.ts:751:26)\n    at TestableKidsFightScene.testUpdateHealthBar (/Users/ivan/projects/kidsfight/__tests__/health_bar_fixed.test.ts:70:17)\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/health_bar_fixed.test.ts:203:13)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"Health Bar Functionality Health Bar Update should update health bar width based on player health","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update health bar width based on player health"},{"ancestorTitles":["Health Bar Functionality","Health Bar Update"],"duration":5,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading '0')\n    at TestableKidsFightScene.updateHealthBar (/Users/ivan/projects/kidsfight/kidsfight_scene.ts:751:26)\n    at TestableKidsFightScene.testUpdateHealthBar (/Users/ivan/projects/kidsfight/__tests__/health_bar_fixed.test.ts:70:17)\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/health_bar_fixed.test.ts:233:13)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"Health Bar Functionality Health Bar Update should handle zero health correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle zero health correctly"}],"endTime":1750397508631,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mHealth Bar Functionality › Health Bar Update › should update health bar width based on player health\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading '0')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 749 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 750 |\u001b[39m     \u001b[90m// Safety check for missing health value\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 751 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mplayerHealth[playerIndex] \u001b[33m===\u001b[39m undefined) {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 752 |\u001b[39m       console\u001b[33m.\u001b[39mwarn(\u001b[32m`[KidsFightScene] updateHealthBar: Missing health value for player ${playerIndex}`\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 753 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mplayerHealth[playerIndex] \u001b[33m=\u001b[39m \u001b[33mMAX_HEALTH\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 754 |\u001b[39m     }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestableKidsFightScene.updateHealthBar (\u001b[22m\u001b[2mkidsfight_scene.ts\u001b[2m:751:26)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestableKidsFightScene.testUpdateHealthBar (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/health_bar_fixed.test.ts\u001b[39m\u001b[0m\u001b[2m:70:17)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/health_bar_fixed.test.ts\u001b[39m\u001b[0m\u001b[2m:203:13)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mHealth Bar Functionality › Health Bar Update › should handle zero health correctly\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading '0')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 749 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 750 |\u001b[39m     \u001b[90m// Safety check for missing health value\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 751 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mplayerHealth[playerIndex] \u001b[33m===\u001b[39m undefined) {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 752 |\u001b[39m       console\u001b[33m.\u001b[39mwarn(\u001b[32m`[KidsFightScene] updateHealthBar: Missing health value for player ${playerIndex}`\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 753 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mplayerHealth[playerIndex] \u001b[33m=\u001b[39m \u001b[33mMAX_HEALTH\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 754 |\u001b[39m     }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestableKidsFightScene.updateHealthBar (\u001b[22m\u001b[2mkidsfight_scene.ts\u001b[2m:751:26)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestableKidsFightScene.testUpdateHealthBar (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/health_bar_fixed.test.ts\u001b[39m\u001b[0m\u001b[2m:70:17)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/health_bar_fixed.test.ts\u001b[39m\u001b[0m\u001b[2m:233:13)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/health_bar_fixed.test.ts","startTime":1750397508352,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene Special Pips","createSpecialPips"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: scene.createSpecialPips is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene.special_pips.test.ts:40:13)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Special Pips createSpecialPips should create 3 special pips for each player and clear old ones","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create 3 special pips for each player and clear old ones"},{"ancestorTitles":["KidsFightScene Special Pips","updateSpecialPips"],"duration":3,"failureDetails":[{}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must be a mock or spy function\n\nReceived has value: \u001b[31mundefined\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene.special_pips.test.ts:73:47)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Special Pips updateSpecialPips should fill pips yellow for earned and white for unearned","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should fill pips yellow for earned and white for unearned"},{"ancestorTitles":["KidsFightScene Special Pips","updateSpecialPips"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Special Pips updateSpecialPips should not throw if fewer than 3 pips exist","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not throw if fewer than 3 pips exist"}],"endTime":1750397508644,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Special Pips › createSpecialPips › should create 3 special pips for each player and clear old ones\u001b[39m\u001b[22m\n\n    TypeError: scene.createSpecialPips is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 38 |\u001b[39m       scene\u001b[33m.\u001b[39mspecialPips2 \u001b[33m=\u001b[39m [oldPip2]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 39 |\u001b[39m       \u001b[90m// Call\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 40 |\u001b[39m       scene\u001b[33m.\u001b[39mcreateSpecialPips(\u001b[35m1\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m       \u001b[90m// Old pips should be destroyed\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 42 |\u001b[39m       expect(oldPip1\u001b[33m.\u001b[39mdestroy)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 43 |\u001b[39m       expect(oldPip2\u001b[33m.\u001b[39mdestroy)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene.special_pips.test.ts\u001b[39m\u001b[0m\u001b[2m:40:13)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Special Pips › updateSpecialPips › should fill pips yellow for earned and white for unearned\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    \u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must be a mock or spy function\n\n    Received has value: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 71 |\u001b[39m       scene\u001b[33m.\u001b[39mupdateSpecialPips()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m       \u001b[90m// Player 1: first 2 yellow, last white\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 73 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mspecialPips1[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mfillStyle)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0xffe066\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 74 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mspecialPips1[\u001b[35m1\u001b[39m]\u001b[33m.\u001b[39mfillStyle)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0xffe066\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 75 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mspecialPips1[\u001b[35m2\u001b[39m]\u001b[33m.\u001b[39mfillStyle)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0xffffff\u001b[39m\u001b[33m,\u001b[39m \u001b[35m0.3\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 76 |\u001b[39m       \u001b[90m// Player 2: first yellow, rest white\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene.special_pips.test.ts\u001b[39m\u001b[0m\u001b[2m:73:47)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene.special_pips.test.ts","startTime":1750397508611,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene Health & Damage Logic"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Health & Damage Logic should require 20 normal hits to KO a player","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should require 20 normal hits to KO a player"},{"ancestorTitles":["KidsFightScene Health & Damage Logic"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Health & Damage Logic should require 10 special hits to KO a player","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should require 10 special hits to KO a player"},{"ancestorTitles":["KidsFightScene Health & Damage Logic"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Health & Damage Logic should allow mixed attacks to KO a player","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should allow mixed attacks to KO a player"},{"ancestorTitles":["KidsFightScene Health & Damage Logic"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Health & Damage Logic should not reduce health below 0","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should not reduce health below 0"},{"ancestorTitles":["KidsFightScene Health & Damage Logic"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: scene.tryAction is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_health_logic.test.ts:112:23)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Health & Damage Logic should apply correct damage for normal and special attacks","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should apply correct damage for normal and special attacks"}],"endTime":1750397508657,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Health & Damage Logic › should apply correct damage for normal and special attacks\u001b[39m\u001b[22m\n\n    TypeError: scene.tryAction is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 110 |\u001b[39m     \u001b[22m\n\u001b[2m     \u001b[90m 111 |\u001b[39m     \u001b[90m// First attack (normal)\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 112 |\u001b[39m     scene[\u001b[32m'tryAction'\u001b[39m](\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'attack'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 113 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayerHealth[\u001b[35m1\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[35m95\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 114 |\u001b[39m     \u001b[22m\n\u001b[2m     \u001b[90m 115 |\u001b[39m     \u001b[90m// Update time for cooldown\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_health_logic.test.ts\u001b[39m\u001b[0m\u001b[2m:112:23)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_health_logic.test.ts","startTime":1750397508616,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene player cross and flip logic"],"duration":1,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mfalse\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mfalse\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_cross_and_flip.test.ts:156:39)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene player cross and flip logic should flipX and directions correctly when player1 is left of player2","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should flipX and directions correctly when player1 is left of player2"},{"ancestorTitles":["KidsFightScene player cross and flip logic"],"duration":1,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_cross_and_flip.test.ts:180:39)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene player cross and flip logic should flipX and directions correctly when player1 is right of player2","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should flipX and directions correctly when player1 is right of player2"},{"ancestorTitles":["KidsFightScene sprite frame size loading"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene sprite frame size loading should load correct frame sizes for each player","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should load correct frame sizes for each player"}],"endTime":1750397508659,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene player cross and flip logic › should flipX and directions correctly when player1 is left of player2\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mfalse\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 154 |\u001b[39m     originalUpdate\u001b[33m.\u001b[39mcall(scene)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 155 |\u001b[39m     \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 156 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayers[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39msetFlipX)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 157 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayers[\u001b[35m1\u001b[39m]\u001b[33m.\u001b[39msetFlipX)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 158 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayerDirection[\u001b[35m0\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[32m'right'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 159 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayerDirection[\u001b[35m1\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[32m'left'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_cross_and_flip.test.ts\u001b[39m\u001b[0m\u001b[2m:156:39)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene player cross and flip logic › should flipX and directions correctly when player1 is right of player2\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mtrue\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 178 |\u001b[39m     originalUpdate\u001b[33m.\u001b[39mcall(scene)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 179 |\u001b[39m     \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 180 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayers[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39msetFlipX)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 181 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayers[\u001b[35m1\u001b[39m]\u001b[33m.\u001b[39msetFlipX)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 182 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayerDirection[\u001b[35m0\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[32m'left'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 183 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayerDirection[\u001b[35m1\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[32m'right'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_cross_and_flip.test.ts\u001b[39m\u001b[0m\u001b[2m:180:39)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_cross_and_flip.test.ts","startTime":1750397508470,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene.tryAction"],"duration":2,"failureDetails":[{}],"failureMessages":["TypeError: scene.tryAction is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_tryAction.test.ts:37:11)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene.tryAction should not perform action if players are not ready","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not perform action if players are not ready"},{"ancestorTitles":["KidsFightScene.tryAction"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: scene.tryAction is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_tryAction.test.ts:47:11)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene.tryAction should not perform special if not enough pips","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not perform special if not enough pips"},{"ancestorTitles":["KidsFightScene.tryAction"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: scene.tryAction is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_tryAction.test.ts:58:11)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene.tryAction should consume all pips and call tryAttack for special","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should consume all pips and call tryAttack for special"},{"ancestorTitles":["KidsFightScene.tryAction"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: scene.tryAction is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_tryAction.test.ts:69:11)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene.tryAction should call tryAttack for normal attack","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should call tryAttack for normal attack"},{"ancestorTitles":["KidsFightScene.tryAction"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: scene.tryAction is not a function\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_tryAction.test.ts:79:11)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene.tryAction should not fail if attacker or target is missing","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not fail if attacker or target is missing"}],"endTime":1750397508688,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene.tryAction › should not perform action if players are not ready\u001b[39m\u001b[22m\n\n    TypeError: scene.tryAction is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 35 |\u001b[39m   \u001b[36mreturn\u001b[39m \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mgetPrototypeOf(scene)\u001b[33m.\u001b[39mtryAttack\u001b[33m.\u001b[39mapply(\u001b[36mthis\u001b[39m\u001b[33m,\u001b[39m args)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 36 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 37 |\u001b[39m     scene\u001b[33m.\u001b[39mtryAction(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'attack'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 38 |\u001b[39m     expect(spy)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 39 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 40 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_tryAction.test.ts\u001b[39m\u001b[0m\u001b[2m:37:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene.tryAction › should not perform special if not enough pips\u001b[39m\u001b[22m\n\n    TypeError: scene.tryAction is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 45 |\u001b[39m   \u001b[36mreturn\u001b[39m \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mgetPrototypeOf(scene)\u001b[33m.\u001b[39mtryAttack\u001b[33m.\u001b[39mapply(\u001b[36mthis\u001b[39m\u001b[33m,\u001b[39m args)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 46 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 47 |\u001b[39m     scene\u001b[33m.\u001b[39mtryAction(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'special'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 48 |\u001b[39m     expect(spy)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 49 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 50 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_tryAction.test.ts\u001b[39m\u001b[0m\u001b[2m:47:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene.tryAction › should consume all pips and call tryAttack for special\u001b[39m\u001b[22m\n\n    TypeError: scene.tryAction is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 56 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 57 |\u001b[39m     scene\u001b[33m.\u001b[39mupdateSpecialPips \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 58 |\u001b[39m     scene\u001b[33m.\u001b[39mtryAction(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'special'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 59 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayerSpecial[\u001b[35m0\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 60 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mupdateSpecialPips)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 61 |\u001b[39m     expect(spy)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mNumber\u001b[39m)\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_tryAction.test.ts\u001b[39m\u001b[0m\u001b[2m:58:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene.tryAction › should call tryAttack for normal attack\u001b[39m\u001b[22m\n\n    TypeError: scene.tryAction is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 67 |\u001b[39m   \u001b[36mreturn\u001b[39m \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mgetPrototypeOf(scene)\u001b[33m.\u001b[39mtryAttack\u001b[33m.\u001b[39mapply(\u001b[36mthis\u001b[39m\u001b[33m,\u001b[39m args)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 68 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 69 |\u001b[39m     scene\u001b[33m.\u001b[39mtryAction(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'attack'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 70 |\u001b[39m     expect(spy)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mNumber\u001b[39m)\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_tryAction.test.ts\u001b[39m\u001b[0m\u001b[2m:69:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene.tryAction › should not fail if attacker or target is missing\u001b[39m\u001b[22m\n\n    TypeError: scene.tryAction is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 77 |\u001b[39m   \u001b[36mreturn\u001b[39m \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mgetPrototypeOf(scene)\u001b[33m.\u001b[39mtryAttack\u001b[33m.\u001b[39mapply(\u001b[36mthis\u001b[39m\u001b[33m,\u001b[39m args)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 78 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 79 |\u001b[39m     scene\u001b[33m.\u001b[39mtryAction(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'attack'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 80 |\u001b[39m     expect(spy)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 81 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 82 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_tryAction.test.ts\u001b[39m\u001b[0m\u001b[2m:79:11)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_tryAction.test.ts","startTime":1750397508603,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene Touch Controls"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Touch Controls should call setVelocityX(-160) when left button is pressed","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should call setVelocityX(-160) when left button is pressed"},{"ancestorTitles":["KidsFightScene Touch Controls"],"duration":15,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Touch Controls should call setVelocityX(160) when right button is pressed","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should call setVelocityX(160) when right button is pressed"},{"ancestorTitles":["KidsFightScene Touch Controls"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Touch Controls should call setVelocityY(-330) when jump button is pressed and player is on the ground","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should call setVelocityY(-330) when jump button is pressed and player is on the ground"},{"ancestorTitles":["KidsFightScene Touch Controls"],"duration":57,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Touch Controls should call handleAttack when attack button is pressed","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should call handleAttack when attack button is pressed"},{"ancestorTitles":["KidsFightScene Touch Controls"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Touch Controls should call handleSpecial when special button is pressed","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should call handleSpecial when special button is pressed"},{"ancestorTitles":["KidsFightScene Touch Controls"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Touch Controls should update playerBlocking when block button is pressed","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should update playerBlocking when block button is pressed"},{"ancestorTitles":["KidsFightScene Touch Controls"],"duration":1,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m0\u001b[39m, \u001b[32m\"special\"\u001b[39m, \u001b[32mtrue\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m0\u001b[39m, \u001b[32m\"special\"\u001b[39m, \u001b[32mtrue\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_touch_controls.test.ts:178:29)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene Touch Controls should trigger special logic in handleSpecial()","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should trigger special logic in handleSpecial()"},{"ancestorTitles":["KidsFightScene Touch Controls"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Touch Controls should update health bar in updateHealthBar","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should update health bar in updateHealthBar"}],"endTime":1750397508677,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene Touch Controls › should trigger special logic in handleSpecial()\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m0\u001b[39m, \u001b[32m\"special\"\u001b[39m, \u001b[32mtrue\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 176 |\u001b[39m     \u001b[22m\n\u001b[2m     \u001b[90m 177 |\u001b[39m     \u001b[90m// Check that tryAction was called with the right parameters\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 178 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mtryAction)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'special'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 179 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 180 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 181 |\u001b[39m   it(\u001b[32m'should update health bar in updateHealthBar'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_touch_controls.test.ts\u001b[39m\u001b[0m\u001b[2m:178:29)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_touch_controls.test.ts","startTime":1750397508460,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Health Bar Functionality","Health Bar Creation"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Health Bar Functionality Health Bar Creation should initialize health bars with correct values","invocations":1,"location":null,"numPassingAsserts":11,"retryReasons":[],"status":"passed","title":"should initialize health bars with correct values"},{"ancestorTitles":["Health Bar Functionality","Health Bar Creation"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Health Bar Functionality Health Bar Creation should destroy existing health bars before creating new ones","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"should destroy existing health bars before creating new ones"},{"ancestorTitles":["Health Bar Functionality","Health Bar Updates"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Health Bar Functionality Health Bar Updates should update health bar visuals","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should update health bar visuals"},{"ancestorTitles":["Health Bar Functionality","Health Bar Updates"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Health Bar Functionality Health Bar Updates should update player 1 health correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should update player 1 health correctly"},{"ancestorTitles":["Health Bar Functionality","Health Bar Updates"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Health Bar Functionality Health Bar Updates should update player 2 health correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should update player 2 health correctly"},{"ancestorTitles":["Health Bar Functionality","Health Bar Updates"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Health Bar Functionality Health Bar Updates should recreate health bars if they are missing","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should recreate health bars if they are missing"},{"ancestorTitles":["Health Bar Functionality","Health Bar Updates"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Health Bar Functionality Health Bar Updates should handle missing game canvas gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle missing game canvas gracefully"},{"ancestorTitles":["Health Bar Functionality","Health Bar Updates"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Health Bar Functionality Health Bar Updates should handle missing players gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle missing players gracefully"},{"ancestorTitles":["Health Bar Functionality","Health Bar Updates"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Health Bar Functionality Health Bar Updates should update player health when health is out of sync","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should update player health when health is out of sync"},{"ancestorTitles":["Health Bar Functionality","Online Mode Behavior"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Health Bar Functionality Online Mode Behavior should initialize host health correctly in online mode","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should initialize host health correctly in online mode"},{"ancestorTitles":["Health Bar Functionality","Online Mode Behavior"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Health Bar Functionality Online Mode Behavior should initialize guest health correctly in online mode","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should initialize guest health correctly in online mode"},{"ancestorTitles":["Health Bar Functionality","Health Bar Visuals"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Health Bar Functionality Health Bar Visuals should update health bars on different screen sizes","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should update health bars on different screen sizes"},{"ancestorTitles":["Health Bar Functionality","Health Bar Visuals"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Health Bar Functionality Health Bar Visuals should handle window resize by recreating health bars","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should handle window resize by recreating health bars"}],"endTime":1750397508698,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/health_bar.test.ts","startTime":1750397508660,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene Online Health Synchronization Tests"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Online Health Synchronization Tests tryAttack should apply correct damage and send health update message","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"tryAttack should apply correct damage and send health update message"},{"ancestorTitles":["KidsFightScene Online Health Synchronization Tests"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Online Health Synchronization Tests tryAttack should not send WebSocket message for non-local player attacks","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"tryAttack should not send WebSocket message for non-local player attacks"},{"ancestorTitles":["KidsFightScene Online Health Synchronization Tests"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Online Health Synchronization Tests tryAttack with special attack should apply correct damage","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"tryAttack with special attack should apply correct damage"},{"ancestorTitles":["KidsFightScene Online Health Synchronization Tests"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Online Health Synchronization Tests WebSocket health_update message should update health correctly for remote player","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"WebSocket health_update message should update health correctly for remote player"},{"ancestorTitles":["KidsFightScene Online Health Synchronization Tests"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Online Health Synchronization Tests WebSocket health_update message should be ignored for local player to prevent double-decrement","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"WebSocket health_update message should be ignored for local player to prevent double-decrement"},{"ancestorTitles":["KidsFightScene Online Health Synchronization Tests"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Online Health Synchronization Tests Consecutive attacks should apply correct cumulative damage","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Consecutive attacks should apply correct cumulative damage"}],"endTime":1750397508700,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/online_health_sync.test.ts","startTime":1750397508672,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene - Health, Damage, and Win Logic"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Health, Damage, and Win Logic initializes both players with 100 health","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"initializes both players with 100 health"},{"ancestorTitles":["KidsFightScene - Health, Damage, and Win Logic"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Health, Damage, and Win Logic applies normal attack damage of 5","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"applies normal attack damage of 5"},{"ancestorTitles":["KidsFightScene - Health, Damage, and Win Logic"],"duration":6,"failureDetails":[{"matcherResult":{"actual":85,"expected":90,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m90\u001b[39m\nReceived: \u001b[31m85\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m90\u001b[39m\nReceived: \u001b[31m85\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_health_and_attack_logic.test.ts:325:35)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene - Health, Damage, and Win Logic applies special attack damage of 10","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"applies special attack damage of 10"},{"ancestorTitles":["KidsFightScene - Health, Damage, and Win Logic"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Health, Damage, and Win Logic respects attack cooldown","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"respects attack cooldown"},{"ancestorTitles":["KidsFightScene - Health, Damage, and Win Logic"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Health, Damage, and Win Logic does not allow attacks when game is over","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"does not allow attacks when game is over"},{"ancestorTitles":["KidsFightScene - Health, Damage, and Win Logic"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Health, Damage, and Win Logic clamps health between 0 and 100","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"clamps health between 0 and 100"},{"ancestorTitles":["KidsFightScene - Health, Damage, and Win Logic"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Health, Damage, and Win Logic triggers game over when a player reaches 0 health","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"triggers game over when a player reaches 0 health"},{"ancestorTitles":["KidsFightScene - Health, Damage, and Win Logic"],"duration":18,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Health, Damage, and Win Logic prevents double-processing of attacks (host only applies attack)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"prevents double-processing of attacks (host only applies attack)"},{"ancestorTitles":["KidsFightScene - Health, Damage, and Win Logic"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Health, Damage, and Win Logic special attack logic","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"special attack logic"}],"endTime":1750397508704,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene - Health, Damage, and Win Logic › applies special attack damage of 10\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m90\u001b[39m\n    Received: \u001b[31m85\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 323 |\u001b[39m   it(\u001b[32m'applies special attack damage of 10'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 324 |\u001b[39m     scene\u001b[33m.\u001b[39mtryAttack(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m now\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 325 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayerHealth[\u001b[35m1\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[35m90\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 326 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayers[\u001b[35m1\u001b[39m]\u001b[33m.\u001b[39mhealth)\u001b[33m.\u001b[39mtoBe(\u001b[35m90\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 327 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 328 |\u001b[39m   \u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_health_and_attack_logic.test.ts\u001b[39m\u001b[0m\u001b[2m:325:35)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_health_and_attack_logic.test.ts","startTime":1750397507122,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["PlayerSelectScene","create"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene create should create UI elements with correct positions and styles","invocations":1,"location":null,"numPassingAsserts":13,"retryReasons":[],"status":"passed","title":"should create UI elements with correct positions and styles"},{"ancestorTitles":["PlayerSelectScene","character selection"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene character selection should handle character selection","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle character selection"},{"ancestorTitles":["PlayerSelectScene","character selection"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene character selection should handle character deselection","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle character deselection"},{"ancestorTitles":["PlayerSelectScene","ready state"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene ready state should handle player ready state","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle player ready state"},{"ancestorTitles":["PlayerSelectScene","start game"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene start game should start game regardless of player readiness","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should start game regardless of player readiness"},{"ancestorTitles":["PlayerSelectScene","UI layout and responsive changes"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene UI layout and responsive changes should set the title to two lines and center it","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should set the title to two lines and center it"},{"ancestorTitles":["PlayerSelectScene","UI layout and responsive changes"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene UI layout and responsive changes should use a reduced grid height for character positions","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should use a reduced grid height for character positions"},{"ancestorTitles":["PlayerSelectScene","UI layout and responsive changes"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene UI layout and responsive changes should centralize the Voltar and COMEÇAR buttons at the bottom","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should centralize the Voltar and COMEÇAR buttons at the bottom"}],"endTime":1750397508764,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/player_select_scene.test.ts","startTime":1750397508645,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["handleRemoteAction"],"duration":6,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m160\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m160\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/handle_remote_action.test.ts:185:43)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"handleRemoteAction should handle move action for player 1","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle move action for player 1"},{"ancestorTitles":["handleRemoteAction"],"duration":6,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m160\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m160\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/handle_remote_action.test.ts:206:43)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"handleRemoteAction should handle move action for player 2","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle move action for player 2"},{"ancestorTitles":["handleRemoteAction"],"duration":4,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m-330\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m-330\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/handle_remote_action.test.ts:216:43)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"handleRemoteAction should handle jump action","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle jump action"},{"ancestorTitles":["handleRemoteAction"],"duration":34,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"isBlocking\"\u001b[39m, \u001b[32mtrue\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"isBlocking\"\u001b[39m, \u001b[32mtrue\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/handle_remote_action.test.ts:229:38)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"handleRemoteAction should handle block action","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle block action"},{"ancestorTitles":["handleRemoteAction"],"duration":6,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\nExpected number of calls: >= \u001b[32m1\u001b[39m\nReceived number of calls:    \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\nExpected number of calls: >= \u001b[32m1\u001b[39m\nReceived number of calls:    \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/handle_remote_action.test.ts:248:27)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"handleRemoteAction should handle attack action","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle attack action"},{"ancestorTitles":["handleRemoteAction"],"duration":3,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m0\u001b[39m, \u001b[32m1\u001b[39m, \u001b[32m1750397508549\u001b[39m, \u001b[32mtrue\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m0\u001b[39m, \u001b[32m1\u001b[39m, \u001b[32m1750397508549\u001b[39m, \u001b[32mtrue\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/handle_remote_action.test.ts:276:27)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"handleRemoteAction should handle special action","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle special action"},{"ancestorTitles":["handleRemoteAction"],"duration":51,"failureDetails":[],"failureMessages":[],"fullName":"handleRemoteAction should not process actions when game is over","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should not process actions when game is over"},{"ancestorTitles":["handleRemoteAction"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"handleRemoteAction should not process actions when not in online mode","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not process actions when not in online mode"}],"endTime":1750397508698,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mhandleRemoteAction › should handle move action for player 1\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m160\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 183 |\u001b[39m     \u001b[90m// Test moving right\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 184 |\u001b[39m     scene\u001b[33m.\u001b[39mtestHandleRemoteAction({ type\u001b[33m:\u001b[39m \u001b[32m'move'\u001b[39m\u001b[33m,\u001b[39m playerIndex\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m direction\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 185 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayers[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39msetVelocityX)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m160\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 186 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayers[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39msetFlipX)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 187 |\u001b[39m     expect((scene \u001b[36mas\u001b[39m any)\u001b[33m.\u001b[39mplayerDirection[\u001b[35m0\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[32m'right'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 188 |\u001b[39m     \u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/handle_remote_action.test.ts\u001b[39m\u001b[0m\u001b[2m:185:43)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mhandleRemoteAction › should handle move action for player 2\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m160\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 204 |\u001b[39m     \u001b[90m// Test moving right for player 2 (should be mirrored)\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 205 |\u001b[39m     scene\u001b[33m.\u001b[39mtestHandleRemoteAction({ type\u001b[33m:\u001b[39m \u001b[32m'move'\u001b[39m\u001b[33m,\u001b[39m playerIndex\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m direction\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 206 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayers[\u001b[35m1\u001b[39m]\u001b[33m.\u001b[39msetVelocityX)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m160\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 207 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayers[\u001b[35m1\u001b[39m]\u001b[33m.\u001b[39msetFlipX)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 208 |\u001b[39m     \u001b[90m// Player 2's direction is initially 'left', moving right should change it to 'right'\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 209 |\u001b[39m     expect((scene \u001b[36mas\u001b[39m any)\u001b[33m.\u001b[39mplayerDirection[\u001b[35m1\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[32m'right'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/handle_remote_action.test.ts\u001b[39m\u001b[0m\u001b[2m:206:43)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mhandleRemoteAction › should handle jump action\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m-330\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 214 |\u001b[39m     scene\u001b[33m.\u001b[39mplayers[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mtouching\u001b[33m.\u001b[39mdown \u001b[33m=\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 215 |\u001b[39m     scene\u001b[33m.\u001b[39mtestHandleRemoteAction({ type\u001b[33m:\u001b[39m \u001b[32m'jump'\u001b[39m\u001b[33m,\u001b[39m playerIndex\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 216 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayers[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39msetVelocityY)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[33m-\u001b[39m\u001b[35m330\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 217 |\u001b[39m     \u001b[22m\n\u001b[2m     \u001b[90m 218 |\u001b[39m     \u001b[90m// Test jump when in air (should still try to jump)\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 219 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/handle_remote_action.test.ts\u001b[39m\u001b[0m\u001b[2m:216:43)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mhandleRemoteAction › should handle block action\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m\"isBlocking\"\u001b[39m, \u001b[32mtrue\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 227 |\u001b[39m     \u001b[90m// Test blocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 228 |\u001b[39m     scene\u001b[33m.\u001b[39mtestHandleRemoteAction({ type\u001b[33m:\u001b[39m \u001b[32m'block'\u001b[39m\u001b[33m,\u001b[39m playerIndex\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m active\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 229 |\u001b[39m     expect(scene\u001b[33m.\u001b[39mplayers[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39msetData)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'isBlocking'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 230 |\u001b[39m     expect((scene \u001b[36mas\u001b[39m any)\u001b[33m.\u001b[39mplayerBlocking[\u001b[35m0\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 231 |\u001b[39m     \u001b[22m\n\u001b[2m     \u001b[90m 232 |\u001b[39m     \u001b[90m// Test unblocking\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/handle_remote_action.test.ts\u001b[39m\u001b[0m\u001b[2m:229:38)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mhandleRemoteAction › should handle attack action\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\n    Expected number of calls: >= \u001b[32m1\u001b[39m\n    Received number of calls:    \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 246 |\u001b[39m     \u001b[90m// Test attack for player 1\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 247 |\u001b[39m     scene\u001b[33m.\u001b[39mtestHandleRemoteAction({ type\u001b[33m:\u001b[39m \u001b[32m'attack'\u001b[39m\u001b[33m,\u001b[39m playerIndex\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 248 |\u001b[39m     expect(mockTryAttack)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 249 |\u001b[39m     \u001b[22m\n\u001b[2m     \u001b[90m 250 |\u001b[39m     \u001b[90m// Test attack for player 2\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 251 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/handle_remote_action.test.ts\u001b[39m\u001b[0m\u001b[2m:248:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mhandleRemoteAction › should handle special action\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m0\u001b[39m, \u001b[32m1\u001b[39m, \u001b[32m1750397508549\u001b[39m, \u001b[32mtrue\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 274 |\u001b[39m     \u001b[90m// Test special for player 1\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 275 |\u001b[39m     scene\u001b[33m.\u001b[39mtestHandleRemoteAction({ type\u001b[33m:\u001b[39m \u001b[32m'special'\u001b[39m\u001b[33m,\u001b[39m playerIndex\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 276 |\u001b[39m     expect(mockTryAttack)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m now\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 277 |\u001b[39m     \u001b[22m\n\u001b[2m     \u001b[90m 278 |\u001b[39m     \u001b[90m// Test special for player 2\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 279 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/handle_remote_action.test.ts\u001b[39m\u001b[0m\u001b[2m:276:27)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/handle_remote_action.test.ts","startTime":1750397507142,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene - Online Mode","Player Movement"],"duration":100,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m160\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m160\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_online_mode.fixed.test.ts:441:45)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene - Online Mode Player Movement should allow players[1] movement as guest in online mode","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow players[1] movement as guest in online mode"},{"ancestorTitles":["KidsFightScene - Online Mode","Player Movement"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Online Mode Player Movement should NOT move players[1] as host in online mode","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should NOT move players[1] as host in online mode"},{"ancestorTitles":["KidsFightScene - Online Mode","Player Movement"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Online Mode Player Movement should send movement actions through WebSocket for players[0] as host","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should send movement actions through WebSocket for players[0] as host"},{"ancestorTitles":["KidsFightScene - Online Mode","Player Movement","Remote Actions"],"duration":2,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m160\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m160\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_online_mode.fixed.test.ts:483:47)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene - Online Mode Player Movement Remote Actions should handle remote movement actions","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle remote movement actions"},{"ancestorTitles":["KidsFightScene - Online Mode","Player Movement","Remote Actions"],"duration":54,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m-330\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m-330\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_online_mode.fixed.test.ts:494:47)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene - Online Mode Player Movement Remote Actions should handle remote jump actions","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle remote jump actions"},{"ancestorTitles":["KidsFightScene - Online Mode","Player Movement","Remote Actions"],"duration":95,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m0\u001b[39m, \u001b[32m1\u001b[39m, \u001b[32mAny<Number>\u001b[39m, \u001b[32mfalse\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m0\u001b[39m, \u001b[32m1\u001b[39m, \u001b[32mAny<Number>\u001b[39m, \u001b[32mfalse\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_online_mode.fixed.test.ts:503:33)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene - Online Mode Player Movement Remote Actions should handle remote attack actions","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle remote attack actions"},{"ancestorTitles":["KidsFightScene - Online Mode","Player Movement","Remote Actions"],"duration":19,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m0\u001b[39m, \u001b[32m1\u001b[39m, \u001b[32mAny<Number>\u001b[39m, \u001b[32mtrue\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m0\u001b[39m, \u001b[32m1\u001b[39m, \u001b[32mAny<Number>\u001b[39m, \u001b[32mtrue\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_online_mode.fixed.test.ts:513:33)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene - Online Mode Player Movement Remote Actions should handle remote special actions","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle remote special actions"},{"ancestorTitles":["KidsFightScene - Online Mode","Player Movement","Remote Actions"],"duration":8,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"isBlocking\"\u001b[39m, \u001b[32mtrue\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"isBlocking\"\u001b[39m, \u001b[32mtrue\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_online_mode.fixed.test.ts:523:42)\n    at Promise.then.completed (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/ivan/projects/kidsfight/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/ivan/projects/kidsfight/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"KidsFightScene - Online Mode Player Movement Remote Actions should handle remote block actions","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle remote block actions"}],"endTime":1750397508685,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene - Online Mode › Player Movement › should allow players[1] movement as guest in online mode\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m160\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 439 |\u001b[39m       scene\u001b[33m.\u001b[39mupdatePlayerAnimation \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 440 |\u001b[39m       scene\u001b[33m.\u001b[39mhandleRemoteAction({ type\u001b[33m:\u001b[39m \u001b[32m'move'\u001b[39m\u001b[33m,\u001b[39m playerIndex\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m direction\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 441 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mplayers[\u001b[35m1\u001b[39m]\u001b[33m.\u001b[39msetVelocityX)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m160\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 442 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mplayers[\u001b[35m1\u001b[39m]\u001b[33m.\u001b[39msetFlipX)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 443 |\u001b[39m       expect(scene\u001b[33m.\u001b[39mplayerDirection[\u001b[35m1\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[32m'right'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 444 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_online_mode.fixed.test.ts\u001b[39m\u001b[0m\u001b[2m:441:45)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene - Online Mode › Player Movement › Remote Actions › should handle remote movement actions\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m160\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 481 |\u001b[39m         \u001b[36mconst\u001b[39m moveAction \u001b[33m=\u001b[39m { type\u001b[33m:\u001b[39m \u001b[32m'move'\u001b[39m\u001b[33m,\u001b[39m playerIndex\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m direction\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 482 |\u001b[39m         scene\u001b[33m.\u001b[39mhandleRemoteAction(moveAction)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 483 |\u001b[39m         expect(scene\u001b[33m.\u001b[39mplayers[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39msetVelocityX)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m160\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 484 |\u001b[39m         expect(scene\u001b[33m.\u001b[39mplayers[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39msetFlipX)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 485 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 486 |\u001b[39m       \u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_online_mode.fixed.test.ts\u001b[39m\u001b[0m\u001b[2m:483:47)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene - Online Mode › Player Movement › Remote Actions › should handle remote jump actions\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m-330\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 492 |\u001b[39m         \u001b[36mconst\u001b[39m jumpAction \u001b[33m=\u001b[39m { type\u001b[33m:\u001b[39m \u001b[32m'jump'\u001b[39m\u001b[33m,\u001b[39m playerIndex\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 493 |\u001b[39m         scene\u001b[33m.\u001b[39mhandleRemoteAction(jumpAction)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 494 |\u001b[39m         expect(scene\u001b[33m.\u001b[39mplayers[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39msetVelocityY)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[33m-\u001b[39m\u001b[35m330\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 495 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 496 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 497 |\u001b[39m       it(\u001b[32m'should handle remote attack actions'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_online_mode.fixed.test.ts\u001b[39m\u001b[0m\u001b[2m:494:47)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene - Online Mode › Player Movement › Remote Actions › should handle remote attack actions\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m0\u001b[39m, \u001b[32m1\u001b[39m, \u001b[32mAny<Number>\u001b[39m, \u001b[32mfalse\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 501 |\u001b[39m         \u001b[36mconst\u001b[39m attackAction \u001b[33m=\u001b[39m { type\u001b[33m:\u001b[39m \u001b[32m'attack'\u001b[39m\u001b[33m,\u001b[39m playerIndex\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 502 |\u001b[39m         scene\u001b[33m.\u001b[39mhandleRemoteAction(attackAction)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 503 |\u001b[39m         expect(scene\u001b[33m.\u001b[39mtryAttack)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mNumber\u001b[39m)\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 504 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 505 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 506 |\u001b[39m       it(\u001b[32m'should handle remote special actions'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_online_mode.fixed.test.ts\u001b[39m\u001b[0m\u001b[2m:503:33)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene - Online Mode › Player Movement › Remote Actions › should handle remote special actions\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m0\u001b[39m, \u001b[32m1\u001b[39m, \u001b[32mAny<Number>\u001b[39m, \u001b[32mtrue\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 511 |\u001b[39m         \u001b[36mconst\u001b[39m specialAction \u001b[33m=\u001b[39m { type\u001b[33m:\u001b[39m \u001b[32m'special'\u001b[39m\u001b[33m,\u001b[39m playerIndex\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 512 |\u001b[39m         scene\u001b[33m.\u001b[39mhandleRemoteAction(specialAction)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 513 |\u001b[39m         expect(scene\u001b[33m.\u001b[39mtryAttack)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mNumber\u001b[39m)\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 514 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 515 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 516 |\u001b[39m       it(\u001b[32m'should handle remote block actions'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_online_mode.fixed.test.ts\u001b[39m\u001b[0m\u001b[2m:513:33)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mKidsFightScene - Online Mode › Player Movement › Remote Actions › should handle remote block actions\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m\"isBlocking\"\u001b[39m, \u001b[32mtrue\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 521 |\u001b[39m         \u001b[36mconst\u001b[39m blockAction \u001b[33m=\u001b[39m { type\u001b[33m:\u001b[39m \u001b[32m'block'\u001b[39m\u001b[33m,\u001b[39m playerIndex\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m active\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 522 |\u001b[39m         scene\u001b[33m.\u001b[39mhandleRemoteAction(blockAction)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 523 |\u001b[39m         expect(scene\u001b[33m.\u001b[39mplayers[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39msetData)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'isBlocking'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 524 |\u001b[39m         expect(scene\u001b[33m.\u001b[39mplayerBlocking[\u001b[35m0\u001b[39m])\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 525 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 526 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/kidsfight_scene_online_mode.fixed.test.ts\u001b[39m\u001b[0m\u001b[2m:523:42)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_online_mode.fixed.test.ts","startTime":1750397507047,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Test setup"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Test setup should pass","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should pass"},{"ancestorTitles":["WebSocketManager"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager should connect to the WebSocket server","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should connect to the WebSocket server"},{"ancestorTitles":["WebSocketManager"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager should resolve when connection is established","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should resolve when connection is established"},{"ancestorTitles":["WebSocketManager"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager should send a message through the WebSocket","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should send a message through the WebSocket"},{"ancestorTitles":["WebSocketManager"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager should call the message handler when a message is received","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should call the message handler when a message is received"},{"ancestorTitles":["WebSocketManager"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager should track connection status correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should track connection status correctly"},{"ancestorTitles":["WebSocketManager"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager should send a game action message","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should send a game action message"},{"ancestorTitles":["WebSocketManager"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager should handle connection close correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle connection close correctly"},{"ancestorTitles":["WebSocketManager"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager should reconnect after disconnection","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should reconnect after disconnection"},{"ancestorTitles":["WebSocketManager"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager should handle multiple message callbacks","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should handle multiple message callbacks"},{"ancestorTitles":["WebSocketManager"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager should set and get host status","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should set and get host status"},{"ancestorTitles":["WebSocketManager"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager should set and get room code","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should set and get room code"},{"ancestorTitles":["message handling"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"message handling should handle incoming messages","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle incoming messages"},{"ancestorTitles":["message handling"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"message handling should send messages","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should send messages"},{"ancestorTitles":["host and room code"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"host and room code should set and get host status","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should set and get host status"},{"ancestorTitles":["host and room code"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"host and room code should set and get room code","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should set and get room code"},{"ancestorTitles":[],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"MockWebSocket class should call last message callback","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"MockWebSocket class should call last message callback"}],"endTime":1750397508784,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/websocket_manager.test.ts","startTime":1750397508708,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["ScenarioSelectScene Guest Character Sync"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene Guest Character Sync should update selected.p2 when host receives guest character selection","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should update selected.p2 when host receives guest character selection"},{"ancestorTitles":["ScenarioSelectScene Guest Character Sync"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene Guest Character Sync should update selected.p1 when host receives host character selection","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should update selected.p1 when host receives host character selection"}],"endTime":1750397508880,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/scenario_select_scene.guest_char_sync.test.ts","startTime":1750397508811,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["ScenarioSelectScene - WebSocket Message Parsing","WebSocket Message Parsing Tests"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene - WebSocket Message Parsing WebSocket Message Parsing Tests should handle JSON string message data correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle JSON string message data correctly"},{"ancestorTitles":["ScenarioSelectScene - WebSocket Message Parsing","WebSocket Message Parsing Tests"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene - WebSocket Message Parsing WebSocket Message Parsing Tests should handle already-parsed object message data correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle already-parsed object message data correctly"},{"ancestorTitles":["ScenarioSelectScene - WebSocket Message Parsing","WebSocket Message Parsing Tests"],"duration":15,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene - WebSocket Message Parsing WebSocket Message Parsing Tests should handle malformed data gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle malformed data gracefully"},{"ancestorTitles":["ScenarioSelectScene - Online Ready & Game Start Logic"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene - Online Ready & Game Start Logic host starts game when both ready","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"host starts game when both ready"},{"ancestorTitles":["ScenarioSelectScene - Online Ready & Game Start Logic"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene - Online Ready & Game Start Logic guest transitions on receiving game_start","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"guest transitions on receiving game_start"},{"ancestorTitles":["ScenarioSelectScene - Online Ready & Game Start Logic"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene - Online Ready & Game Start Logic gameStarted is only set when starting the game","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"gameStarted is only set when starting the game"},{"ancestorTitles":["ScenarioSelectScene - Online Ready & Game Start Logic"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene - Online Ready & Game Start Logic scene.start is only called once per player","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"scene.start is only called once per player"}],"endTime":1750397508883,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/scenario_select_scene_online.test.ts","startTime":1750397508789,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["ScenarioSelectScene (online mode)"],"duration":49,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene (online mode) host starts the game and sends game_start message when ready button is clicked","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"host starts the game and sends game_start message when ready button is clicked"},{"ancestorTitles":["ScenarioSelectScene (online mode)"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene (online mode) guest transitions to KidsFightScene on game_start message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"guest transitions to KidsFightScene on game_start message"},{"ancestorTitles":["ScenarioSelectScene (online mode)"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene (online mode) host starts the game and sends game_start message when ready button is clicked (secondary test)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"host starts the game and sends game_start message when ready button is clicked (secondary test)"}],"endTime":1750397508943,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/scenario_select_scene.test.ts","startTime":1750397508800,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["ScenarioSelectScene Host Transition Tests","Host Game Start Flow"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene Host Transition Tests Host Game Start Flow should send game_start message and transition to game scene after timeout when host starts game","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should send game_start message and transition to game scene after timeout when host starts game"},{"ancestorTitles":["ScenarioSelectScene Host Transition Tests","Host Game Start Flow"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene Host Transition Tests Host Game Start Flow should respect cooldown period between game start attempts","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should respect cooldown period between game start attempts"},{"ancestorTitles":["ScenarioSelectScene Host Transition Tests","_transitionToGame Helper Method"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene Host Transition Tests _transitionToGame Helper Method should correctly transition to KidsFightScene with provided data","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should correctly transition to KidsFightScene with provided data"},{"ancestorTitles":["ScenarioSelectScene Host Transition Tests","_transitionToGame Helper Method"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene Host Transition Tests _transitionToGame Helper Method should handle missing data with default values","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle missing data with default values"},{"ancestorTitles":["ScenarioSelectScene Host Transition Tests","_transitionToGame Helper Method"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene Host Transition Tests _transitionToGame Helper Method should handle errors during transition","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle errors during transition"},{"ancestorTitles":["ScenarioSelectScene Host Transition Tests","validateCharacterKey Method"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene Host Transition Tests validateCharacterKey Method should return valid character keys unchanged","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return valid character keys unchanged"},{"ancestorTitles":["ScenarioSelectScene Host Transition Tests","validateCharacterKey Method"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene Host Transition Tests validateCharacterKey Method should clean up keys with _select suffix","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should clean up keys with _select suffix"},{"ancestorTitles":["ScenarioSelectScene Host Transition Tests","validateCharacterKey Method"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene Host Transition Tests validateCharacterKey Method should return player1 for invalid keys","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return player1 for invalid keys"},{"ancestorTitles":["ScenarioSelectScene Host Transition Tests","WebSocket Message Handler"],"duration":84,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene Host Transition Tests WebSocket Message Handler should handle game_start message and transition to game scene","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle game_start message and transition to game scene"},{"ancestorTitles":["ScenarioSelectScene Host Transition Tests","WebSocket Message Handler"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene Host Transition Tests WebSocket Message Handler should ignore duplicate game_start messages","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should ignore duplicate game_start messages"},{"ancestorTitles":["ScenarioSelectScene Host Transition Tests","WebSocket Message Handler"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene Host Transition Tests WebSocket Message Handler should handle player_ready messages and update ready states","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle player_ready messages and update ready states"},{"ancestorTitles":["ScenarioSelectScene Host Transition Tests","Shutdown Method"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene Host Transition Tests Shutdown Method should clean up WebSocket handlers and reset state","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should clean up WebSocket handlers and reset state"},{"ancestorTitles":["ScenarioSelectScene Host Transition Tests","Shutdown Method"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene Host Transition Tests Shutdown Method should send scene_change message when in online mode","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should send scene_change message when in online mode"},{"ancestorTitles":["ScenarioSelectScene Host Transition Tests","Shutdown Method"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene Host Transition Tests Shutdown Method should not send scene_change message when in local mode","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not send scene_change message when in local mode"}],"endTime":1750397508953,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/scenario_select_scene.host_transition.test.ts","startTime":1750397508779,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["WebSocket Server"],"duration":56,"failureDetails":[],"failureMessages":[],"fullName":"WebSocket Server should include playerIndex and isHost in game_joined and game_start messages","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should include playerIndex and isHost in game_joined and game_start messages"},{"ancestorTitles":["WebSocket Server"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"WebSocket Server should use 111111 as room code only in local dev, otherwise random","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should use 111111 as room code only in local dev, otherwise random"},{"ancestorTitles":["WebSocket Server"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"WebSocket Server should create a room and respond with room code","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should create a room and respond with room code"},{"ancestorTitles":["WebSocket Server"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"WebSocket Server should allow a client to join an existing room","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should allow a client to join an existing room"},{"ancestorTitles":["WebSocket Server"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"WebSocket Server should not join a non-existent room","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should not join a non-existent room"},{"ancestorTitles":["WebSocket Server"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"WebSocket Server should not join a full room","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should not join a full room"},{"ancestorTitles":["WebSocket Server"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"WebSocket Server should forward game_action between host and client","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should forward game_action between host and client"}],"endTime":1750397508947,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/server.test.js","startTime":1750397508706,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Player Selection Behaviour","Character Selection"],"duration":48,"failureDetails":[],"failureMessages":[],"fullName":"Player Selection Behaviour Character Selection should allow player 1 to select a character in local mode","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should allow player 1 to select a character in local mode"},{"ancestorTitles":["Player Selection Behaviour","Character Selection"],"duration":21,"failureDetails":[],"failureMessages":[],"fullName":"Player Selection Behaviour Character Selection should alternate between players in local mode","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should alternate between players in local mode"},{"ancestorTitles":["Player Selection Behaviour","Character Selection"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"Player Selection Behaviour Character Selection should only allow player 1 to select in online mode","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should only allow player 1 to select in online mode"},{"ancestorTitles":["Player Selection Behaviour","Character Selection"],"duration":17,"failureDetails":[],"failureMessages":[],"fullName":"Player Selection Behaviour Character Selection should send player selection to WebSocket in online mode","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should send player selection to WebSocket in online mode"},{"ancestorTitles":["Player Selection Behaviour","Character Selection"],"duration":31,"failureDetails":[],"failureMessages":[],"fullName":"Player Selection Behaviour Character Selection should update selection indicators when characters are selected","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should update selection indicators when characters are selected"},{"ancestorTitles":["Player Selection Behaviour","Character Selection","WebSocket Integration"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"Player Selection Behaviour Character Selection WebSocket Integration should send player selection to WebSocket in online mode","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should send player selection to WebSocket in online mode"},{"ancestorTitles":["Player Selection Behaviour","Character Selection","WebSocket Integration"],"duration":17,"failureDetails":[],"failureMessages":[],"fullName":"Player Selection Behaviour Character Selection WebSocket Integration should send player selection to WebSocket in online mode","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should send player selection to WebSocket in online mode"},{"ancestorTitles":["Player Selection Behaviour","Character Selection","WebSocket Integration"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"Player Selection Behaviour Character Selection WebSocket Integration should send player selection to WebSocket in online mode","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should send player selection to WebSocket in online mode"},{"ancestorTitles":["Player Selection Behaviour","Character Selection","Selection Indicators"],"duration":20,"failureDetails":[],"failureMessages":[],"fullName":"Player Selection Behaviour Character Selection Selection Indicators should update selection indicators when characters are selected","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should update selection indicators when characters are selected"}],"endTime":1750397508853,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/player_selection_behaviour.test.ts","startTime":1750397508616,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["WebSocket Scene Communication","WebSocket Manager Passing Between Scenes"],"duration":75,"failureDetails":[],"failureMessages":[],"fullName":"WebSocket Scene Communication WebSocket Manager Passing Between Scenes should pass WebSocketManager from PlayerSelectScene to ScenarioSelectScene","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should pass WebSocketManager from PlayerSelectScene to ScenarioSelectScene"},{"ancestorTitles":["WebSocket Scene Communication","Host Sending game_start Message"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"WebSocket Scene Communication Host Sending game_start Message should send game_start message when host clicks ready in ScenarioSelectScene","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should send game_start message when host clicks ready in ScenarioSelectScene"},{"ancestorTitles":["WebSocket Scene Communication","Guest Receiving game_start Message"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"WebSocket Scene Communication Guest Receiving game_start Message should transition to KidsFightScene when guest receives game_start message","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should transition to KidsFightScene when guest receives game_start message"},{"ancestorTitles":["WebSocket Scene Communication","Guest Receiving game_start Message"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"WebSocket Scene Communication Guest Receiving game_start Message should handle both snake_case and camelCase message types","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should handle both snake_case and camelCase message types"},{"ancestorTitles":["WebSocket Scene Communication","WebSocketManager send method"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"WebSocket Scene Communication WebSocketManager send method should not double-stringify objects","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not double-stringify objects"}],"endTime":1750397508963,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/websocket_scene_communication.test.ts","startTime":1750397508785,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["gameUtils.ts","updateSceneLayout"],"duration":18,"failureDetails":[],"failureMessages":[],"fullName":"gameUtils.ts updateSceneLayout positions players at the correct x and y coordinates","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"positions players at the correct x and y coordinates"},{"ancestorTitles":["gameUtils.ts","updateSceneLayout"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"gameUtils.ts updateSceneLayout positions platform correctly relative to player position","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"positions platform correctly relative to player position"},{"ancestorTitles":["gameUtils.ts","updateSceneLayout"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"gameUtils.ts updateSceneLayout positions and sizes health bars correctly","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"positions and sizes health bars correctly"},{"ancestorTitles":["gameUtils.ts","updateSceneLayout"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"gameUtils.ts updateSceneLayout positions and sizes special bars correctly","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"positions and sizes special bars correctly"},{"ancestorTitles":["gameUtils.ts","updateSceneLayout"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"gameUtils.ts updateSceneLayout positions background at center of screen with appropriate scaling","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"positions background at center of screen with appropriate scaling"}],"endTime":1750397508960,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/gameUtils.ts.test.ts","startTime":1750397508859,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene","Initialization"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Initialization should initialize with default values","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should initialize with default values"},{"ancestorTitles":["KidsFightScene","Player Movement"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Player Movement should handle player movement","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle player movement"},{"ancestorTitles":["KidsFightScene","Player Movement"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Player Movement should handle player jump","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle player jump"},{"ancestorTitles":["KidsFightScene","Player Actions"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Player Actions should handle player attack","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle player attack"},{"ancestorTitles":["KidsFightScene","Player Actions"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Player Actions should handle player block","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle player block"},{"ancestorTitles":["KidsFightScene","Hit Effects"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Hit Effects should show hit effects at the correct position","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should show hit effects at the correct position"}],"endTime":1750397508989,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene.fixed.test.ts","startTime":1750397508963,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene Integration"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Integration should initialize with default values","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should initialize with default values"},{"ancestorTitles":["KidsFightScene Integration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Integration should handle player movement","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle player movement"},{"ancestorTitles":["KidsFightScene Integration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Integration should handle player attacks","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle player attacks"},{"ancestorTitles":["KidsFightScene Integration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Integration should show hit effects","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should show hit effects"}],"endTime":1750397508993,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene.integration.test.ts","startTime":1750397508962,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["PlayerSelectScene UI"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene UI creates selector circles aligned with face backgrounds","invocations":1,"location":null,"numPassingAsserts":15,"retryReasons":[],"status":"passed","title":"creates selector circles aligned with face backgrounds"},{"ancestorTitles":["PlayerSelectScene UI"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene UI selector moves to correct position on player click","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"selector moves to correct position on player click"},{"ancestorTitles":["PlayerSelectScene UI"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene UI passes correct player and scenario to KidsFightScene","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"passes correct player and scenario to KidsFightScene"},{"ancestorTitles":["PlayerSelectScene UI"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene UI handleCharacterSelect updates selection and moves selector","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handleCharacterSelect updates selection and moves selector"},{"ancestorTitles":["PlayerSelectScene UI"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene UI start button is offset slightly to the left","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"start button is offset slightly to the left"},{"ancestorTitles":["PlayerSelectScene UI"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene UI player sprites are created with correct origin, scale, and y-alignment","invocations":1,"location":null,"numPassingAsserts":28,"retryReasons":[],"status":"passed","title":"player sprites are created with correct origin, scale, and y-alignment"},{"ancestorTitles":["PlayerSelectScene UI"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene UI character sprites use correct frame size (256x512)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"character sprites use correct frame size (256x512)"},{"ancestorTitles":["PlayerSelectScene UI"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene UI character selection wraps correctly at boundaries","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"character selection wraps correctly at boundaries"},{"ancestorTitles":["PlayerSelectScene UI"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene UI selector indicators remain at y=360 after character select","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"selector indicators remain at y=360 after character select"},{"ancestorTitles":["PlayerSelectScene UI"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene UI handles missing spritesheet gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles missing spritesheet gracefully"}],"endTime":1750397508736,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/playerSelectScene.ui.test.cjs","startTime":1750397508669,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Game Logic","Basic Combat"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Game Logic Basic Combat should apply normal attack damage","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should apply normal attack damage"},{"ancestorTitles":["Game Logic","Basic Combat"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Game Logic Basic Combat should apply special attack damage","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should apply special attack damage"},{"ancestorTitles":["Game Logic","Basic Combat"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Game Logic Basic Combat should respect attack cooldown","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should respect attack cooldown"},{"ancestorTitles":["Game Logic","Basic Combat"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Game Logic Basic Combat should respect special attack cooldown","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should respect special attack cooldown"},{"ancestorTitles":["Game Logic","Basic Combat"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Game Logic Basic Combat should require special points for special attacks","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should require special points for special attacks"},{"ancestorTitles":["Game Logic","Basic Combat"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Game Logic Basic Combat should not allow health to go below 0","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not allow health to go below 0"},{"ancestorTitles":["Game Logic","Win Conditions"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Game Logic Win Conditions should detect player 1 win when player 2 health reaches 0","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should detect player 1 win when player 2 health reaches 0"},{"ancestorTitles":["Game Logic","Win Conditions"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Game Logic Win Conditions should detect player 2 win when player 1 health reaches 0","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should detect player 2 win when player 1 health reaches 0"},{"ancestorTitles":["Game Logic","Win Conditions"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Game Logic Win Conditions should return null when no player has won","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return null when no player has won"},{"ancestorTitles":["Game Logic","Full Game Simulation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Game Logic Full Game Simulation should take 20 normal hits to win","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should take 20 normal hits to win"},{"ancestorTitles":["Game Logic","Full Game Simulation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Game Logic Full Game Simulation should take 10 special hits to win","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should take 10 special hits to win"}],"endTime":1750397509016,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/game_logic.test.ts","startTime":1750397508991,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene - Online Mode","Player Movement"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Online Mode Player Movement should allow players[0] movement as host in online mode","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should allow players[0] movement as host in online mode"},{"ancestorTitles":["KidsFightScene - Online Mode","Player Movement"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Online Mode Player Movement should allow players[1] movement as guest in online mode","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should allow players[1] movement as guest in online mode"},{"ancestorTitles":["KidsFightScene - Online Mode","Player Movement"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Online Mode Player Movement should NOT move players[1] as host in online mode","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should NOT move players[1] as host in online mode"},{"ancestorTitles":["KidsFightScene - Online Mode","Player Movement"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Online Mode Player Movement should handle remote movement actions","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle remote movement actions"},{"ancestorTitles":["KidsFightScene - Online Mode","Player Movement"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Online Mode Player Movement should handle remote jump actions","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle remote jump actions"},{"ancestorTitles":["KidsFightScene - Online Mode","Attacks and Specials"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Online Mode Attacks and Specials should handle remote attack actions","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle remote attack actions"},{"ancestorTitles":["KidsFightScene - Online Mode","Attacks and Specials"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - Online Mode Attacks and Specials should handle remote block actions","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle remote block actions"}],"endTime":1750397509014,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_online_mode.test.ts","startTime":1750397508980,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Test setup"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Test setup should pass","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should pass"},{"ancestorTitles":["WebSocketManager Position and Health Updates","sendPositionUpdate"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager Position and Health Updates sendPositionUpdate should send player position updates with correct coordinates","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should send player position updates with correct coordinates"},{"ancestorTitles":["WebSocketManager Position and Health Updates","sendPositionUpdate"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager Position and Health Updates sendPositionUpdate should send position updates for second player at the correct position","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should send position updates for second player at the correct position"},{"ancestorTitles":["WebSocketManager Position and Health Updates","sendPositionUpdate"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager Position and Health Updates sendPositionUpdate should return false if not connected","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return false if not connected"},{"ancestorTitles":["WebSocketManager Position and Health Updates","sendHealthUpdate"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager Position and Health Updates sendHealthUpdate should send player health updates with correct values","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should send player health updates with correct values"},{"ancestorTitles":["WebSocketManager Position and Health Updates","sendHealthUpdate"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager Position and Health Updates sendHealthUpdate should return false if not connected","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return false if not connected"},{"ancestorTitles":["WebSocketManager Position and Health Updates","sendReplayRequest and sendReplayResponse"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager Position and Health Updates sendReplayRequest and sendReplayResponse should send replay request with correct match and player IDs","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should send replay request with correct match and player IDs"},{"ancestorTitles":["WebSocketManager Position and Health Updates","sendReplayRequest and sendReplayResponse"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager Position and Health Updates sendReplayRequest and sendReplayResponse should send replay response with acceptance status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should send replay response with acceptance status"},{"ancestorTitles":["WebSocketManager Position and Health Updates","sendGameAction with position data"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager Position and Health Updates sendGameAction with position data should ensure x and y coordinates are numbers","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should ensure x and y coordinates are numbers"},{"ancestorTitles":["WebSocketManager Position and Health Updates","message handling for position updates"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager Position and Health Updates message handling for position updates should correctly handle incoming position update messages","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should correctly handle incoming position update messages"},{"ancestorTitles":["WebSocketManager Position and Health Updates","message handling for position updates"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager Position and Health Updates message handling for position updates should correctly handle incoming health update messages","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should correctly handle incoming health update messages"},{"ancestorTitles":["WebSocketManager Position and Health Updates","error handling"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"WebSocketManager Position and Health Updates error handling should catch and log errors when sending a position update","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should catch and log errors when sending a position update"}],"endTime":1750397509005,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/websocket_manager_updates.test.ts","startTime":1750397508959,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene","showHitEffect"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene showHitEffect should create a hit effect at player position when given player index 0","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should create a hit effect at player position when given player index 0"},{"ancestorTitles":["KidsFightScene","showHitEffect"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene showHitEffect should create a hit effect at player position when given player index 1","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should create a hit effect at player position when given player index 1"},{"ancestorTitles":["KidsFightScene","showHitEffect"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene showHitEffect should set up animation complete handler","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should set up animation complete handler"},{"ancestorTitles":["KidsFightScene Integration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Integration should initialize without errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should initialize without errors"}],"endTime":1750397509003,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_new.test.ts","startTime":1750397508963,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["ScenarioSelectScene - Unit Tests"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene - Unit Tests host sends player_ready with scenario, guest does not","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"host sends player_ready with scenario, guest does not"},{"ancestorTitles":["ScenarioSelectScene - Unit Tests"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene - Unit Tests does not allow guest to change scenario","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"does not allow guest to change scenario"},{"ancestorTitles":["ScenarioSelectScene - Unit Tests"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene - Unit Tests allows host to change scenario and sends scenario_selected","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"allows host to change scenario and sends scenario_selected"},{"ancestorTitles":["ScenarioSelectScene - Unit Tests"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene - Unit Tests disables ready button after click","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"disables ready button after click"},{"ancestorTitles":["ScenarioSelectScene - Unit Tests"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene - Unit Tests local mode: ready button starts game directly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"local mode: ready button starts game directly"}],"endTime":1750397509006,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/scenario_select_scene.unit.test.ts","startTime":1750397508961,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene - showHitEffect"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - showHitEffect should create a hit effect at player position when given player index 0","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should create a hit effect at player position when given player index 0"},{"ancestorTitles":["KidsFightScene - showHitEffect"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - showHitEffect should create a hit effect at player position when given player index 1","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should create a hit effect at player position when given player index 1"},{"ancestorTitles":["KidsFightScene - showHitEffect"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - showHitEffect should create a hit effect at specified coordinates","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should create a hit effect at specified coordinates"},{"ancestorTitles":["KidsFightScene - showHitEffect"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - showHitEffect should clean up the hit effect after timeout","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should clean up the hit effect after timeout"},{"ancestorTitles":["KidsFightScene - showHitEffect"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene - showHitEffect should handle missing add property gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle missing add property gracefully"}],"endTime":1750397509004,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_simple.test.ts","startTime":1750397508970,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Health Damage Consistency Tests"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Health Damage Consistency Tests Normal attack should consistently reduce health by 5 points","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Normal attack should consistently reduce health by 5 points"},{"ancestorTitles":["Health Damage Consistency Tests"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Health Damage Consistency Tests Special attack should consistently reduce health by 10 points","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Special attack should consistently reduce health by 10 points"},{"ancestorTitles":["Health Damage Consistency Tests"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Health Damage Consistency Tests Multiple attacks should correctly reduce health cumulatively","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Multiple attacks should correctly reduce health cumulatively"},{"ancestorTitles":["Health Damage Consistency Tests"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Health Damage Consistency Tests Player objects and health array should remain synchronized","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"Player objects and health array should remain synchronized"},{"ancestorTitles":["Health Damage Consistency Tests"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Health Damage Consistency Tests WebSocket health updates should not cause double damage for local player","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"WebSocket health updates should not cause double damage for local player"},{"ancestorTitles":["Health Damage Consistency Tests"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Health Damage Consistency Tests Health should not go below 0","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Health should not go below 0"},{"ancestorTitles":["Health Damage Consistency Tests"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Health Damage Consistency Tests Health should not exceed MAX_HEALTH","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Health should not exceed MAX_HEALTH"}],"endTime":1750397509070,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/health_damage_consistency.test.ts","startTime":1750397509036,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["PlayerSelectScene Ready Button UI"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene Ready Button UI creates ready button with correct default style","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"creates ready button with correct default style"},{"ancestorTitles":["PlayerSelectScene Ready Button UI"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene Ready Button UI updateReadyButton sets COMEÇAR state (green, enabled)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"updateReadyButton sets COMEÇAR state (green, enabled)"},{"ancestorTitles":["PlayerSelectScene Ready Button UI"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene Ready Button UI updateReadyButton sets CANCELAR state (red, disabled)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"updateReadyButton sets CANCELAR state (red, disabled)"},{"ancestorTitles":["PlayerSelectScene Ready Button UI"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene Ready Button UI does not use a rectangle for the button background","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"does not use a rectangle for the button background"}],"endTime":1750397509068,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/player_select_scene.ready_button.test.ts","startTime":1750397509035,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene attack and special animation durations"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene attack and special animation durations should set isAttacking[0] true for 200ms on attack, then false","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should set isAttacking[0] true for 200ms on attack, then false"},{"ancestorTitles":["KidsFightScene attack and special animation durations"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene attack and special animation durations should set isAttacking[1] true for 200ms on attack, then false","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should set isAttacking[1] true for 200ms on attack, then false"},{"ancestorTitles":["KidsFightScene attack and special animation durations"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene attack and special animation durations should set isAttacking[0] true for 900ms on special attack, then false","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should set isAttacking[0] true for 900ms on special attack, then false"},{"ancestorTitles":["KidsFightScene attack and special animation durations"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene attack and special animation durations should prevent new attacks while isAttacking is true","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should prevent new attacks while isAttacking is true"},{"ancestorTitles":["KidsFightScene attack and special animation durations"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene attack and special animation durations should handle rapid key presses correctly","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should handle rapid key presses correctly"},{"ancestorTitles":["KidsFightScene attack and special animation durations"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene attack and special animation durations should handle multiple players attacking simultaneously","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should handle multiple players attacking simultaneously"}],"endTime":1750397509086,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_animations.test.ts","startTime":1750397509061,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["OnlineModeScene","Initialization"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene Initialization should create an instance of OnlineModeScene","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should create an instance of OnlineModeScene"},{"ancestorTitles":["OnlineModeScene","Initialization"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene Initialization should set up WebSocket connection on create","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should set up WebSocket connection on create"},{"ancestorTitles":["OnlineModeScene","Room Creation"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene Room Creation should create a room when createGame is called","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should create a room when createGame is called"},{"ancestorTitles":["OnlineModeScene","Message Handling"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene Message Handling should handle room_created message","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle room_created message"},{"ancestorTitles":["OnlineModeScene","Message Handling"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene Message Handling should handle game_joined message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle game_joined message"},{"ancestorTitles":["OnlineModeScene","Message Handling"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene Message Handling should handle player_joined message when host","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle player_joined message when host"},{"ancestorTitles":["OnlineModeScene","Message Handling"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene Message Handling should handle error messages","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle error messages"},{"ancestorTitles":["OnlineModeScene","Error Handling","showError"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene Error Handling showError shows error when errorText is present and not destroyed","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"shows error when errorText is present and not destroyed"},{"ancestorTitles":["OnlineModeScene","Error Handling","showError"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene Error Handling showError warns and does not throw if errorText is missing","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"warns and does not throw if errorText is missing"},{"ancestorTitles":["OnlineModeScene","Error Handling","showError"],"duration":33,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene Error Handling showError warns and does not throw if errorText is destroyed","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"warns and does not throw if errorText is destroyed"},{"ancestorTitles":["OnlineModeScene","Error Handling","showError"],"duration":175,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene Error Handling showError guards canvas drawing if errorCanvas context is null","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"guards canvas drawing if errorCanvas context is null"},{"ancestorTitles":["OnlineModeScene","Error Handling","showError"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene Error Handling showError does not warn if errorCanvas context is valid","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"does not warn if errorCanvas context is valid"},{"ancestorTitles":["OnlineModeScene","Error Handling","showError"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene Error Handling showError hides errorText after timeout if not destroyed","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"hides errorText after timeout if not destroyed"},{"ancestorTitles":["OnlineModeScene","Error Handling","showError"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene Error Handling showError does not throw if errorText destroyed before timeout","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"does not throw if errorText destroyed before timeout"},{"ancestorTitles":["OnlineModeScene","Error Handling"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene Error Handling should handle connection errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle connection errors"},{"ancestorTitles":["OnlineModeScene","Error Handling"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene Error Handling should not throw if showError is called before errorText is initialized","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not throw if showError is called before errorText is initialized"},{"ancestorTitles":["OnlineModeScene","Error Handling"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene Error Handling should display error message if errorText exists (isolated test)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should display error message if errorText exists (isolated test)"},{"ancestorTitles":["OnlineModeScene","Error Handling"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene Error Handling should not update errorText if it has been destroyed","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should not update errorText if it has been destroyed"},{"ancestorTitles":["OnlineModeScene","Error Handling"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene Error Handling should hide error message after timeout only if errorText exists and is not destroyed","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should hide error message after timeout only if errorText exists and is not destroyed"},{"ancestorTitles":["OnlineModeScene","Error Handling"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene Error Handling should not attempt to hide error message after timeout if errorText has been destroyed","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not attempt to hide error message after timeout if errorText has been destroyed"},{"ancestorTitles":["OnlineModeScene","UI Layout and Interactions"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene UI Layout and Interactions should create all main UI elements with correct visibility and positioning","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"should create all main UI elements with correct visibility and positioning"},{"ancestorTitles":["OnlineModeScene","UI Layout and Interactions"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene UI Layout and Interactions should show join prompt and input when joinButton is clicked","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should show join prompt and input when joinButton is clicked"},{"ancestorTitles":["OnlineModeScene","UI Layout and Interactions"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene UI Layout and Interactions should call createGame when createButton is clicked","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should call createGame when createButton is clicked"},{"ancestorTitles":["OnlineModeScene","UI Layout and Interactions"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene UI Layout and Interactions should call goBack when backButton is clicked","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should call goBack when backButton is clicked"},{"ancestorTitles":["OnlineModeScene","UI Layout and Interactions"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"OnlineModeScene UI Layout and Interactions should set up resize event handler for responsive layout","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should set up resize event handler for responsive layout"}],"endTime":1750397509018,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/online_mode_scene.test.ts","startTime":1750397508633,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["ScenarioSelectScene - Online Mode Transitions"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene - Online Mode Transitions should pass gameMode: online when host transitions to KidsFightScene","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should pass gameMode: online when host transitions to KidsFightScene"},{"ancestorTitles":["ScenarioSelectScene - Online Mode Transitions"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ScenarioSelectScene - Online Mode Transitions should pass gameMode: online when guest receives scenario_selected","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should pass gameMode: online when guest receives scenario_selected"}],"endTime":1750397509092,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/scenario_select_scene.online.test.ts","startTime":1750397509066,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["PlayerSelectScene Online Sync"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene Online Sync host can only select for player 1","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"host can only select for player 1"},{"ancestorTitles":["PlayerSelectScene Online Sync"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene Online Sync guest can only select for player 2","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"guest can only select for player 2"},{"ancestorTitles":["PlayerSelectScene Online Sync"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene Online Sync receives player_selected for p1 and updates only player 1","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"receives player_selected for p1 and updates only player 1"},{"ancestorTitles":["PlayerSelectScene Online Sync"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene Online Sync receives player_selected for p2 and updates only player 2","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"receives player_selected for p2 and updates only player 2"},{"ancestorTitles":["PlayerSelectScene Online Sync"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene Online Sync does not update indices if character key is not found","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"does not update indices if character key is not found"},{"ancestorTitles":["PlayerSelectScene Online Sync"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene Online Sync updates selection indicators after sync","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"updates selection indicators after sync"}],"endTime":1750397509079,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/player_select_scene.sync.test.ts","startTime":1750397509037,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene Game State Tests","Player Health Management"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Game State Tests Player Health Management should reduce player health when taking damage","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should reduce player health when taking damage"},{"ancestorTitles":["KidsFightScene Game State Tests","Player Health Management"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Game State Tests Player Health Management should not allow health to go below 0","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should not allow health to go below 0"},{"ancestorTitles":["KidsFightScene Game State Tests","Game Over Conditions"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Game State Tests Game Over Conditions should end game when player 1 health reaches 0","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should end game when player 1 health reaches 0"},{"ancestorTitles":["KidsFightScene Game State Tests","Game Over Conditions"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Game State Tests Game Over Conditions should end game when player 2 health reaches 0","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should end game when player 2 health reaches 0"},{"ancestorTitles":["KidsFightScene Game State Tests","Game Over Conditions"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Game State Tests Game Over Conditions should handle a draw when both players reach 0 health","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle a draw when both players reach 0 health"},{"ancestorTitles":["KidsFightScene Game State Tests","Game Over Conditions"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Game State Tests Game Over Conditions should end game when time runs out","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should end game when time runs out"},{"ancestorTitles":["KidsFightScene Game State Tests","Timer Functionality"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Game State Tests Timer Functionality should decrement time left","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should decrement time left"},{"ancestorTitles":["KidsFightScene Game State Tests","Timer Functionality"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Game State Tests Timer Functionality should not go below 0 seconds","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not go below 0 seconds"}],"endTime":1750397509114,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_game_state.test.ts","startTime":1750397509073,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["getCharacterGridPosition"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"getCharacterGridPosition computes correct center cell positions and offsets","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"computes correct center cell positions and offsets"},{"ancestorTitles":["getCharacterGridPosition"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"getCharacterGridPosition computes correct positions for top-left cell","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"computes correct positions for top-left cell"},{"ancestorTitles":["getCharacterGridPosition"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"getCharacterGridPosition computes correct positions for bottom-right cell","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"computes correct positions for bottom-right cell"}],"endTime":1750397509119,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/player_select_layout.test.ts","startTime":1750397509079,"status":"passed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1750397510091,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    ReferenceError: module is not defined\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m module\u001b[33m.\u001b[39mexports \u001b[33m=\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m   presets\u001b[33m:\u001b[39m [\n     \u001b[90m 3 |\u001b[39m     [\u001b[32m'@babel/preset-env'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m 4 |\u001b[39m       targets\u001b[33m:\u001b[39m {\u001b[0m\n\n      \u001b[2mat \u001b[22mfile:/Users/ivan/projects/kidsfight/babel.config.js\u001b[2m:1:1\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:50:60)\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:69:14)\u001b[22m\n      \u001b[2mat ScriptTransformer._getCacheKey (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:228:41)\u001b[22m\n      \u001b[2mat ScriptTransformer._getFileCachePath (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:289:27)\u001b[22m\n      \u001b[2mat ScriptTransformer.transformSource (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:525:32)\u001b[22m\n      \u001b[2mat ScriptTransformer._transformAndBuildScript (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:674:40)\u001b[22m\n      \u001b[2mat ScriptTransformer.transform (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:726:19)\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/specialAttackRestriction.test.mjs","startTime":1750397510091,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Test setup"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Test setup should pass","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should pass"}],"endTime":1750397509125,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/setup.test.ts","startTime":1750397509087,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["PlayerSelectScene","initialization"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene initialization should initialize with default character selections","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should initialize with default character selections"},{"ancestorTitles":["PlayerSelectScene","initialization"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene initialization should have all character keys defined","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have all character keys defined"},{"ancestorTitles":["PlayerSelectScene","WebSocket integration"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene WebSocket integration should use the provided WebSocketManager instance","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should use the provided WebSocketManager instance"},{"ancestorTitles":["PlayerSelectScene","WebSocket integration"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene WebSocket integration should initialize with local mode by default","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should initialize with local mode by default"},{"ancestorTitles":["PlayerSelectScene","character selection"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene character selection should allow selecting different characters","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow selecting different characters"}],"endTime":1750397509112,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/player_select_scene.simple.test.ts","startTime":1750397509061,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["KidsFightScene Game State Tests","Player Health Management"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Game State Tests Player Health Management should reduce player health when taking damage","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should reduce player health when taking damage"},{"ancestorTitles":["KidsFightScene Game State Tests","Player Health Management"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Game State Tests Player Health Management should not allow health to go below 0","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should not allow health to go below 0"},{"ancestorTitles":["KidsFightScene Game State Tests","Game Over Conditions"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Game State Tests Game Over Conditions should end game when player 1 health reaches 0","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should end game when player 1 health reaches 0"},{"ancestorTitles":["KidsFightScene Game State Tests","Game Over Conditions"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Game State Tests Game Over Conditions should end game when player 2 health reaches 0","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should end game when player 2 health reaches 0"},{"ancestorTitles":["KidsFightScene Game State Tests","Game Over Conditions"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Game State Tests Game Over Conditions should handle a draw when both players reach 0 health","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle a draw when both players reach 0 health"},{"ancestorTitles":["KidsFightScene Game State Tests","Timer Functionality"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Game State Tests Timer Functionality should decrement time left","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should decrement time left"},{"ancestorTitles":["KidsFightScene Game State Tests","Timer Functionality"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"KidsFightScene Game State Tests Timer Functionality should not go below 0 seconds","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not go below 0 seconds"}],"endTime":1750397509118,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_gamestate.fixed.test.ts","startTime":1750397509091,"status":"passed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1750397510091,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    ReferenceError: module is not defined\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m module\u001b[33m.\u001b[39mexports \u001b[33m=\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m   presets\u001b[33m:\u001b[39m [\n     \u001b[90m 3 |\u001b[39m     [\u001b[32m'@babel/preset-env'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m 4 |\u001b[39m       targets\u001b[33m:\u001b[39m {\u001b[0m\n\n      \u001b[2mat \u001b[22mfile:/Users/ivan/projects/kidsfight/babel.config.js\u001b[2m:1:1\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:50:60)\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:69:14)\u001b[22m\n      \u001b[2mat ScriptTransformer._getCacheKey (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:228:41)\u001b[22m\n      \u001b[2mat ScriptTransformer._getFileCachePath (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:289:27)\u001b[22m\n      \u001b[2mat ScriptTransformer.transformSource (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:525:32)\u001b[22m\n      \u001b[2mat ScriptTransformer._transformAndBuildScript (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:674:40)\u001b[22m\n      \u001b[2mat ScriptTransformer.transform (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:726:19)\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/updateSceneLayout.test.mjs","startTime":1750397510091,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["PlayerSelectScene WebSocket Handling","WebSocket Message Sending"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene WebSocket Handling WebSocket Message Sending should send player_selected message without double stringification","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should send player_selected message without double stringification"},{"ancestorTitles":["PlayerSelectScene WebSocket Handling","WebSocket Message Handling"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene WebSocket Handling WebSocket Message Handling should handle already parsed objects in message handler","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle already parsed objects in message handler"},{"ancestorTitles":["PlayerSelectScene WebSocket Handling","WebSocket Message Handling"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene WebSocket Handling WebSocket Message Handling should handle both snake_case and camelCase message types","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle both snake_case and camelCase message types"},{"ancestorTitles":["PlayerSelectScene WebSocket Handling","Scene Transitions"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene WebSocket Handling Scene Transitions should pass WebSocketManager to ScenarioSelectScene when host launches game","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should pass WebSocketManager to ScenarioSelectScene when host launches game"},{"ancestorTitles":["PlayerSelectScene WebSocket Handling","Scene Transitions"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"PlayerSelectScene WebSocket Handling Scene Transitions should set up message handler for game_start when guest launches game","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should set up message handler for game_start when guest launches game"}],"endTime":1750397509113,"message":"","name":"/Users/ivan/projects/kidsfight/__tests__/player_select_websocket.test.ts","startTime":1750397509068,"status":"passed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1750397510091,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    ReferenceError: module is not defined\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m module\u001b[33m.\u001b[39mexports \u001b[33m=\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m   presets\u001b[33m:\u001b[39m [\n     \u001b[90m 3 |\u001b[39m     [\u001b[32m'@babel/preset-env'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m 4 |\u001b[39m       targets\u001b[33m:\u001b[39m {\u001b[0m\n\n      \u001b[2mat \u001b[22mfile:/Users/ivan/projects/kidsfight/babel.config.js\u001b[2m:1:1\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:50:60)\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:69:14)\u001b[22m\n      \u001b[2mat ScriptTransformer._getCacheKey (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:228:41)\u001b[22m\n      \u001b[2mat ScriptTransformer._getFileCachePath (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:289:27)\u001b[22m\n      \u001b[2mat ScriptTransformer.transformSource (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:525:32)\u001b[22m\n      \u001b[2mat ScriptTransformer._transformAndBuildScript (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:674:40)\u001b[22m\n      \u001b[2mat ScriptTransformer.transform (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:726:19)\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/sceneRestart.test.mjs","startTime":1750397510091,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1750397510091,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    ReferenceError: module is not defined\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m module\u001b[33m.\u001b[39mexports \u001b[33m=\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m   presets\u001b[33m:\u001b[39m [\n     \u001b[90m 3 |\u001b[39m     [\u001b[32m'@babel/preset-env'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m 4 |\u001b[39m       targets\u001b[33m:\u001b[39m {\u001b[0m\n\n      \u001b[2mat \u001b[22mfile:/Users/ivan/projects/kidsfight/babel.config.js\u001b[2m:1:1\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:50:60)\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:69:14)\u001b[22m\n      \u001b[2mat ScriptTransformer._getCacheKey (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:228:41)\u001b[22m\n      \u001b[2mat ScriptTransformer._getFileCachePath (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:289:27)\u001b[22m\n      \u001b[2mat ScriptTransformer.transformSource (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:525:32)\u001b[22m\n      \u001b[2mat ScriptTransformer._transformAndBuildScript (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:674:40)\u001b[22m\n      \u001b[2mat ScriptTransformer.transform (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:726:19)\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/scenarioBackgroundStretch.test.mjs","startTime":1750397510091,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1750397510091,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    ReferenceError: module is not defined\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m module\u001b[33m.\u001b[39mexports \u001b[33m=\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m   presets\u001b[33m:\u001b[39m [\n     \u001b[90m 3 |\u001b[39m     [\u001b[32m'@babel/preset-env'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m 4 |\u001b[39m       targets\u001b[33m:\u001b[39m {\u001b[0m\n\n      \u001b[2mat \u001b[22mfile:/Users/ivan/projects/kidsfight/babel.config.js\u001b[2m:1:1\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:50:60)\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:69:14)\u001b[22m\n      \u001b[2mat ScriptTransformer._getCacheKey (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:228:41)\u001b[22m\n      \u001b[2mat ScriptTransformer._getFileCachePath (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:289:27)\u001b[22m\n      \u001b[2mat ScriptTransformer.transformSource (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:525:32)\u001b[22m\n      \u001b[2mat ScriptTransformer._transformAndBuildScript (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:674:40)\u001b[22m\n      \u001b[2mat ScriptTransformer.transform (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:726:19)\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/playerSelectionIndicator.test.mjs","startTime":1750397510091,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1750397510091,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    Unexpected module status 5. Cannot require() ES Module /Users/ivan/projects/kidsfight/babel.config.js because it is not yet fully loaded. This may be caused by a race condition if the module is simultaneously dynamically import()-ed via Promise.all(). Try await-ing the import() sequentially in a loop instead. (from /Users/ivan/projects/kidsfight/node_modules/@babel/core/lib/config/files/module-types.js)\n    This is caused by either a bug in Node.js or incorrect usage of Node.js internals.\n    Please open an issue with this stack trace at https://github.com/nodejs/node/issues\n\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:50:60)\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:69:14)\u001b[22m\n      \u001b[2mat ScriptTransformer._getCacheKey (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:228:41)\u001b[22m\n      \u001b[2mat ScriptTransformer._getFileCachePath (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:289:27)\u001b[22m\n      \u001b[2mat ScriptTransformer.transformSource (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:525:32)\u001b[22m\n      \u001b[2mat ScriptTransformer._transformAndBuildScript (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:674:40)\u001b[22m\n      \u001b[2mat ScriptTransformer.transform (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:726:19)\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/player2AttackKeys.test.mjs","startTime":1750397510091,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1750397510091,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    \u001b[1m\u001b[31mJest encountered an unexpected token\u001b[39m\u001b[22m\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see \u001b[4mhttps://jestjs.io/docs/ecmascript-modules\u001b[24m for how to enable it.\n     • If you are trying to use TypeScript, see \u001b[4mhttps://jestjs.io/docs/getting-started#using-typescript\u001b[24m\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \u001b[1m\"transformIgnorePatterns\"\u001b[22m in your config.\n     • If you need a custom transformation specify a \u001b[1m\"transform\"\u001b[22m option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \u001b[1m\"moduleNameMapper\"\u001b[22m config option.\n\n    You'll find more details and examples of these config options in the docs:\n    \u001b[36mhttps://jestjs.io/docs/configuration\u001b[39m\n    For information about custom transformations, see:\n    \u001b[36mhttps://jestjs.io/docs/code-transformation\u001b[39m\n\n    \u001b[1m\u001b[31mDetails:\u001b[39m\u001b[22m\n\n    /Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_gamestate.test.ts:1196\n            import KidsFightScene from '../kidsfight_scene';\n            ^^^^^^\n\n    SyntaxError: Cannot use import statement outside a module\n\n      \u001b[2mat Runtime.createScriptFromCode (\u001b[22mnode_modules/jest-runtime/build/index.js\u001b[2m:1505:14)\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/kidsfight_scene_gamestate.test.ts","startTime":1750397510091,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1750397510091,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    ReferenceError: module is not defined\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m module\u001b[33m.\u001b[39mexports \u001b[33m=\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m   presets\u001b[33m:\u001b[39m [\n     \u001b[90m 3 |\u001b[39m     [\u001b[32m'@babel/preset-env'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m 4 |\u001b[39m       targets\u001b[33m:\u001b[39m {\u001b[0m\n\n      \u001b[2mat \u001b[22mfile:/Users/ivan/projects/kidsfight/babel.config.js\u001b[2m:1:1\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:50:60)\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:69:14)\u001b[22m\n      \u001b[2mat ScriptTransformer._getCacheKey (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:228:41)\u001b[22m\n      \u001b[2mat ScriptTransformer._getFileCachePath (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:289:27)\u001b[22m\n      \u001b[2mat ScriptTransformer.transformSource (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:525:32)\u001b[22m\n      \u001b[2mat ScriptTransformer._transformAndBuildScript (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:674:40)\u001b[22m\n      \u001b[2mat ScriptTransformer.transform (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:726:19)\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/orientationOverlay.test.mjs","startTime":1750397510091,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1750397510091,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    ReferenceError: module is not defined\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m module\u001b[33m.\u001b[39mexports \u001b[33m=\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m   presets\u001b[33m:\u001b[39m [\n     \u001b[90m 3 |\u001b[39m     [\u001b[32m'@babel/preset-env'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m 4 |\u001b[39m       targets\u001b[33m:\u001b[39m {\u001b[0m\n\n      \u001b[2mat \u001b[22mfile:/Users/ivan/projects/kidsfight/babel.config.js\u001b[2m:1:1\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:50:60)\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:69:14)\u001b[22m\n      \u001b[2mat ScriptTransformer._getCacheKey (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:228:41)\u001b[22m\n      \u001b[2mat ScriptTransformer._getFileCachePath (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:289:27)\u001b[22m\n      \u001b[2mat ScriptTransformer.transformSource (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:525:32)\u001b[22m\n      \u001b[2mat ScriptTransformer._transformAndBuildScript (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:674:40)\u001b[22m\n      \u001b[2mat ScriptTransformer.transform (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:726:19)\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/playerSelection.test.mjs","startTime":1750397510091,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1750397510091,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    ReferenceError: module is not defined\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m module\u001b[33m.\u001b[39mexports \u001b[33m=\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m   presets\u001b[33m:\u001b[39m [\n     \u001b[90m 3 |\u001b[39m     [\u001b[32m'@babel/preset-env'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m 4 |\u001b[39m       targets\u001b[33m:\u001b[39m {\u001b[0m\n\n      \u001b[2mat \u001b[22mfile:/Users/ivan/projects/kidsfight/babel.config.js\u001b[2m:1:1\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:50:60)\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:69:14)\u001b[22m\n      \u001b[2mat ScriptTransformer._getCacheKey (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:228:41)\u001b[22m\n      \u001b[2mat ScriptTransformer._getFileCachePath (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:289:27)\u001b[22m\n      \u001b[2mat ScriptTransformer.transformSource (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:525:32)\u001b[22m\n      \u001b[2mat ScriptTransformer._transformAndBuildScript (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:674:40)\u001b[22m\n      \u001b[2mat ScriptTransformer.transform (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:726:19)\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/main.test.mjs","startTime":1750397510091,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1750397510091,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    ReferenceError: module is not defined\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m module\u001b[33m.\u001b[39mexports \u001b[33m=\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m   presets\u001b[33m:\u001b[39m [\n     \u001b[90m 3 |\u001b[39m     [\u001b[32m'@babel/preset-env'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m 4 |\u001b[39m       targets\u001b[33m:\u001b[39m {\u001b[0m\n\n      \u001b[2mat \u001b[22mfile:/Users/ivan/projects/kidsfight/babel.config.js\u001b[2m:1:1\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:50:60)\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:69:14)\u001b[22m\n      \u001b[2mat ScriptTransformer._getCacheKey (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:228:41)\u001b[22m\n      \u001b[2mat ScriptTransformer._getFileCachePath (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:289:27)\u001b[22m\n      \u001b[2mat ScriptTransformer.transformSource (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:525:32)\u001b[22m\n      \u001b[2mat ScriptTransformer._transformAndBuildScript (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:674:40)\u001b[22m\n      \u001b[2mat ScriptTransformer.transform (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:726:19)\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/gameUtils.test.mjs","startTime":1750397510091,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1750397510091,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    Unexpected module status 5. Cannot require() ES Module /Users/ivan/projects/kidsfight/babel.config.js because it is not yet fully loaded. This may be caused by a race condition if the module is simultaneously dynamically import()-ed via Promise.all(). Try await-ing the import() sequentially in a loop instead. (from /Users/ivan/projects/kidsfight/node_modules/@babel/core/lib/config/files/module-types.js)\n    This is caused by either a bug in Node.js or incorrect usage of Node.js internals.\n    Please open an issue with this stack trace at https://github.com/nodejs/node/issues\n\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:50:60)\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:69:14)\u001b[22m\n      \u001b[2mat ScriptTransformer._getCacheKey (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:228:41)\u001b[22m\n      \u001b[2mat ScriptTransformer._getFileCachePath (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:289:27)\u001b[22m\n      \u001b[2mat ScriptTransformer.transformSource (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:525:32)\u001b[22m\n      \u001b[2mat ScriptTransformer._transformAndBuildScript (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:674:40)\u001b[22m\n      \u001b[2mat ScriptTransformer.transform (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:726:19)\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/gameUtils.cjs.test.mjs","startTime":1750397510091,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1750397510091,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    Unexpected module status 5. Cannot require() ES Module /Users/ivan/projects/kidsfight/babel.config.js because it is not yet fully loaded. This may be caused by a race condition if the module is simultaneously dynamically import()-ed via Promise.all(). Try await-ing the import() sequentially in a loop instead. (from /Users/ivan/projects/kidsfight/node_modules/@babel/core/lib/config/files/module-types.js)\n    This is caused by either a bug in Node.js or incorrect usage of Node.js internals.\n    Please open an issue with this stack trace at https://github.com/nodejs/node/issues\n\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:50:60)\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:69:14)\u001b[22m\n      \u001b[2mat ScriptTransformer._getCacheKey (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:228:41)\u001b[22m\n      \u001b[2mat ScriptTransformer._getFileCachePath (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:289:27)\u001b[22m\n      \u001b[2mat ScriptTransformer.transformSource (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:525:32)\u001b[22m\n      \u001b[2mat ScriptTransformer._transformAndBuildScript (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:674:40)\u001b[22m\n      \u001b[2mat ScriptTransformer.transform (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:726:19)\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/characterNames.test.mjs","startTime":1750397510091,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1750397510091,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    Unexpected module status 5. Cannot require() ES Module /Users/ivan/projects/kidsfight/babel.config.js because it is not yet fully loaded. This may be caused by a race condition if the module is simultaneously dynamically import()-ed via Promise.all(). Try await-ing the import() sequentially in a loop instead. (from /Users/ivan/projects/kidsfight/node_modules/@babel/core/lib/config/files/module-types.js)\n    This is caused by either a bug in Node.js or incorrect usage of Node.js internals.\n    Please open an issue with this stack trace at https://github.com/nodejs/node/issues\n\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:50:60)\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:69:14)\u001b[22m\n      \u001b[2mat ScriptTransformer._getCacheKey (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:228:41)\u001b[22m\n      \u001b[2mat ScriptTransformer._getFileCachePath (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:289:27)\u001b[22m\n      \u001b[2mat ScriptTransformer.transformSource (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:525:32)\u001b[22m\n      \u001b[2mat ScriptTransformer._transformAndBuildScript (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:674:40)\u001b[22m\n      \u001b[2mat ScriptTransformer.transform (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:726:19)\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/dynamicAnimations.test.mjs","startTime":1750397510091,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1750397510091,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    ReferenceError: module is not defined\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m module\u001b[33m.\u001b[39mexports \u001b[33m=\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m   presets\u001b[33m:\u001b[39m [\n     \u001b[90m 3 |\u001b[39m     [\u001b[32m'@babel/preset-env'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m 4 |\u001b[39m       targets\u001b[33m:\u001b[39m {\u001b[0m\n\n      \u001b[2mat \u001b[22mfile:/Users/ivan/projects/kidsfight/babel.config.js\u001b[2m:1:1\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:50:60)\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:69:14)\u001b[22m\n      \u001b[2mat ScriptTransformer._getCacheKey (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:228:41)\u001b[22m\n      \u001b[2mat ScriptTransformer._getFileCachePath (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:289:27)\u001b[22m\n      \u001b[2mat ScriptTransformer.transformSource (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:525:32)\u001b[22m\n      \u001b[2mat ScriptTransformer._transformAndBuildScript (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:674:40)\u001b[22m\n      \u001b[2mat ScriptTransformer.transform (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:726:19)\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/playerAttackTouch.test.mjs","startTime":1750397510091,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1750397510091,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    Unexpected module status 5. Cannot require() ES Module /Users/ivan/projects/kidsfight/babel.config.js because it is not yet fully loaded. This may be caused by a race condition if the module is simultaneously dynamically import()-ed via Promise.all(). Try await-ing the import() sequentially in a loop instead. (from /Users/ivan/projects/kidsfight/node_modules/@babel/core/lib/config/files/module-types.js)\n    This is caused by either a bug in Node.js or incorrect usage of Node.js internals.\n    Please open an issue with this stack trace at https://github.com/nodejs/node/issues\n\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:50:60)\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:69:14)\u001b[22m\n      \u001b[2mat ScriptTransformer._getCacheKey (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:228:41)\u001b[22m\n      \u001b[2mat ScriptTransformer._getFileCachePath (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:289:27)\u001b[22m\n      \u001b[2mat ScriptTransformer.transformSource (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:525:32)\u001b[22m\n      \u001b[2mat ScriptTransformer._transformAndBuildScript (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:674:40)\u001b[22m\n      \u001b[2mat ScriptTransformer.transform (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:726:19)\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/gameFlow.test.mjs","startTime":1750397510091,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1750397510091,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    TypeError: Cannot read properties of undefined (reading 'init')\n\n    \u001b[0m \u001b[90m 1425 |\u001b[39m\n     \u001b[90m 1426 |\u001b[39m     \u001b[90m// Call the method that should use WebSocketManager\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1427 |\u001b[39m     scene\u001b[33m.\u001b[39minit({ \n     \u001b[90m      |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 1428 |\u001b[39m       selected\u001b[33m:\u001b[39m { p1\u001b[33m:\u001b[39m \u001b[32m'player3'\u001b[39m\u001b[33m,\u001b[39m p2\u001b[33m:\u001b[39m \u001b[32m'player4'\u001b[39m }\u001b[33m,\u001b[39m\n     \u001b[90m 1429 |\u001b[39m       selectedScenario\u001b[33m:\u001b[39m \u001b[32m'scenario2'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 1430 |\u001b[39m       gameMode\u001b[33m:\u001b[39m \u001b[32m'online'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      \u001b[2mat \u001b[22m\u001b[0m\u001b[36m__tests__/character_scenario_selection.test.ts\u001b[39m\u001b[0m\u001b[2m:1427:11\u001b[22m\n      \u001b[2mat \u001b[22m\u001b[0m\u001b[36m__tests__/character_scenario_selection.test.ts\u001b[39m\u001b[0m\u001b[2m:1406:3\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[0m\u001b[36m__tests__/character_scenario_selection.test.ts\u001b[39m\u001b[0m\u001b[2m:732:1)\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/character_scenario_selection.test.ts","startTime":1750397510091,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1750397510091,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    ReferenceError: module is not defined\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m module\u001b[33m.\u001b[39mexports \u001b[33m=\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m   presets\u001b[33m:\u001b[39m [\n     \u001b[90m 3 |\u001b[39m     [\u001b[32m'@babel/preset-env'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m 4 |\u001b[39m       targets\u001b[33m:\u001b[39m {\u001b[0m\n\n      \u001b[2mat \u001b[22mfile:/Users/ivan/projects/kidsfight/babel.config.js\u001b[2m:1:1\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:50:60)\u001b[22m\n      \u001b[2mat loadPartialConfigSync (\u001b[22mnode_modules/@babel/core/src/config/index.ts\u001b[2m:69:14)\u001b[22m\n      \u001b[2mat ScriptTransformer._getCacheKey (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:228:41)\u001b[22m\n      \u001b[2mat ScriptTransformer._getFileCachePath (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:289:27)\u001b[22m\n      \u001b[2mat ScriptTransformer.transformSource (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:525:32)\u001b[22m\n      \u001b[2mat ScriptTransformer._transformAndBuildScript (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:674:40)\u001b[22m\n      \u001b[2mat ScriptTransformer.transform (\u001b[22mnode_modules/@jest/transform/build/ScriptTransformer.js\u001b[2m:726:19)\u001b[22m\n","name":"/Users/ivan/projects/kidsfight/__tests__/attackCooldown.test.mjs","startTime":1750397510091,"status":"failed","summary":""}],"wasInterrupted":false,"coverageMap":{"/Users/ivan/projects/kidsfight/src/types/phaser.d.ts":{"path":"/Users/ivan/projects/kidsfight/src/types/phaser.d.ts","statementMap":{},"fnMap":{},"branchMap":{},"s":{},"f":{},"b":{}},"/Users/ivan/projects/kidsfight/src/types/websocket_manager.d.ts":{"path":"/Users/ivan/projects/kidsfight/src/types/websocket_manager.d.ts","statementMap":{},"fnMap":{},"branchMap":{},"s":{},"f":{},"b":{}},"/Users/ivan/projects/kidsfight/src/types/images.d.ts":{"path":"/Users/ivan/projects/kidsfight/src/types/images.d.ts","statementMap":{},"fnMap":{},"branchMap":{},"s":{},"f":{},"b":{}}}}
